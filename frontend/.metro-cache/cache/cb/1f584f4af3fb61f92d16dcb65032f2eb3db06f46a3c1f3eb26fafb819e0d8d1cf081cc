{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":92},"end":{"line":3,"column":40,"index":132}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":24,"index":157}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.sendPushTokenToBackend = sendPushTokenToBackend;\n  exports.updateNotificationPreferences = updateNotificationPreferences;\n  exports.removePushTokenFromBackend = removePushTokenFromBackend;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _api = require(_dependencyMap[4], \"./api\");\n  var api = _interopDefault(_api);\n  // Configure how notifications should be displayed when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        return {\n          shouldShowAlert: true,\n          shouldPlaySound: true,\n          shouldSetBadge: true\n        };\n      });\n      return function handleNotification() {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  });\n\n  /**\n   * Register for push notifications and get the Expo Push Token\n   */\n  function registerForPushNotificationsAsync() {\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  /**\n   * Send the push token to backend\n   */\n  function _registerForPushNotificationsAsync() {\n    _registerForPushNotificationsAsync = (0, _asyncToGenerator.default)(function* () {\n      var token = null;\n      if (_reactNative.Platform.OS === 'android') {\n        yield Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#FF231F7C'\n        });\n      }\n      if (Device.isDevice) {\n        var _yield$Notifications$ = yield Notifications.getPermissionsAsync(),\n          existingStatus = _yield$Notifications$.status;\n        var finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          var _yield$Notifications$2 = yield Notifications.requestPermissionsAsync(),\n            status = _yield$Notifications$2.status;\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return null;\n        }\n        try {\n          var tokenData = yield Notifications.getExpoPushTokenAsync({\n            projectId: '97534a80-2fb3-4bbf-a17c-2fccf8f825ba' // Your Expo project ID\n          });\n          token = tokenData.data;\n          console.log('Push token:', token);\n        } catch (error) {\n          console.error('Error getting push token:', error);\n        }\n      } else {\n        console.log('Must use physical device for Push Notifications');\n      }\n      return token;\n    });\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function sendPushTokenToBackend(_x) {\n    return _sendPushTokenToBackend.apply(this, arguments);\n  }\n  /**\n   * Update notification preferences on backend\n   */\n  function _sendPushTokenToBackend() {\n    _sendPushTokenToBackend = (0, _asyncToGenerator.default)(function* (token) {\n      try {\n        yield api.default.post('/api/notifications/register', {\n          token\n        });\n        console.log('Push token registered with backend');\n        return true;\n      } catch (error) {\n        console.error('Failed to register push token with backend:', error);\n        return false;\n      }\n    });\n    return _sendPushTokenToBackend.apply(this, arguments);\n  }\n  function updateNotificationPreferences(_x2) {\n    return _updateNotificationPreferences.apply(this, arguments);\n  }\n  /**\n   * Remove push token from backend (on logout)\n   */\n  function _updateNotificationPreferences() {\n    _updateNotificationPreferences = (0, _asyncToGenerator.default)(function* (preferences) {\n      try {\n        yield api.default.put('/api/notifications/preferences', preferences);\n        console.log('Notification preferences updated');\n        return true;\n      } catch (error) {\n        console.error('Failed to update notification preferences:', error);\n        return false;\n      }\n    });\n    return _updateNotificationPreferences.apply(this, arguments);\n  }\n  function removePushTokenFromBackend() {\n    return _removePushTokenFromBackend.apply(this, arguments);\n  }\n  function _removePushTokenFromBackend() {\n    _removePushTokenFromBackend = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield api.default.delete('/api/notifications/unregister');\n        console.log('Push token removed from backend');\n        return true;\n      } catch (error) {\n        console.error('Failed to remove push token from backend:', error);\n        return false;\n      }\n    });\n    return _removePushTokenFromBackend.apply(this, arguments);\n  }\n});","lineCount":161,"map":[[27,2,18,0,"exports"],[27,9,18,0],[27,10,18,0,"registerForPushNotificationsAsync"],[27,43,18,0],[27,46,18,0,"registerForPushNotificationsAsync"],[27,79,18,0],[28,2,63,0,"exports"],[28,9,63,0],[28,10,63,0,"sendPushTokenToBackend"],[28,32,63,0],[28,35,63,0,"sendPushTokenToBackend"],[28,57,63,0],[29,2,77,0,"exports"],[29,9,77,0],[29,10,77,0,"updateNotificationPreferences"],[29,39,77,0],[29,42,77,0,"updateNotificationPreferences"],[29,71,77,0],[30,2,96,0,"exports"],[30,9,96,0],[30,10,96,0,"removePushTokenFromBackend"],[30,36,96,0],[30,39,96,0,"removePushTokenFromBackend"],[30,65,96,0],[31,2,105,1],[31,6,105,1,"_babelRuntimeHelpersAsyncToGenerator"],[31,42,105,1],[31,45,105,1,"require"],[31,52,105,1],[31,53,105,1,"_dependencyMap"],[31,67,105,1],[32,2,105,1],[32,6,105,1,"_asyncToGenerator"],[32,23,105,1],[32,26,105,1,"_interopDefault"],[32,41,105,1],[32,42,105,1,"_babelRuntimeHelpersAsyncToGenerator"],[32,78,105,1],[33,2,1,0],[33,6,1,0,"_expoNotifications"],[33,24,1,0],[33,27,1,0,"require"],[33,34,1,0],[33,35,1,0,"_dependencyMap"],[33,49,1,0],[34,2,1,0],[34,6,1,0,"Notifications"],[34,19,1,0],[34,22,1,0,"_interopNamespace"],[34,39,1,0],[34,40,1,0,"_expoNotifications"],[34,58,1,0],[35,2,2,0],[35,6,2,0,"_expoDevice"],[35,17,2,0],[35,20,2,0,"require"],[35,27,2,0],[35,28,2,0,"_dependencyMap"],[35,42,2,0],[36,2,2,0],[36,6,2,0,"Device"],[36,12,2,0],[36,15,2,0,"_interopNamespace"],[36,32,2,0],[36,33,2,0,"_expoDevice"],[36,44,2,0],[37,2,3,0],[37,6,3,0,"_reactNative"],[37,18,3,0],[37,21,3,0,"require"],[37,28,3,0],[37,29,3,0,"_dependencyMap"],[37,43,3,0],[38,2,4,0],[38,6,4,0,"_api"],[38,10,4,0],[38,13,4,0,"require"],[38,20,4,0],[38,21,4,0,"_dependencyMap"],[38,35,4,0],[39,2,4,0],[39,6,4,0,"api"],[39,9,4,0],[39,12,4,0,"_interopDefault"],[39,27,4,0],[39,28,4,0,"_api"],[39,32,4,0],[40,2,6,0],[41,2,7,0,"Notifications"],[41,15,7,13],[41,16,7,14,"setNotificationHandler"],[41,38,7,36],[41,39,7,37],[42,4,8,2,"handleNotification"],[42,22,8,20],[43,6,8,20],[43,10,8,20,"_ref"],[43,14,8,20],[43,21,8,20,"_asyncToGenerator"],[43,38,8,20],[43,39,8,20,"default"],[43,46,8,20],[43,48,8,22],[44,8,8,22],[44,15,8,35],[45,10,9,4,"shouldShowAlert"],[45,25,9,19],[45,27,9,21],[45,31,9,25],[46,10,10,4,"shouldPlaySound"],[46,25,10,19],[46,27,10,21],[46,31,10,25],[47,10,11,4,"shouldSetBadge"],[47,24,11,18],[47,26,11,20],[48,8,12,2],[48,9,12,3],[49,6,12,3],[49,7,12,4],[50,6,12,4],[50,22,8,2,"handleNotification"],[50,40,8,20,"handleNotification"],[50,41,8,20],[51,8,8,20],[51,15,8,20,"_ref"],[51,19,8,20],[51,20,8,20,"apply"],[51,25,8,20],[51,32,8,20,"arguments"],[51,41,8,20],[52,6,8,20],[53,4,8,20],[54,2,13,0],[54,3,13,1],[54,4,13,2],[56,2,15,0],[57,0,16,0],[58,0,17,0],[59,2,15,0],[59,11,18,22,"registerForPushNotificationsAsync"],[59,44,18,55,"registerForPushNotificationsAsync"],[59,45,18,55],[60,4,18,55],[60,11,18,55,"_registerForPushNotificationsAsync"],[60,45,18,55],[60,46,18,55,"apply"],[60,51,18,55],[60,58,18,55,"arguments"],[60,67,18,55],[61,2,18,55],[62,2,60,0],[63,0,61,0],[64,0,62,0],[65,2,60,0],[65,11,60,0,"_registerForPushNotificationsAsync"],[65,46,60,0],[66,4,60,0,"_registerForPushNotificationsAsync"],[66,38,60,0],[66,45,60,0,"_asyncToGenerator"],[66,62,60,0],[66,63,60,0,"default"],[66,70,60,0],[66,72,18,7],[66,85,18,82],[67,6,19,2],[67,10,19,6,"token"],[67,15,19,11],[67,18,19,14],[67,22,19,18],[68,6,21,2],[68,10,21,6,"Platform"],[68,22,21,14],[68,23,21,14,"Platform"],[68,31,21,14],[68,32,21,15,"OS"],[68,34,21,17],[68,39,21,22],[68,48,21,31],[68,50,21,33],[69,8,22,4],[69,14,22,10,"Notifications"],[69,27,22,23],[69,28,22,24,"setNotificationChannelAsync"],[69,55,22,51],[69,56,22,52],[69,65,22,61],[69,67,22,63],[70,10,23,6,"name"],[70,14,23,10],[70,16,23,12],[70,25,23,21],[71,10,24,6,"importance"],[71,20,24,16],[71,22,24,18,"Notifications"],[71,35,24,31],[71,36,24,32,"AndroidImportance"],[71,53,24,49],[71,54,24,50,"MAX"],[71,57,24,53],[72,10,25,6,"vibrationPattern"],[72,26,25,22],[72,28,25,24],[72,29,25,25],[72,30,25,26],[72,32,25,28],[72,35,25,31],[72,37,25,33],[72,40,25,36],[72,42,25,38],[72,45,25,41],[72,46,25,42],[73,10,26,6,"lightColor"],[73,20,26,16],[73,22,26,18],[74,8,27,4],[74,9,27,5],[74,10,27,6],[75,6,28,2],[76,6,30,2],[76,10,30,6,"Device"],[76,16,30,12],[76,17,30,13,"isDevice"],[76,25,30,21],[76,27,30,23],[77,8,31,4],[77,12,31,4,"_yield$Notifications$"],[77,33,31,4],[77,42,31,45,"Notifications"],[77,55,31,58],[77,56,31,59,"getPermissionsAsync"],[77,75,31,78],[77,76,31,79],[77,77,31,80],[78,10,31,20,"existingStatus"],[78,24,31,34],[78,27,31,34,"_yield$Notifications$"],[78,48,31,34],[78,49,31,12,"status"],[78,55,31,18],[79,8,32,4],[79,12,32,8,"finalStatus"],[79,23,32,19],[79,26,32,22,"existingStatus"],[79,40,32,36],[80,8,34,4],[80,12,34,8,"existingStatus"],[80,26,34,22],[80,31,34,27],[80,40,34,36],[80,42,34,38],[81,10,35,6],[81,14,35,6,"_yield$Notifications$2"],[81,36,35,6],[81,45,35,31,"Notifications"],[81,58,35,44],[81,59,35,45,"requestPermissionsAsync"],[81,82,35,68],[81,83,35,69],[81,84,35,70],[82,12,35,14,"status"],[82,18,35,20],[82,21,35,20,"_yield$Notifications$2"],[82,43,35,20],[82,44,35,14,"status"],[82,50,35,20],[83,10,36,6,"finalStatus"],[83,21,36,17],[83,24,36,20,"status"],[83,30,36,26],[84,8,37,4],[85,8,39,4],[85,12,39,8,"finalStatus"],[85,23,39,19],[85,28,39,24],[85,37,39,33],[85,39,39,35],[86,10,40,6,"console"],[86,17,40,13],[86,18,40,14,"log"],[86,21,40,17],[86,22,40,18],[86,71,40,67],[86,72,40,68],[87,10,41,6],[87,17,41,13],[87,21,41,17],[88,8,42,4],[89,8,44,4],[89,12,44,8],[90,10,45,6],[90,14,45,12,"tokenData"],[90,23,45,21],[90,32,45,30,"Notifications"],[90,45,45,43],[90,46,45,44,"getExpoPushTokenAsync"],[90,67,45,65],[90,68,45,66],[91,12,46,8,"projectId"],[91,21,46,17],[91,23,46,19],[91,61,46,57],[91,62,46,59],[92,10,47,6],[92,11,47,7],[92,12,47,8],[93,10,48,6,"token"],[93,15,48,11],[93,18,48,14,"tokenData"],[93,27,48,23],[93,28,48,24,"data"],[93,32,48,28],[94,10,49,6,"console"],[94,17,49,13],[94,18,49,14,"log"],[94,21,49,17],[94,22,49,18],[94,35,49,31],[94,37,49,33,"token"],[94,42,49,38],[94,43,49,39],[95,8,50,4],[95,9,50,5],[95,10,50,6],[95,17,50,13,"error"],[95,22,50,18],[95,24,50,20],[96,10,51,6,"console"],[96,17,51,13],[96,18,51,14,"error"],[96,23,51,19],[96,24,51,20],[96,51,51,47],[96,53,51,49,"error"],[96,58,51,54],[96,59,51,55],[97,8,52,4],[98,6,53,2],[98,7,53,3],[98,13,53,9],[99,8,54,4,"console"],[99,15,54,11],[99,16,54,12,"log"],[99,19,54,15],[99,20,54,16],[99,69,54,65],[99,70,54,66],[100,6,55,2],[101,6,57,2],[101,13,57,9,"token"],[101,18,57,14],[102,4,58,0],[102,5,58,1],[103,4,58,1],[103,11,58,1,"_registerForPushNotificationsAsync"],[103,45,58,1],[103,46,58,1,"apply"],[103,51,58,1],[103,58,58,1,"arguments"],[103,67,58,1],[104,2,58,1],[105,2,58,1],[105,11,63,22,"sendPushTokenToBackend"],[105,33,63,44,"sendPushTokenToBackend"],[105,34,63,44,"_x"],[105,36,63,44],[106,4,63,44],[106,11,63,44,"_sendPushTokenToBackend"],[106,34,63,44],[106,35,63,44,"apply"],[106,40,63,44],[106,47,63,44,"arguments"],[106,56,63,44],[107,2,63,44],[108,2,74,0],[109,0,75,0],[110,0,76,0],[111,2,74,0],[111,11,74,0,"_sendPushTokenToBackend"],[111,35,74,0],[112,4,74,0,"_sendPushTokenToBackend"],[112,27,74,0],[112,34,74,0,"_asyncToGenerator"],[112,51,74,0],[112,52,74,0,"default"],[112,59,74,0],[112,61,63,7],[112,72,63,45,"token"],[112,77,63,58],[112,79,63,78],[113,6,64,2],[113,10,64,6],[114,8,65,4],[114,14,65,10,"api"],[114,17,65,13],[114,18,65,13,"default"],[114,25,65,13],[114,26,65,14,"post"],[114,30,65,18],[114,31,65,19],[114,60,65,48],[114,62,65,50],[115,10,65,52,"token"],[116,8,65,58],[116,9,65,59],[116,10,65,60],[117,8,66,4,"console"],[117,15,66,11],[117,16,66,12,"log"],[117,19,66,15],[117,20,66,16],[117,56,66,52],[117,57,66,53],[118,8,67,4],[118,15,67,11],[118,19,67,15],[119,6,68,2],[119,7,68,3],[119,8,68,4],[119,15,68,11,"error"],[119,20,68,16],[119,22,68,18],[120,8,69,4,"console"],[120,15,69,11],[120,16,69,12,"error"],[120,21,69,17],[120,22,69,18],[120,67,69,63],[120,69,69,65,"error"],[120,74,69,70],[120,75,69,71],[121,8,70,4],[121,15,70,11],[121,20,70,16],[122,6,71,2],[123,4,72,0],[123,5,72,1],[124,4,72,1],[124,11,72,1,"_sendPushTokenToBackend"],[124,34,72,1],[124,35,72,1,"apply"],[124,40,72,1],[124,47,72,1,"arguments"],[124,56,72,1],[125,2,72,1],[126,2,72,1],[126,11,77,22,"updateNotificationPreferences"],[126,40,77,51,"updateNotificationPreferences"],[126,41,77,51,"_x2"],[126,44,77,51],[127,4,77,51],[127,11,77,51,"_updateNotificationPreferences"],[127,41,77,51],[127,42,77,51,"apply"],[127,47,77,51],[127,54,77,51,"arguments"],[127,63,77,51],[128,2,77,51],[129,2,93,0],[130,0,94,0],[131,0,95,0],[132,2,93,0],[132,11,93,0,"_updateNotificationPreferences"],[132,42,93,0],[133,4,93,0,"_updateNotificationPreferences"],[133,34,93,0],[133,41,93,0,"_asyncToGenerator"],[133,58,93,0],[133,59,93,0,"default"],[133,66,93,0],[133,68,77,7],[133,79,77,52,"preferences"],[133,90,82,1],[133,92,82,21],[134,6,83,2],[134,10,83,6],[135,8,84,4],[135,14,84,10,"api"],[135,17,84,13],[135,18,84,13,"default"],[135,25,84,13],[135,26,84,14,"put"],[135,29,84,17],[135,30,84,18],[135,62,84,50],[135,64,84,52,"preferences"],[135,75,84,63],[135,76,84,64],[136,8,85,4,"console"],[136,15,85,11],[136,16,85,12,"log"],[136,19,85,15],[136,20,85,16],[136,54,85,50],[136,55,85,51],[137,8,86,4],[137,15,86,11],[137,19,86,15],[138,6,87,2],[138,7,87,3],[138,8,87,4],[138,15,87,11,"error"],[138,20,87,16],[138,22,87,18],[139,8,88,4,"console"],[139,15,88,11],[139,16,88,12,"error"],[139,21,88,17],[139,22,88,18],[139,66,88,62],[139,68,88,64,"error"],[139,73,88,69],[139,74,88,70],[140,8,89,4],[140,15,89,11],[140,20,89,16],[141,6,90,2],[142,4,91,0],[142,5,91,1],[143,4,91,1],[143,11,91,1,"_updateNotificationPreferences"],[143,41,91,1],[143,42,91,1,"apply"],[143,47,91,1],[143,54,91,1,"arguments"],[143,63,91,1],[144,2,91,1],[145,2,91,1],[145,11,96,22,"removePushTokenFromBackend"],[145,37,96,48,"removePushTokenFromBackend"],[145,38,96,48],[146,4,96,48],[146,11,96,48,"_removePushTokenFromBackend"],[146,38,96,48],[146,39,96,48,"apply"],[146,44,96,48],[146,51,96,48,"arguments"],[146,60,96,48],[147,2,96,48],[148,2,96,48],[148,11,96,48,"_removePushTokenFromBackend"],[148,39,96,48],[149,4,96,48,"_removePushTokenFromBackend"],[149,31,96,48],[149,38,96,48,"_asyncToGenerator"],[149,55,96,48],[149,56,96,48,"default"],[149,63,96,48],[149,65,96,7],[149,78,96,69],[150,6,97,2],[150,10,97,6],[151,8,98,4],[151,14,98,10,"api"],[151,17,98,13],[151,18,98,13,"default"],[151,25,98,13],[151,26,98,14,"delete"],[151,32,98,20],[151,33,98,21],[151,64,98,52],[151,65,98,53],[152,8,99,4,"console"],[152,15,99,11],[152,16,99,12,"log"],[152,19,99,15],[152,20,99,16],[152,53,99,49],[152,54,99,50],[153,8,100,4],[153,15,100,11],[153,19,100,15],[154,6,101,2],[154,7,101,3],[154,8,101,4],[154,15,101,11,"error"],[154,20,101,16],[154,22,101,18],[155,8,102,4,"console"],[155,15,102,11],[155,16,102,12,"error"],[155,21,102,17],[155,22,102,18],[155,65,102,61],[155,67,102,63,"error"],[155,72,102,68],[155,73,102,69],[156,8,103,4],[156,15,103,11],[156,20,103,16],[157,6,104,2],[158,4,105,0],[158,5,105,1],[159,4,105,1],[159,11,105,1,"_removePushTokenFromBackend"],[159,38,105,1],[159,39,105,1,"apply"],[159,44,105,1],[159,51,105,1,"arguments"],[159,60,105,1],[160,2,105,1],[161,0,105,1],[161,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","sendPushTokenToBackend","updateNotificationPreferences","removePushTokenFromBackend"],"mappings":"AAA;sBCO;IDI;OEM;CFwC;OGK;CHS;OIK;CJc;OKK;CLS"},"hasCjsExports":false},"type":"js/module"}]}
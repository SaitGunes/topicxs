{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/clearCache","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":52,"index":183}}],"key":"V3KNYr0/rs2EUk905GBiQx9TVL8=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":110,"column":53,"index":3222},"end":{"line":110,"column":85,"index":3254}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":110,"column":47,"index":3216},"end":{"line":110,"column":85,"index":3254}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsClearCache = require(_dependencyMap[3], \"../utils/clearCache\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear all cache including Expo cache\n        await (0, _utilsClearCache.clearAllCache)();\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful - all cache cleared');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":133,"map":[[12,2,44,0,"Object"],[12,8,44,0],[12,9,44,0,"defineProperty"],[12,23,44,0],[12,24,44,0,"exports"],[12,31,44,0],[13,4,44,0,"enumerable"],[13,14,44,0],[14,4,44,0,"get"],[14,7,44,0],[14,18,44,0,"get"],[14,19,44,0],[15,6,44,0],[15,13,44,0,"useAuthStore"],[15,25,44,0],[16,4,44,0],[17,2,44,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,4,0],[23,6,4,0,"_utilsClearCache"],[23,22,4,0],[23,25,4,0,"require"],[23,32,4,0],[23,33,4,0,"_dependencyMap"],[23,47,4,0],[24,2,6,0],[24,8,6,6,"API_URL"],[24,15,6,13],[24,18,6,16,"process"],[24,25,6,23],[24,26,6,24,"env"],[24,29,6,27],[24,30,6,28,"EXPO_PUBLIC_BACKEND_URL"],[24,53,6,51],[25,2,44,7],[25,8,44,13,"useAuthStore"],[25,20,44,25],[25,23,44,28],[25,27,44,28,"create"],[25,35,44,34],[25,36,44,34,"create"],[25,42,44,34],[25,44,44,47,"set"],[25,47,44,50],[25,52,44,56],[26,4,45,2,"user"],[26,8,45,6],[26,10,45,8],[26,14,45,12],[27,4,46,2,"token"],[27,9,46,7],[27,11,46,9],[27,15,46,13],[28,4,47,2,"isLoading"],[28,13,47,11],[28,15,47,13],[28,19,47,17],[29,4,49,2,"loadToken"],[29,13,49,11],[29,15,49,13],[29,21,49,13,"loadToken"],[29,22,49,13],[29,27,49,25],[30,6,50,4],[30,10,50,8],[31,8,51,6],[31,14,51,12,"token"],[31,19,51,17],[31,22,51,20],[31,28,51,26,"AsyncStorage"],[31,40,51,38],[31,41,51,38,"default"],[31,48,51,38],[31,49,51,39,"getItem"],[31,56,51,46],[31,57,51,47],[31,64,51,54],[31,65,51,55],[32,8,52,6],[32,14,52,12,"userData"],[32,22,52,20],[32,25,52,23],[32,31,52,29,"AsyncStorage"],[32,43,52,41],[32,44,52,41,"default"],[32,51,52,41],[32,52,52,42,"getItem"],[32,59,52,49],[32,60,52,50],[32,66,52,56],[32,67,52,57],[33,8,54,6],[33,12,54,10,"token"],[33,17,54,15],[33,21,54,19,"userData"],[33,29,54,27],[33,31,54,29],[34,10,55,8,"set"],[34,13,55,11],[34,14,55,12],[35,12,55,14,"token"],[35,17,55,19],[36,12,55,21,"user"],[36,16,55,25],[36,18,55,27,"JSON"],[36,22,55,31],[36,23,55,32,"parse"],[36,28,55,37],[36,29,55,38,"userData"],[36,37,55,46],[36,38,55,47],[37,12,55,49,"isLoading"],[37,21,55,58],[37,23,55,60],[38,10,55,66],[38,11,55,67],[38,12,55,68],[39,8,56,6],[39,9,56,7],[39,15,56,13],[40,10,57,8,"set"],[40,13,57,11],[40,14,57,12],[41,12,57,14,"isLoading"],[41,21,57,23],[41,23,57,25],[42,10,57,31],[42,11,57,32],[42,12,57,33],[43,8,58,6],[44,6,59,4],[44,7,59,5],[44,8,59,6],[44,15,59,13,"error"],[44,20,59,18],[44,22,59,20],[45,8,60,6,"console"],[45,15,60,13],[45,16,60,14,"error"],[45,21,60,19],[45,22,60,20],[45,41,60,39],[45,43,60,41,"error"],[45,48,60,46],[45,49,60,47],[46,8,61,6,"set"],[46,11,61,9],[46,12,61,10],[47,10,61,12,"isLoading"],[47,19,61,21],[47,21,61,23],[48,8,61,29],[48,9,61,30],[48,10,61,31],[49,6,62,4],[50,4,63,2],[50,5,63,3],[51,4,65,2,"login"],[51,9,65,7],[51,11,65,9],[51,17,65,9,"login"],[51,18,65,16,"username"],[51,26,65,32],[51,28,65,34,"password"],[51,36,65,50],[51,41,65,55],[52,6,66,4],[52,10,66,8],[53,8,67,6],[53,14,67,12,"response"],[53,22,67,20],[53,25,67,23],[53,31,67,29,"axios"],[53,36,67,34],[53,37,67,34,"default"],[53,44,67,34],[53,45,67,35,"post"],[53,49,67,39],[53,50,67,40],[53,53,67,43,"API_URL"],[53,60,67,50],[53,77,67,67],[53,79,67,69],[54,10,68,8,"username"],[54,18,68,16],[55,10,69,8,"password"],[56,8,70,6],[56,9,70,7],[56,10,70,8],[57,8,72,6],[57,14,72,12],[58,10,72,14,"access_token"],[58,22,72,26],[59,10,72,28,"user"],[60,8,72,33],[60,9,72,34],[60,12,72,37,"response"],[60,20,72,45],[60,21,72,46,"data"],[60,25,72,50],[61,8,74,6],[61,14,74,12,"AsyncStorage"],[61,26,74,24],[61,27,74,24,"default"],[61,34,74,24],[61,35,74,25,"setItem"],[61,42,74,32],[61,43,74,33],[61,50,74,40],[61,52,74,42,"access_token"],[61,64,74,54],[61,65,74,55],[62,8,75,6],[62,14,75,12,"AsyncStorage"],[62,26,75,24],[62,27,75,24,"default"],[62,34,75,24],[62,35,75,25,"setItem"],[62,42,75,32],[62,43,75,33],[62,49,75,39],[62,51,75,41,"JSON"],[62,55,75,45],[62,56,75,46,"stringify"],[62,65,75,55],[62,66,75,56,"user"],[62,70,75,60],[62,71,75,61],[62,72,75,62],[63,8,77,6,"set"],[63,11,77,9],[63,12,77,10],[64,10,77,12,"user"],[64,14,77,16],[65,10,77,18,"token"],[65,15,77,23],[65,17,77,25,"access_token"],[66,8,77,38],[66,9,77,39],[66,10,77,40],[67,6,78,4],[67,7,78,5],[67,8,78,6],[67,15,78,13,"error"],[67,20,78,23],[67,22,78,25],[68,8,79,6],[68,14,79,12],[68,18,79,16,"Error"],[68,23,79,21],[68,24,79,22,"error"],[68,29,79,27],[68,30,79,28,"response"],[68,38,79,36],[68,40,79,38,"data"],[68,44,79,42],[68,46,79,44,"detail"],[68,52,79,50],[68,56,79,54],[68,70,79,68],[68,71,79,69],[69,6,80,4],[70,4,81,2],[70,5,81,3],[71,4,83,2,"register"],[71,12,83,10],[71,14,83,12],[71,20,83,12,"register"],[71,21,83,19,"username"],[71,29,83,35],[71,31,83,37,"email"],[71,36,83,50],[71,38,83,52,"password"],[71,46,83,68],[71,48,83,70,"full_name"],[71,57,83,87],[71,59,83,89,"referral_code"],[71,72,83,111],[71,74,83,113,"user_type"],[71,83,83,131],[71,85,83,133,"phone_number"],[71,97,83,154],[71,102,83,159],[72,6,84,4],[72,10,84,8],[73,8,85,6],[73,14,85,12,"response"],[73,22,85,20],[73,25,85,23],[73,31,85,29,"axios"],[73,36,85,34],[73,37,85,34,"default"],[73,44,85,34],[73,45,85,35,"post"],[73,49,85,39],[73,50,85,40],[73,53,85,43,"API_URL"],[73,60,85,50],[73,80,85,70],[73,82,85,72],[74,10,86,8,"username"],[74,18,86,16],[75,10,87,8,"email"],[75,15,87,13],[76,10,88,8,"password"],[76,18,88,16],[77,10,89,8,"full_name"],[77,19,89,17],[78,10,90,8,"referral_code"],[78,23,90,21],[78,25,90,23,"referral_code"],[78,38,90,36],[78,42,90,40,"undefined"],[78,51,90,49],[79,10,91,8,"user_type"],[79,19,91,17],[79,21,91,19,"user_type"],[79,30,91,28],[79,34,91,32],[79,42,91,40],[80,10,92,8,"phone_number"],[80,22,92,20],[80,24,92,22,"phone_number"],[80,36,92,34],[80,40,92,38,"undefined"],[81,8,93,6],[81,9,93,7],[81,10,93,8],[82,8,95,6],[82,14,95,12],[83,10,95,14,"access_token"],[83,22,95,26],[84,10,95,28,"user"],[85,8,95,33],[85,9,95,34],[85,12,95,37,"response"],[85,20,95,45],[85,21,95,46,"data"],[85,25,95,50],[86,8,97,6],[86,14,97,12,"AsyncStorage"],[86,26,97,24],[86,27,97,24,"default"],[86,34,97,24],[86,35,97,25,"setItem"],[86,42,97,32],[86,43,97,33],[86,50,97,40],[86,52,97,42,"access_token"],[86,64,97,54],[86,65,97,55],[87,8,98,6],[87,14,98,12,"AsyncStorage"],[87,26,98,24],[87,27,98,24,"default"],[87,34,98,24],[87,35,98,25,"setItem"],[87,42,98,32],[87,43,98,33],[87,49,98,39],[87,51,98,41,"JSON"],[87,55,98,45],[87,56,98,46,"stringify"],[87,65,98,55],[87,66,98,56,"user"],[87,70,98,60],[87,71,98,61],[87,72,98,62],[88,8,100,6,"set"],[88,11,100,9],[88,12,100,10],[89,10,100,12,"user"],[89,14,100,16],[90,10,100,18,"token"],[90,15,100,23],[90,17,100,25,"access_token"],[91,8,100,38],[91,9,100,39],[91,10,100,40],[92,6,101,4],[92,7,101,5],[92,8,101,6],[92,15,101,13,"error"],[92,20,101,23],[92,22,101,25],[93,8,102,6],[93,14,102,12],[93,18,102,16,"Error"],[93,23,102,21],[93,24,102,22,"error"],[93,29,102,27],[93,30,102,28,"response"],[93,38,102,36],[93,40,102,38,"data"],[93,44,102,42],[93,46,102,44,"detail"],[93,52,102,50],[93,56,102,54],[93,77,102,75],[93,78,102,76],[94,6,103,4],[95,4,104,2],[95,5,104,3],[96,4,106,2,"logout"],[96,10,106,8],[96,12,106,10],[96,18,106,10,"logout"],[96,19,106,10],[96,24,106,22],[97,6,107,4],[97,10,107,8],[98,8,108,6],[99,8,109,6],[99,12,109,10],[100,10,110,8],[100,16,110,14],[101,12,110,16,"removePushTokenFromBackend"],[102,10,110,43],[102,11,110,44],[102,14,110,47],[102,20,110,47,"require"],[102,27,110,47],[102,28,110,47,"_dependencyMap"],[102,42,110,47],[102,85,110,47,"_dependencyMap"],[102,99,110,47],[102,104,110,47,"_dependencyMap"],[102,118,110,47],[102,119,110,47,"paths"],[102,124,110,47],[102,151,110,85],[103,10,111,8],[103,16,111,14,"removePushTokenFromBackend"],[103,42,111,40],[103,43,111,41],[103,44,111,42],[104,8,112,6],[104,9,112,7],[104,10,112,8],[104,17,112,15,"error"],[104,22,112,20],[104,24,112,22],[105,10,113,8,"console"],[105,17,113,15],[105,18,113,16,"error"],[105,23,113,21],[105,24,113,22],[105,52,113,50],[105,54,113,52,"error"],[105,59,113,57],[105,60,113,58],[106,8,114,6],[108,8,116,6],[109,8,117,6],[109,14,117,12],[109,18,117,12,"clearAllCache"],[109,34,117,25],[109,35,117,25,"clearAllCache"],[109,48,117,25],[109,50,117,26],[109,51,117,27],[111,8,119,6],[112,8,120,6,"set"],[112,11,120,9],[112,12,120,10],[113,10,120,12,"user"],[113,14,120,16],[113,16,120,18],[113,20,120,22],[114,10,120,24,"token"],[114,15,120,29],[114,17,120,31],[114,21,120,35],[115,10,120,37,"isLoading"],[115,19,120,46],[115,21,120,48],[116,8,120,54],[116,9,120,55],[116,10,120,56],[117,8,122,6,"console"],[117,15,122,13],[117,16,122,14,"log"],[117,19,122,17],[117,20,122,18],[117,59,122,57],[117,60,122,58],[118,6,123,4],[118,7,123,5],[118,8,123,6],[118,15,123,13,"error"],[118,20,123,18],[118,22,123,20],[119,8,124,6,"console"],[119,15,124,13],[119,16,124,14,"error"],[119,21,124,19],[119,22,124,20],[119,37,124,35],[119,39,124,37,"error"],[119,44,124,42],[119,45,124,43],[120,6,125,4],[121,4,126,2],[121,5,126,3],[122,4,128,2,"setUser"],[122,11,128,9],[122,13,128,11],[122,19,128,18,"user"],[122,23,128,28],[122,27,128,33],[123,6,129,4],[123,10,129,8],[124,8,130,6],[124,14,130,12,"AsyncStorage"],[124,26,130,24],[124,27,130,24,"default"],[124,34,130,24],[124,35,130,25,"setItem"],[124,42,130,32],[124,43,130,33],[124,49,130,39],[124,51,130,41,"JSON"],[124,55,130,45],[124,56,130,46,"stringify"],[124,65,130,55],[124,66,130,56,"user"],[124,70,130,60],[124,71,130,61],[124,72,130,62],[125,8,131,6,"set"],[125,11,131,9],[125,12,131,10],[126,10,131,12,"user"],[127,8,131,17],[127,9,131,18],[127,10,131,19],[128,6,132,4],[128,7,132,5],[128,8,132,6],[128,15,132,13,"error"],[128,20,132,18],[128,22,132,20],[129,8,133,6,"console"],[129,15,133,13],[129,16,133,14,"error"],[129,21,133,19],[129,22,133,20],[129,39,133,37],[129,41,133,39,"error"],[129,46,133,44],[129,47,133,45],[130,6,134,4],[131,4,135,2],[132,2,136,0],[132,3,136,1],[132,4,136,2],[132,5,136,3],[133,0,136,4],[133,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC2C;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJoB;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
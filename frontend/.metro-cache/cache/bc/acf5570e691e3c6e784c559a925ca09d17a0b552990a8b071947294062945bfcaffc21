{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/clearCache","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":52,"index":183}}],"key":"V3KNYr0/rs2EUk905GBiQx9TVL8=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":111,"column":53,"index":3307},"end":{"line":111,"column":85,"index":3339}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":111,"column":47,"index":3301},"end":{"line":111,"column":85,"index":3339}},{"start":{"line":119,"column":35,"index":3563},"end":{"line":119,"column":64,"index":3592}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":2}},{"name":"./sectorStore","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":119,"column":41,"index":3569},"end":{"line":119,"column":64,"index":3592}}],"key":"VqOdxAU6K3p132ZZWc8ahloag9E=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsClearCache = require(_dependencyMap[3], \"../utils/clearCache\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password, current_sector = 'drivers') => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password,\n          current_sector\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear sector selection\n        try {\n          const {\n            useSectorStore\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[6], _dependencyMap.paths, \"./sectorStore\");\n          await useSectorStore.getState().clearSector();\n        } catch (error) {\n          console.error('Error clearing sector:', error);\n        }\n\n        // Clear all cache including Expo cache\n        await (0, _utilsClearCache.clearAllCache)();\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful - all cache cleared');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":144,"map":[[12,2,44,0,"Object"],[12,8,44,0],[12,9,44,0,"defineProperty"],[12,23,44,0],[12,24,44,0,"exports"],[12,31,44,0],[13,4,44,0,"enumerable"],[13,14,44,0],[14,4,44,0,"get"],[14,7,44,0],[14,18,44,0,"get"],[14,19,44,0],[15,6,44,0],[15,13,44,0,"useAuthStore"],[15,25,44,0],[16,4,44,0],[17,2,44,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,4,0],[23,6,4,0,"_utilsClearCache"],[23,22,4,0],[23,25,4,0,"require"],[23,32,4,0],[23,33,4,0,"_dependencyMap"],[23,47,4,0],[24,2,6,0],[24,8,6,6,"API_URL"],[24,15,6,13],[24,18,6,16,"process"],[24,25,6,23],[24,26,6,24,"env"],[24,29,6,27],[24,30,6,28,"EXPO_PUBLIC_BACKEND_URL"],[24,53,6,51],[25,2,44,7],[25,8,44,13,"useAuthStore"],[25,20,44,25],[25,23,44,28],[25,27,44,28,"create"],[25,35,44,34],[25,36,44,34,"create"],[25,42,44,34],[25,44,44,47,"set"],[25,47,44,50],[25,52,44,56],[26,4,45,2,"user"],[26,8,45,6],[26,10,45,8],[26,14,45,12],[27,4,46,2,"token"],[27,9,46,7],[27,11,46,9],[27,15,46,13],[28,4,47,2,"isLoading"],[28,13,47,11],[28,15,47,13],[28,19,47,17],[29,4,49,2,"loadToken"],[29,13,49,11],[29,15,49,13],[29,21,49,13,"loadToken"],[29,22,49,13],[29,27,49,25],[30,6,50,4],[30,10,50,8],[31,8,51,6],[31,14,51,12,"token"],[31,19,51,17],[31,22,51,20],[31,28,51,26,"AsyncStorage"],[31,40,51,38],[31,41,51,38,"default"],[31,48,51,38],[31,49,51,39,"getItem"],[31,56,51,46],[31,57,51,47],[31,64,51,54],[31,65,51,55],[32,8,52,6],[32,14,52,12,"userData"],[32,22,52,20],[32,25,52,23],[32,31,52,29,"AsyncStorage"],[32,43,52,41],[32,44,52,41,"default"],[32,51,52,41],[32,52,52,42,"getItem"],[32,59,52,49],[32,60,52,50],[32,66,52,56],[32,67,52,57],[33,8,54,6],[33,12,54,10,"token"],[33,17,54,15],[33,21,54,19,"userData"],[33,29,54,27],[33,31,54,29],[34,10,55,8,"set"],[34,13,55,11],[34,14,55,12],[35,12,55,14,"token"],[35,17,55,19],[36,12,55,21,"user"],[36,16,55,25],[36,18,55,27,"JSON"],[36,22,55,31],[36,23,55,32,"parse"],[36,28,55,37],[36,29,55,38,"userData"],[36,37,55,46],[36,38,55,47],[37,12,55,49,"isLoading"],[37,21,55,58],[37,23,55,60],[38,10,55,66],[38,11,55,67],[38,12,55,68],[39,8,56,6],[39,9,56,7],[39,15,56,13],[40,10,57,8,"set"],[40,13,57,11],[40,14,57,12],[41,12,57,14,"isLoading"],[41,21,57,23],[41,23,57,25],[42,10,57,31],[42,11,57,32],[42,12,57,33],[43,8,58,6],[44,6,59,4],[44,7,59,5],[44,8,59,6],[44,15,59,13,"error"],[44,20,59,18],[44,22,59,20],[45,8,60,6,"console"],[45,15,60,13],[45,16,60,14,"error"],[45,21,60,19],[45,22,60,20],[45,41,60,39],[45,43,60,41,"error"],[45,48,60,46],[45,49,60,47],[46,8,61,6,"set"],[46,11,61,9],[46,12,61,10],[47,10,61,12,"isLoading"],[47,19,61,21],[47,21,61,23],[48,8,61,29],[48,9,61,30],[48,10,61,31],[49,6,62,4],[50,4,63,2],[50,5,63,3],[51,4,65,2,"login"],[51,9,65,7],[51,11,65,9],[51,17,65,9,"login"],[51,18,65,16,"username"],[51,26,65,32],[51,28,65,34,"password"],[51,36,65,50],[51,38,65,52,"current_sector"],[51,52,65,74],[51,55,65,77],[51,64,65,86],[51,69,65,91],[52,6,66,4],[52,10,66,8],[53,8,67,6],[53,14,67,12,"response"],[53,22,67,20],[53,25,67,23],[53,31,67,29,"axios"],[53,36,67,34],[53,37,67,34,"default"],[53,44,67,34],[53,45,67,35,"post"],[53,49,67,39],[53,50,67,40],[53,53,67,43,"API_URL"],[53,60,67,50],[53,77,67,67],[53,79,67,69],[54,10,68,8,"username"],[54,18,68,16],[55,10,69,8,"password"],[55,18,69,16],[56,10,70,8,"current_sector"],[57,8,71,6],[57,9,71,7],[57,10,71,8],[58,8,73,6],[58,14,73,12],[59,10,73,14,"access_token"],[59,22,73,26],[60,10,73,28,"user"],[61,8,73,33],[61,9,73,34],[61,12,73,37,"response"],[61,20,73,45],[61,21,73,46,"data"],[61,25,73,50],[62,8,75,6],[62,14,75,12,"AsyncStorage"],[62,26,75,24],[62,27,75,24,"default"],[62,34,75,24],[62,35,75,25,"setItem"],[62,42,75,32],[62,43,75,33],[62,50,75,40],[62,52,75,42,"access_token"],[62,64,75,54],[62,65,75,55],[63,8,76,6],[63,14,76,12,"AsyncStorage"],[63,26,76,24],[63,27,76,24,"default"],[63,34,76,24],[63,35,76,25,"setItem"],[63,42,76,32],[63,43,76,33],[63,49,76,39],[63,51,76,41,"JSON"],[63,55,76,45],[63,56,76,46,"stringify"],[63,65,76,55],[63,66,76,56,"user"],[63,70,76,60],[63,71,76,61],[63,72,76,62],[64,8,78,6,"set"],[64,11,78,9],[64,12,78,10],[65,10,78,12,"user"],[65,14,78,16],[66,10,78,18,"token"],[66,15,78,23],[66,17,78,25,"access_token"],[67,8,78,38],[67,9,78,39],[67,10,78,40],[68,6,79,4],[68,7,79,5],[68,8,79,6],[68,15,79,13,"error"],[68,20,79,23],[68,22,79,25],[69,8,80,6],[69,14,80,12],[69,18,80,16,"Error"],[69,23,80,21],[69,24,80,22,"error"],[69,29,80,27],[69,30,80,28,"response"],[69,38,80,36],[69,40,80,38,"data"],[69,44,80,42],[69,46,80,44,"detail"],[69,52,80,50],[69,56,80,54],[69,70,80,68],[69,71,80,69],[70,6,81,4],[71,4,82,2],[71,5,82,3],[72,4,84,2,"register"],[72,12,84,10],[72,14,84,12],[72,20,84,12,"register"],[72,21,84,19,"username"],[72,29,84,35],[72,31,84,37,"email"],[72,36,84,50],[72,38,84,52,"password"],[72,46,84,68],[72,48,84,70,"full_name"],[72,57,84,87],[72,59,84,89,"referral_code"],[72,72,84,111],[72,74,84,113,"user_type"],[72,83,84,131],[72,85,84,133,"phone_number"],[72,97,84,154],[72,102,84,159],[73,6,85,4],[73,10,85,8],[74,8,86,6],[74,14,86,12,"response"],[74,22,86,20],[74,25,86,23],[74,31,86,29,"axios"],[74,36,86,34],[74,37,86,34,"default"],[74,44,86,34],[74,45,86,35,"post"],[74,49,86,39],[74,50,86,40],[74,53,86,43,"API_URL"],[74,60,86,50],[74,80,86,70],[74,82,86,72],[75,10,87,8,"username"],[75,18,87,16],[76,10,88,8,"email"],[76,15,88,13],[77,10,89,8,"password"],[77,18,89,16],[78,10,90,8,"full_name"],[78,19,90,17],[79,10,91,8,"referral_code"],[79,23,91,21],[79,25,91,23,"referral_code"],[79,38,91,36],[79,42,91,40,"undefined"],[79,51,91,49],[80,10,92,8,"user_type"],[80,19,92,17],[80,21,92,19,"user_type"],[80,30,92,28],[80,34,92,32],[80,42,92,40],[81,10,93,8,"phone_number"],[81,22,93,20],[81,24,93,22,"phone_number"],[81,36,93,34],[81,40,93,38,"undefined"],[82,8,94,6],[82,9,94,7],[82,10,94,8],[83,8,96,6],[83,14,96,12],[84,10,96,14,"access_token"],[84,22,96,26],[85,10,96,28,"user"],[86,8,96,33],[86,9,96,34],[86,12,96,37,"response"],[86,20,96,45],[86,21,96,46,"data"],[86,25,96,50],[87,8,98,6],[87,14,98,12,"AsyncStorage"],[87,26,98,24],[87,27,98,24,"default"],[87,34,98,24],[87,35,98,25,"setItem"],[87,42,98,32],[87,43,98,33],[87,50,98,40],[87,52,98,42,"access_token"],[87,64,98,54],[87,65,98,55],[88,8,99,6],[88,14,99,12,"AsyncStorage"],[88,26,99,24],[88,27,99,24,"default"],[88,34,99,24],[88,35,99,25,"setItem"],[88,42,99,32],[88,43,99,33],[88,49,99,39],[88,51,99,41,"JSON"],[88,55,99,45],[88,56,99,46,"stringify"],[88,65,99,55],[88,66,99,56,"user"],[88,70,99,60],[88,71,99,61],[88,72,99,62],[89,8,101,6,"set"],[89,11,101,9],[89,12,101,10],[90,10,101,12,"user"],[90,14,101,16],[91,10,101,18,"token"],[91,15,101,23],[91,17,101,25,"access_token"],[92,8,101,38],[92,9,101,39],[92,10,101,40],[93,6,102,4],[93,7,102,5],[93,8,102,6],[93,15,102,13,"error"],[93,20,102,23],[93,22,102,25],[94,8,103,6],[94,14,103,12],[94,18,103,16,"Error"],[94,23,103,21],[94,24,103,22,"error"],[94,29,103,27],[94,30,103,28,"response"],[94,38,103,36],[94,40,103,38,"data"],[94,44,103,42],[94,46,103,44,"detail"],[94,52,103,50],[94,56,103,54],[94,77,103,75],[94,78,103,76],[95,6,104,4],[96,4,105,2],[96,5,105,3],[97,4,107,2,"logout"],[97,10,107,8],[97,12,107,10],[97,18,107,10,"logout"],[97,19,107,10],[97,24,107,22],[98,6,108,4],[98,10,108,8],[99,8,109,6],[100,8,110,6],[100,12,110,10],[101,10,111,8],[101,16,111,14],[102,12,111,16,"removePushTokenFromBackend"],[103,10,111,43],[103,11,111,44],[103,14,111,47],[103,20,111,47,"require"],[103,27,111,47],[103,28,111,47,"_dependencyMap"],[103,42,111,47],[103,85,111,47,"_dependencyMap"],[103,99,111,47],[103,104,111,47,"_dependencyMap"],[103,118,111,47],[103,119,111,47,"paths"],[103,124,111,47],[103,151,111,85],[104,10,112,8],[104,16,112,14,"removePushTokenFromBackend"],[104,42,112,40],[104,43,112,41],[104,44,112,42],[105,8,113,6],[105,9,113,7],[105,10,113,8],[105,17,113,15,"error"],[105,22,113,20],[105,24,113,22],[106,10,114,8,"console"],[106,17,114,15],[106,18,114,16,"error"],[106,23,114,21],[106,24,114,22],[106,52,114,50],[106,54,114,52,"error"],[106,59,114,57],[106,60,114,58],[107,8,115,6],[109,8,117,6],[110,8,118,6],[110,12,118,10],[111,10,119,8],[111,16,119,14],[112,12,119,16,"useSectorStore"],[113,10,119,31],[113,11,119,32],[113,14,119,35],[113,20,119,35,"require"],[113,27,119,35],[113,28,119,35,"_dependencyMap"],[113,42,119,35],[113,85,119,35,"_dependencyMap"],[113,99,119,35],[113,104,119,35,"_dependencyMap"],[113,118,119,35],[113,119,119,35,"paths"],[113,124,119,35],[113,142,119,64],[114,10,120,8],[114,16,120,14,"useSectorStore"],[114,30,120,28],[114,31,120,29,"getState"],[114,39,120,37],[114,40,120,38],[114,41,120,39],[114,42,120,40,"clearSector"],[114,53,120,51],[114,54,120,52],[114,55,120,53],[115,8,121,6],[115,9,121,7],[115,10,121,8],[115,17,121,15,"error"],[115,22,121,20],[115,24,121,22],[116,10,122,8,"console"],[116,17,122,15],[116,18,122,16,"error"],[116,23,122,21],[116,24,122,22],[116,48,122,46],[116,50,122,48,"error"],[116,55,122,53],[116,56,122,54],[117,8,123,6],[119,8,125,6],[120,8,126,6],[120,14,126,12],[120,18,126,12,"clearAllCache"],[120,34,126,25],[120,35,126,25,"clearAllCache"],[120,48,126,25],[120,50,126,26],[120,51,126,27],[122,8,128,6],[123,8,129,6,"set"],[123,11,129,9],[123,12,129,10],[124,10,129,12,"user"],[124,14,129,16],[124,16,129,18],[124,20,129,22],[125,10,129,24,"token"],[125,15,129,29],[125,17,129,31],[125,21,129,35],[126,10,129,37,"isLoading"],[126,19,129,46],[126,21,129,48],[127,8,129,54],[127,9,129,55],[127,10,129,56],[128,8,131,6,"console"],[128,15,131,13],[128,16,131,14,"log"],[128,19,131,17],[128,20,131,18],[128,59,131,57],[128,60,131,58],[129,6,132,4],[129,7,132,5],[129,8,132,6],[129,15,132,13,"error"],[129,20,132,18],[129,22,132,20],[130,8,133,6,"console"],[130,15,133,13],[130,16,133,14,"error"],[130,21,133,19],[130,22,133,20],[130,37,133,35],[130,39,133,37,"error"],[130,44,133,42],[130,45,133,43],[131,6,134,4],[132,4,135,2],[132,5,135,3],[133,4,137,2,"setUser"],[133,11,137,9],[133,13,137,11],[133,19,137,18,"user"],[133,23,137,28],[133,27,137,33],[134,6,138,4],[134,10,138,8],[135,8,139,6],[135,14,139,12,"AsyncStorage"],[135,26,139,24],[135,27,139,24,"default"],[135,34,139,24],[135,35,139,25,"setItem"],[135,42,139,32],[135,43,139,33],[135,49,139,39],[135,51,139,41,"JSON"],[135,55,139,45],[135,56,139,46,"stringify"],[135,65,139,55],[135,66,139,56,"user"],[135,70,139,60],[135,71,139,61],[135,72,139,62],[136,8,140,6,"set"],[136,11,140,9],[136,12,140,10],[137,10,140,12,"user"],[138,8,140,17],[138,9,140,18],[138,10,140,19],[139,6,141,4],[139,7,141,5],[139,8,141,6],[139,15,141,13,"error"],[139,20,141,18],[139,22,141,20],[140,8,142,6,"console"],[140,15,142,13],[140,16,142,14,"error"],[140,21,142,19],[140,22,142,20],[140,39,142,37],[140,41,142,39,"error"],[140,46,142,44],[140,47,142,45],[141,6,143,4],[142,4,144,2],[143,2,145,0],[143,3,145,1],[143,4,145,2],[143,5,145,3],[144,0,145,4],[144,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC2C;aCK;GDc;SEE;GFiB;YGE;GHqB;UIE;GJ4B;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
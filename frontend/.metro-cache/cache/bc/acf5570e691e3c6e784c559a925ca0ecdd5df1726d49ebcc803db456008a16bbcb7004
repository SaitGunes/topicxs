{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/clearCache","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":52,"index":183}}],"key":"V3KNYr0/rs2EUk905GBiQx9TVL8=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":118,"column":53,"index":3546},"end":{"line":118,"column":85,"index":3578}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":118,"column":47,"index":3540},"end":{"line":118,"column":85,"index":3578}},{"start":{"line":126,"column":35,"index":3802},"end":{"line":126,"column":64,"index":3831}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":2}},{"name":"./sectorStore","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":126,"column":41,"index":3808},"end":{"line":126,"column":64,"index":3831}}],"key":"VqOdxAU6K3p132ZZWc8ahloag9E=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsClearCache = require(_dependencyMap[3], \"../utils/clearCache\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password, current_sector = 'drivers') => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password,\n          current_sector\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear sector selection\n        try {\n          const {\n            useSectorStore\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[6], _dependencyMap.paths, \"./sectorStore\");\n          await useSectorStore.getState().clearSector();\n        } catch (error) {\n          console.error('Error clearing sector:', error);\n        }\n\n        // Clear all cache including Expo cache\n        await (0, _utilsClearCache.clearAllCache)();\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful - all cache cleared');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":144,"map":[[12,2,51,0,"Object"],[12,8,51,0],[12,9,51,0,"defineProperty"],[12,23,51,0],[12,24,51,0,"exports"],[12,31,51,0],[13,4,51,0,"enumerable"],[13,14,51,0],[14,4,51,0,"get"],[14,7,51,0],[14,18,51,0,"get"],[14,19,51,0],[15,6,51,0],[15,13,51,0,"useAuthStore"],[15,25,51,0],[16,4,51,0],[17,2,51,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,4,0],[23,6,4,0,"_utilsClearCache"],[23,22,4,0],[23,25,4,0,"require"],[23,32,4,0],[23,33,4,0,"_dependencyMap"],[23,47,4,0],[24,2,6,0],[24,8,6,6,"API_URL"],[24,15,6,13],[24,18,6,16,"process"],[24,25,6,23],[24,26,6,24,"env"],[24,29,6,27],[24,30,6,28,"EXPO_PUBLIC_BACKEND_URL"],[24,53,6,51],[25,2,51,7],[25,8,51,13,"useAuthStore"],[25,20,51,25],[25,23,51,28],[25,27,51,28,"create"],[25,35,51,34],[25,36,51,34,"create"],[25,42,51,34],[25,44,51,47,"set"],[25,47,51,50],[25,52,51,56],[26,4,52,2,"user"],[26,8,52,6],[26,10,52,8],[26,14,52,12],[27,4,53,2,"token"],[27,9,53,7],[27,11,53,9],[27,15,53,13],[28,4,54,2,"isLoading"],[28,13,54,11],[28,15,54,13],[28,19,54,17],[29,4,56,2,"loadToken"],[29,13,56,11],[29,15,56,13],[29,21,56,13,"loadToken"],[29,22,56,13],[29,27,56,25],[30,6,57,4],[30,10,57,8],[31,8,58,6],[31,14,58,12,"token"],[31,19,58,17],[31,22,58,20],[31,28,58,26,"AsyncStorage"],[31,40,58,38],[31,41,58,38,"default"],[31,48,58,38],[31,49,58,39,"getItem"],[31,56,58,46],[31,57,58,47],[31,64,58,54],[31,65,58,55],[32,8,59,6],[32,14,59,12,"userData"],[32,22,59,20],[32,25,59,23],[32,31,59,29,"AsyncStorage"],[32,43,59,41],[32,44,59,41,"default"],[32,51,59,41],[32,52,59,42,"getItem"],[32,59,59,49],[32,60,59,50],[32,66,59,56],[32,67,59,57],[33,8,61,6],[33,12,61,10,"token"],[33,17,61,15],[33,21,61,19,"userData"],[33,29,61,27],[33,31,61,29],[34,10,62,8,"set"],[34,13,62,11],[34,14,62,12],[35,12,62,14,"token"],[35,17,62,19],[36,12,62,21,"user"],[36,16,62,25],[36,18,62,27,"JSON"],[36,22,62,31],[36,23,62,32,"parse"],[36,28,62,37],[36,29,62,38,"userData"],[36,37,62,46],[36,38,62,47],[37,12,62,49,"isLoading"],[37,21,62,58],[37,23,62,60],[38,10,62,66],[38,11,62,67],[38,12,62,68],[39,8,63,6],[39,9,63,7],[39,15,63,13],[40,10,64,8,"set"],[40,13,64,11],[40,14,64,12],[41,12,64,14,"isLoading"],[41,21,64,23],[41,23,64,25],[42,10,64,31],[42,11,64,32],[42,12,64,33],[43,8,65,6],[44,6,66,4],[44,7,66,5],[44,8,66,6],[44,15,66,13,"error"],[44,20,66,18],[44,22,66,20],[45,8,67,6,"console"],[45,15,67,13],[45,16,67,14,"error"],[45,21,67,19],[45,22,67,20],[45,41,67,39],[45,43,67,41,"error"],[45,48,67,46],[45,49,67,47],[46,8,68,6,"set"],[46,11,68,9],[46,12,68,10],[47,10,68,12,"isLoading"],[47,19,68,21],[47,21,68,23],[48,8,68,29],[48,9,68,30],[48,10,68,31],[49,6,69,4],[50,4,70,2],[50,5,70,3],[51,4,72,2,"login"],[51,9,72,7],[51,11,72,9],[51,17,72,9,"login"],[51,18,72,16,"username"],[51,26,72,32],[51,28,72,34,"password"],[51,36,72,50],[51,38,72,52,"current_sector"],[51,52,72,74],[51,55,72,77],[51,64,72,86],[51,69,72,91],[52,6,73,4],[52,10,73,8],[53,8,74,6],[53,14,74,12,"response"],[53,22,74,20],[53,25,74,23],[53,31,74,29,"axios"],[53,36,74,34],[53,37,74,34,"default"],[53,44,74,34],[53,45,74,35,"post"],[53,49,74,39],[53,50,74,40],[53,53,74,43,"API_URL"],[53,60,74,50],[53,77,74,67],[53,79,74,69],[54,10,75,8,"username"],[54,18,75,16],[55,10,76,8,"password"],[55,18,76,16],[56,10,77,8,"current_sector"],[57,8,78,6],[57,9,78,7],[57,10,78,8],[58,8,80,6],[58,14,80,12],[59,10,80,14,"access_token"],[59,22,80,26],[60,10,80,28,"user"],[61,8,80,33],[61,9,80,34],[61,12,80,37,"response"],[61,20,80,45],[61,21,80,46,"data"],[61,25,80,50],[62,8,82,6],[62,14,82,12,"AsyncStorage"],[62,26,82,24],[62,27,82,24,"default"],[62,34,82,24],[62,35,82,25,"setItem"],[62,42,82,32],[62,43,82,33],[62,50,82,40],[62,52,82,42,"access_token"],[62,64,82,54],[62,65,82,55],[63,8,83,6],[63,14,83,12,"AsyncStorage"],[63,26,83,24],[63,27,83,24,"default"],[63,34,83,24],[63,35,83,25,"setItem"],[63,42,83,32],[63,43,83,33],[63,49,83,39],[63,51,83,41,"JSON"],[63,55,83,45],[63,56,83,46,"stringify"],[63,65,83,55],[63,66,83,56,"user"],[63,70,83,60],[63,71,83,61],[63,72,83,62],[64,8,85,6,"set"],[64,11,85,9],[64,12,85,10],[65,10,85,12,"user"],[65,14,85,16],[66,10,85,18,"token"],[66,15,85,23],[66,17,85,25,"access_token"],[67,8,85,38],[67,9,85,39],[67,10,85,40],[68,6,86,4],[68,7,86,5],[68,8,86,6],[68,15,86,13,"error"],[68,20,86,23],[68,22,86,25],[69,8,87,6],[69,14,87,12],[69,18,87,16,"Error"],[69,23,87,21],[69,24,87,22,"error"],[69,29,87,27],[69,30,87,28,"response"],[69,38,87,36],[69,40,87,38,"data"],[69,44,87,42],[69,46,87,44,"detail"],[69,52,87,50],[69,56,87,54],[69,70,87,68],[69,71,87,69],[70,6,88,4],[71,4,89,2],[71,5,89,3],[72,4,91,2,"register"],[72,12,91,10],[72,14,91,12],[72,20,91,12,"register"],[72,21,91,19,"username"],[72,29,91,35],[72,31,91,37,"email"],[72,36,91,50],[72,38,91,52,"password"],[72,46,91,68],[72,48,91,70,"full_name"],[72,57,91,87],[72,59,91,89,"referral_code"],[72,72,91,111],[72,74,91,113,"user_type"],[72,83,91,131],[72,85,91,133,"phone_number"],[72,97,91,154],[72,102,91,159],[73,6,92,4],[73,10,92,8],[74,8,93,6],[74,14,93,12,"response"],[74,22,93,20],[74,25,93,23],[74,31,93,29,"axios"],[74,36,93,34],[74,37,93,34,"default"],[74,44,93,34],[74,45,93,35,"post"],[74,49,93,39],[74,50,93,40],[74,53,93,43,"API_URL"],[74,60,93,50],[74,80,93,70],[74,82,93,72],[75,10,94,8,"username"],[75,18,94,16],[76,10,95,8,"email"],[76,15,95,13],[77,10,96,8,"password"],[77,18,96,16],[78,10,97,8,"full_name"],[78,19,97,17],[79,10,98,8,"referral_code"],[79,23,98,21],[79,25,98,23,"referral_code"],[79,38,98,36],[79,42,98,40,"undefined"],[79,51,98,49],[80,10,99,8,"user_type"],[80,19,99,17],[80,21,99,19,"user_type"],[80,30,99,28],[80,34,99,32],[80,42,99,40],[81,10,100,8,"phone_number"],[81,22,100,20],[81,24,100,22,"phone_number"],[81,36,100,34],[81,40,100,38,"undefined"],[82,8,101,6],[82,9,101,7],[82,10,101,8],[83,8,103,6],[83,14,103,12],[84,10,103,14,"access_token"],[84,22,103,26],[85,10,103,28,"user"],[86,8,103,33],[86,9,103,34],[86,12,103,37,"response"],[86,20,103,45],[86,21,103,46,"data"],[86,25,103,50],[87,8,105,6],[87,14,105,12,"AsyncStorage"],[87,26,105,24],[87,27,105,24,"default"],[87,34,105,24],[87,35,105,25,"setItem"],[87,42,105,32],[87,43,105,33],[87,50,105,40],[87,52,105,42,"access_token"],[87,64,105,54],[87,65,105,55],[88,8,106,6],[88,14,106,12,"AsyncStorage"],[88,26,106,24],[88,27,106,24,"default"],[88,34,106,24],[88,35,106,25,"setItem"],[88,42,106,32],[88,43,106,33],[88,49,106,39],[88,51,106,41,"JSON"],[88,55,106,45],[88,56,106,46,"stringify"],[88,65,106,55],[88,66,106,56,"user"],[88,70,106,60],[88,71,106,61],[88,72,106,62],[89,8,108,6,"set"],[89,11,108,9],[89,12,108,10],[90,10,108,12,"user"],[90,14,108,16],[91,10,108,18,"token"],[91,15,108,23],[91,17,108,25,"access_token"],[92,8,108,38],[92,9,108,39],[92,10,108,40],[93,6,109,4],[93,7,109,5],[93,8,109,6],[93,15,109,13,"error"],[93,20,109,23],[93,22,109,25],[94,8,110,6],[94,14,110,12],[94,18,110,16,"Error"],[94,23,110,21],[94,24,110,22,"error"],[94,29,110,27],[94,30,110,28,"response"],[94,38,110,36],[94,40,110,38,"data"],[94,44,110,42],[94,46,110,44,"detail"],[94,52,110,50],[94,56,110,54],[94,77,110,75],[94,78,110,76],[95,6,111,4],[96,4,112,2],[96,5,112,3],[97,4,114,2,"logout"],[97,10,114,8],[97,12,114,10],[97,18,114,10,"logout"],[97,19,114,10],[97,24,114,22],[98,6,115,4],[98,10,115,8],[99,8,116,6],[100,8,117,6],[100,12,117,10],[101,10,118,8],[101,16,118,14],[102,12,118,16,"removePushTokenFromBackend"],[103,10,118,43],[103,11,118,44],[103,14,118,47],[103,20,118,47,"require"],[103,27,118,47],[103,28,118,47,"_dependencyMap"],[103,42,118,47],[103,85,118,47,"_dependencyMap"],[103,99,118,47],[103,104,118,47,"_dependencyMap"],[103,118,118,47],[103,119,118,47,"paths"],[103,124,118,47],[103,151,118,85],[104,10,119,8],[104,16,119,14,"removePushTokenFromBackend"],[104,42,119,40],[104,43,119,41],[104,44,119,42],[105,8,120,6],[105,9,120,7],[105,10,120,8],[105,17,120,15,"error"],[105,22,120,20],[105,24,120,22],[106,10,121,8,"console"],[106,17,121,15],[106,18,121,16,"error"],[106,23,121,21],[106,24,121,22],[106,52,121,50],[106,54,121,52,"error"],[106,59,121,57],[106,60,121,58],[107,8,122,6],[109,8,124,6],[110,8,125,6],[110,12,125,10],[111,10,126,8],[111,16,126,14],[112,12,126,16,"useSectorStore"],[113,10,126,31],[113,11,126,32],[113,14,126,35],[113,20,126,35,"require"],[113,27,126,35],[113,28,126,35,"_dependencyMap"],[113,42,126,35],[113,85,126,35,"_dependencyMap"],[113,99,126,35],[113,104,126,35,"_dependencyMap"],[113,118,126,35],[113,119,126,35,"paths"],[113,124,126,35],[113,142,126,64],[114,10,127,8],[114,16,127,14,"useSectorStore"],[114,30,127,28],[114,31,127,29,"getState"],[114,39,127,37],[114,40,127,38],[114,41,127,39],[114,42,127,40,"clearSector"],[114,53,127,51],[114,54,127,52],[114,55,127,53],[115,8,128,6],[115,9,128,7],[115,10,128,8],[115,17,128,15,"error"],[115,22,128,20],[115,24,128,22],[116,10,129,8,"console"],[116,17,129,15],[116,18,129,16,"error"],[116,23,129,21],[116,24,129,22],[116,48,129,46],[116,50,129,48,"error"],[116,55,129,53],[116,56,129,54],[117,8,130,6],[119,8,132,6],[120,8,133,6],[120,14,133,12],[120,18,133,12,"clearAllCache"],[120,34,133,25],[120,35,133,25,"clearAllCache"],[120,48,133,25],[120,50,133,26],[120,51,133,27],[122,8,135,6],[123,8,136,6,"set"],[123,11,136,9],[123,12,136,10],[124,10,136,12,"user"],[124,14,136,16],[124,16,136,18],[124,20,136,22],[125,10,136,24,"token"],[125,15,136,29],[125,17,136,31],[125,21,136,35],[126,10,136,37,"isLoading"],[126,19,136,46],[126,21,136,48],[127,8,136,54],[127,9,136,55],[127,10,136,56],[128,8,138,6,"console"],[128,15,138,13],[128,16,138,14,"log"],[128,19,138,17],[128,20,138,18],[128,59,138,57],[128,60,138,58],[129,6,139,4],[129,7,139,5],[129,8,139,6],[129,15,139,13,"error"],[129,20,139,18],[129,22,139,20],[130,8,140,6,"console"],[130,15,140,13],[130,16,140,14,"error"],[130,21,140,19],[130,22,140,20],[130,37,140,35],[130,39,140,37,"error"],[130,44,140,42],[130,45,140,43],[131,6,141,4],[132,4,142,2],[132,5,142,3],[133,4,144,2,"setUser"],[133,11,144,9],[133,13,144,11],[133,19,144,18,"user"],[133,23,144,28],[133,27,144,33],[134,6,145,4],[134,10,145,8],[135,8,146,6],[135,14,146,12,"AsyncStorage"],[135,26,146,24],[135,27,146,24,"default"],[135,34,146,24],[135,35,146,25,"setItem"],[135,42,146,32],[135,43,146,33],[135,49,146,39],[135,51,146,41,"JSON"],[135,55,146,45],[135,56,146,46,"stringify"],[135,65,146,55],[135,66,146,56,"user"],[135,70,146,60],[135,71,146,61],[135,72,146,62],[136,8,147,6,"set"],[136,11,147,9],[136,12,147,10],[137,10,147,12,"user"],[138,8,147,17],[138,9,147,18],[138,10,147,19],[139,6,148,4],[139,7,148,5],[139,8,148,6],[139,15,148,13,"error"],[139,20,148,18],[139,22,148,20],[140,8,149,6,"console"],[140,15,149,13],[140,16,149,14,"error"],[140,21,149,19],[140,22,149,20],[140,39,149,37],[140,41,149,39,"error"],[140,46,149,44],[140,47,149,45],[141,6,150,4],[142,4,151,2],[143,2,152,0],[143,3,152,1],[143,4,152,2],[143,5,152,3],[144,0,152,4],[144,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CCkD;aCK;GDc;SEE;GFiB;YGE;GHqB;UIE;GJ4B;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
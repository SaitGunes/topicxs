{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":109,"column":53,"index":3169},"end":{"line":109,"column":85,"index":3201}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"isOptional":true}},{"name":"/app/frontend/node_modules/@expo/metro-config/build/async-require.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":109,"column":47,"index":3163},"end":{"line":109,"column":85,"index":3201}}],"key":"daau5xiLR32xskYL0mG55FO6bjk=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _env2 = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[2], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[3], \"@react-native-async-storage/async-storage\"));\n  var _axios = _interopRequireDefault(require(_dependencyMap[4], \"axios\"));\n  const API_URL = _env2.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await _asyncStorage.default.getItem('token');\n        const userData = await _asyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await _axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await _asyncStorage.default.setItem('token', access_token);\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await _axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await _asyncStorage.default.setItem('token', access_token);\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[6], \"/app/frontend/node_modules/@expo/metro-config/build/async-require.js\")(_dependencyMap[5], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear AsyncStorage\n        await _asyncStorage.default.removeItem('token');\n        await _asyncStorage.default.removeItem('user');\n        await _asyncStorage.default.clear(); // Clear all storage\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":122,"map":[[8,2,1,0],[8,6,1,0,"_zustand"],[8,14,1,0],[8,17,1,0,"require"],[8,24,1,0],[8,25,1,0,"_dependencyMap"],[8,39,1,0],[9,2,2,0],[9,6,2,0,"_asyncStorage"],[9,19,2,0],[9,22,2,0,"_interopRequireDefault"],[9,44,2,0],[9,45,2,0,"require"],[9,52,2,0],[9,53,2,0,"_dependencyMap"],[9,67,2,0],[10,2,3,0],[10,6,3,0,"_axios"],[10,12,3,0],[10,15,3,0,"_interopRequireDefault"],[10,37,3,0],[10,38,3,0,"require"],[10,45,3,0],[10,46,3,0,"_dependencyMap"],[10,60,3,0],[11,2,5,0],[11,8,5,6,"API_URL"],[11,15,5,13],[11,18,5,13,"_env2"],[11,23,5,13],[11,24,5,13,"env"],[11,27,5,13],[11,28,5,13,"EXPO_PUBLIC_BACKEND_URL"],[11,51,5,51],[12,2,43,7],[12,8,43,13,"useAuthStore"],[12,20,43,25],[12,23,43,25,"exports"],[12,30,43,25],[12,31,43,25,"useAuthStore"],[12,43,43,25],[12,46,43,28],[12,50,43,28,"create"],[12,65,43,34],[12,67,43,47,"set"],[12,70,43,50],[12,75,43,56],[13,4,44,2,"user"],[13,8,44,6],[13,10,44,8],[13,14,44,12],[14,4,45,2,"token"],[14,9,45,7],[14,11,45,9],[14,15,45,13],[15,4,46,2,"isLoading"],[15,13,46,11],[15,15,46,13],[15,19,46,17],[16,4,48,2,"loadToken"],[16,13,48,11],[16,15,48,13],[16,21,48,13,"loadToken"],[16,22,48,13],[16,27,48,25],[17,6,49,4],[17,10,49,8],[18,8,50,6],[18,14,50,12,"token"],[18,19,50,17],[18,22,50,20],[18,28,50,26,"AsyncStorage"],[18,49,50,38],[18,50,50,39,"getItem"],[18,57,50,46],[18,58,50,47],[18,65,50,54],[18,66,50,55],[19,8,51,6],[19,14,51,12,"userData"],[19,22,51,20],[19,25,51,23],[19,31,51,29,"AsyncStorage"],[19,52,51,41],[19,53,51,42,"getItem"],[19,60,51,49],[19,61,51,50],[19,67,51,56],[19,68,51,57],[20,8,53,6],[20,12,53,10,"token"],[20,17,53,15],[20,21,53,19,"userData"],[20,29,53,27],[20,31,53,29],[21,10,54,8,"set"],[21,13,54,11],[21,14,54,12],[22,12,54,14,"token"],[22,17,54,19],[23,12,54,21,"user"],[23,16,54,25],[23,18,54,27,"JSON"],[23,22,54,31],[23,23,54,32,"parse"],[23,28,54,37],[23,29,54,38,"userData"],[23,37,54,46],[23,38,54,47],[24,12,54,49,"isLoading"],[24,21,54,58],[24,23,54,60],[25,10,54,66],[25,11,54,67],[25,12,54,68],[26,8,55,6],[26,9,55,7],[26,15,55,13],[27,10,56,8,"set"],[27,13,56,11],[27,14,56,12],[28,12,56,14,"isLoading"],[28,21,56,23],[28,23,56,25],[29,10,56,31],[29,11,56,32],[29,12,56,33],[30,8,57,6],[31,6,58,4],[31,7,58,5],[31,8,58,6],[31,15,58,13,"error"],[31,20,58,18],[31,22,58,20],[32,8,59,6,"console"],[32,15,59,13],[32,16,59,14,"error"],[32,21,59,19],[32,22,59,20],[32,41,59,39],[32,43,59,41,"error"],[32,48,59,46],[32,49,59,47],[33,8,60,6,"set"],[33,11,60,9],[33,12,60,10],[34,10,60,12,"isLoading"],[34,19,60,21],[34,21,60,23],[35,8,60,29],[35,9,60,30],[35,10,60,31],[36,6,61,4],[37,4,62,2],[37,5,62,3],[38,4,64,2,"login"],[38,9,64,7],[38,11,64,9],[38,17,64,9,"login"],[38,18,64,16,"username"],[38,26,64,32],[38,28,64,34,"password"],[38,36,64,50],[38,41,64,55],[39,6,65,4],[39,10,65,8],[40,8,66,6],[40,14,66,12,"response"],[40,22,66,20],[40,25,66,23],[40,31,66,29,"axios"],[40,45,66,34],[40,46,66,35,"post"],[40,50,66,39],[40,51,66,40],[40,54,66,43,"API_URL"],[40,61,66,50],[40,78,66,67],[40,80,66,69],[41,10,67,8,"username"],[41,18,67,16],[42,10,68,8,"password"],[43,8,69,6],[43,9,69,7],[43,10,69,8],[44,8,71,6],[44,14,71,12],[45,10,71,14,"access_token"],[45,22,71,26],[46,10,71,28,"user"],[47,8,71,33],[47,9,71,34],[47,12,71,37,"response"],[47,20,71,45],[47,21,71,46,"data"],[47,25,71,50],[48,8,73,6],[48,14,73,12,"AsyncStorage"],[48,35,73,24],[48,36,73,25,"setItem"],[48,43,73,32],[48,44,73,33],[48,51,73,40],[48,53,73,42,"access_token"],[48,65,73,54],[48,66,73,55],[49,8,74,6],[49,14,74,12,"AsyncStorage"],[49,35,74,24],[49,36,74,25,"setItem"],[49,43,74,32],[49,44,74,33],[49,50,74,39],[49,52,74,41,"JSON"],[49,56,74,45],[49,57,74,46,"stringify"],[49,66,74,55],[49,67,74,56,"user"],[49,71,74,60],[49,72,74,61],[49,73,74,62],[50,8,76,6,"set"],[50,11,76,9],[50,12,76,10],[51,10,76,12,"user"],[51,14,76,16],[52,10,76,18,"token"],[52,15,76,23],[52,17,76,25,"access_token"],[53,8,76,38],[53,9,76,39],[53,10,76,40],[54,6,77,4],[54,7,77,5],[54,8,77,6],[54,15,77,13,"error"],[54,20,77,23],[54,22,77,25],[55,8,78,6],[55,14,78,12],[55,18,78,16,"Error"],[55,23,78,21],[55,24,78,22,"error"],[55,29,78,27],[55,30,78,28,"response"],[55,38,78,36],[55,40,78,38,"data"],[55,44,78,42],[55,46,78,44,"detail"],[55,52,78,50],[55,56,78,54],[55,70,78,68],[55,71,78,69],[56,6,79,4],[57,4,80,2],[57,5,80,3],[58,4,82,2,"register"],[58,12,82,10],[58,14,82,12],[58,20,82,12,"register"],[58,21,82,19,"username"],[58,29,82,35],[58,31,82,37,"email"],[58,36,82,50],[58,38,82,52,"password"],[58,46,82,68],[58,48,82,70,"full_name"],[58,57,82,87],[58,59,82,89,"referral_code"],[58,72,82,111],[58,74,82,113,"user_type"],[58,83,82,131],[58,85,82,133,"phone_number"],[58,97,82,154],[58,102,82,159],[59,6,83,4],[59,10,83,8],[60,8,84,6],[60,14,84,12,"response"],[60,22,84,20],[60,25,84,23],[60,31,84,29,"axios"],[60,45,84,34],[60,46,84,35,"post"],[60,50,84,39],[60,51,84,40],[60,54,84,43,"API_URL"],[60,61,84,50],[60,81,84,70],[60,83,84,72],[61,10,85,8,"username"],[61,18,85,16],[62,10,86,8,"email"],[62,15,86,13],[63,10,87,8,"password"],[63,18,87,16],[64,10,88,8,"full_name"],[64,19,88,17],[65,10,89,8,"referral_code"],[65,23,89,21],[65,25,89,23,"referral_code"],[65,38,89,36],[65,42,89,40,"undefined"],[65,51,89,49],[66,10,90,8,"user_type"],[66,19,90,17],[66,21,90,19,"user_type"],[66,30,90,28],[66,34,90,32],[66,42,90,40],[67,10,91,8,"phone_number"],[67,22,91,20],[67,24,91,22,"phone_number"],[67,36,91,34],[67,40,91,38,"undefined"],[68,8,92,6],[68,9,92,7],[68,10,92,8],[69,8,94,6],[69,14,94,12],[70,10,94,14,"access_token"],[70,22,94,26],[71,10,94,28,"user"],[72,8,94,33],[72,9,94,34],[72,12,94,37,"response"],[72,20,94,45],[72,21,94,46,"data"],[72,25,94,50],[73,8,96,6],[73,14,96,12,"AsyncStorage"],[73,35,96,24],[73,36,96,25,"setItem"],[73,43,96,32],[73,44,96,33],[73,51,96,40],[73,53,96,42,"access_token"],[73,65,96,54],[73,66,96,55],[74,8,97,6],[74,14,97,12,"AsyncStorage"],[74,35,97,24],[74,36,97,25,"setItem"],[74,43,97,32],[74,44,97,33],[74,50,97,39],[74,52,97,41,"JSON"],[74,56,97,45],[74,57,97,46,"stringify"],[74,66,97,55],[74,67,97,56,"user"],[74,71,97,60],[74,72,97,61],[74,73,97,62],[75,8,99,6,"set"],[75,11,99,9],[75,12,99,10],[76,10,99,12,"user"],[76,14,99,16],[77,10,99,18,"token"],[77,15,99,23],[77,17,99,25,"access_token"],[78,8,99,38],[78,9,99,39],[78,10,99,40],[79,6,100,4],[79,7,100,5],[79,8,100,6],[79,15,100,13,"error"],[79,20,100,23],[79,22,100,25],[80,8,101,6],[80,14,101,12],[80,18,101,16,"Error"],[80,23,101,21],[80,24,101,22,"error"],[80,29,101,27],[80,30,101,28,"response"],[80,38,101,36],[80,40,101,38,"data"],[80,44,101,42],[80,46,101,44,"detail"],[80,52,101,50],[80,56,101,54],[80,77,101,75],[80,78,101,76],[81,6,102,4],[82,4,103,2],[82,5,103,3],[83,4,105,2,"logout"],[83,10,105,8],[83,12,105,10],[83,18,105,10,"logout"],[83,19,105,10],[83,24,105,22],[84,6,106,4],[84,10,106,8],[85,8,107,6],[86,8,108,6],[86,12,108,10],[87,10,109,8],[87,16,109,14],[88,12,109,16,"removePushTokenFromBackend"],[89,10,109,43],[89,11,109,44],[89,14,109,47],[89,20,109,47,"require"],[89,27,109,47],[89,28,109,47,"_dependencyMap"],[89,42,109,47],[89,119,109,47,"_dependencyMap"],[89,133,109,47],[89,138,109,47,"_dependencyMap"],[89,152,109,47],[89,153,109,47,"paths"],[89,158,109,47],[89,185,109,85],[90,10,110,8],[90,16,110,14,"removePushTokenFromBackend"],[90,42,110,40],[90,43,110,41],[90,44,110,42],[91,8,111,6],[91,9,111,7],[91,10,111,8],[91,17,111,15,"error"],[91,22,111,20],[91,24,111,22],[92,10,112,8,"console"],[92,17,112,15],[92,18,112,16,"error"],[92,23,112,21],[92,24,112,22],[92,52,112,50],[92,54,112,52,"error"],[92,59,112,57],[92,60,112,58],[93,8,113,6],[95,8,115,6],[96,8,116,6],[96,14,116,12,"AsyncStorage"],[96,35,116,24],[96,36,116,25,"removeItem"],[96,46,116,35],[96,47,116,36],[96,54,116,43],[96,55,116,44],[97,8,117,6],[97,14,117,12,"AsyncStorage"],[97,35,117,24],[97,36,117,25,"removeItem"],[97,46,117,35],[97,47,117,36],[97,53,117,42],[97,54,117,43],[98,8,118,6],[98,14,118,12,"AsyncStorage"],[98,35,118,24],[98,36,118,25,"clear"],[98,41,118,30],[98,42,118,31],[98,43,118,32],[98,44,118,33],[98,45,118,34],[100,8,120,6],[101,8,121,6,"set"],[101,11,121,9],[101,12,121,10],[102,10,121,12,"user"],[102,14,121,16],[102,16,121,18],[102,20,121,22],[103,10,121,24,"token"],[103,15,121,29],[103,17,121,31],[103,21,121,35],[104,10,121,37,"isLoading"],[104,19,121,46],[104,21,121,48],[105,8,121,54],[105,9,121,55],[105,10,121,56],[106,8,123,6,"console"],[106,15,123,13],[106,16,123,14,"log"],[106,19,123,17],[106,20,123,18],[106,39,123,37],[106,40,123,38],[107,6,124,4],[107,7,124,5],[107,8,124,6],[107,15,124,13,"error"],[107,20,124,18],[107,22,124,20],[108,8,125,6,"console"],[108,15,125,13],[108,16,125,14,"error"],[108,21,125,19],[108,22,125,20],[108,37,125,35],[108,39,125,37,"error"],[108,44,125,42],[108,45,125,43],[109,6,126,4],[110,4,127,2],[110,5,127,3],[111,4,129,2,"setUser"],[111,11,129,9],[111,13,129,11],[111,19,129,18,"user"],[111,23,129,28],[111,27,129,33],[112,6,130,4],[112,10,130,8],[113,8,131,6],[113,14,131,12,"AsyncStorage"],[113,35,131,24],[113,36,131,25,"setItem"],[113,43,131,32],[113,44,131,33],[113,50,131,39],[113,52,131,41,"JSON"],[113,56,131,45],[113,57,131,46,"stringify"],[113,66,131,55],[113,67,131,56,"user"],[113,71,131,60],[113,72,131,61],[113,73,131,62],[114,8,132,6,"set"],[114,11,132,9],[114,12,132,10],[115,10,132,12,"user"],[116,8,132,17],[116,9,132,18],[116,10,132,19],[117,6,133,4],[117,7,133,5],[117,8,133,6],[117,15,133,13,"error"],[117,20,133,18],[117,22,133,20],[118,8,134,6,"console"],[118,15,134,13],[118,16,134,14,"error"],[118,21,134,19],[118,22,134,20],[118,39,134,37],[118,41,134,39,"error"],[118,46,134,44],[118,47,134,45],[119,6,135,4],[120,4,136,2],[121,2,137,0],[121,3,137,1],[121,4,137,2],[121,5,137,3],[122,0,137,4],[122,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC0C;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJsB;WKE;GLO;EDC"}},"type":"js/module"}]}
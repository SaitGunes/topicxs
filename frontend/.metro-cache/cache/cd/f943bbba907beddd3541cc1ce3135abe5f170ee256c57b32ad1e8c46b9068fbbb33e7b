{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":92},"end":{"line":3,"column":40,"index":132}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":24,"index":157}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.sendPushTokenToBackend = sendPushTokenToBackend;\n  exports.updateNotificationPreferences = updateNotificationPreferences;\n  exports.removePushTokenFromBackend = removePushTokenFromBackend;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _api = require(_dependencyMap[4], \"./api\");\n  var api = _interopDefault(_api);\n  // Configure how notifications should be displayed when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        return {\n          shouldShowAlert: true,\n          shouldPlaySound: true,\n          shouldSetBadge: true\n        };\n      });\n      return function handleNotification() {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  });\n\n  /**\n   * Register for push notifications and get the Expo Push Token\n   */\n  function registerForPushNotificationsAsync() {\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  /**\n   * Send the push token to backend\n   */\n  function _registerForPushNotificationsAsync() {\n    _registerForPushNotificationsAsync = (0, _asyncToGenerator.default)(function* () {\n      var token = null;\n      if (_reactNative.Platform.OS === 'android') {\n        yield Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#FF231F7C'\n        });\n      }\n      if (Device.isDevice) {\n        var _yield$Notifications$ = yield Notifications.getPermissionsAsync(),\n          existingStatus = _yield$Notifications$.status;\n        var finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          var _yield$Notifications$2 = yield Notifications.requestPermissionsAsync(),\n            status = _yield$Notifications$2.status;\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return null;\n        }\n        try {\n          var tokenData = yield Notifications.getExpoPushTokenAsync({\n            projectId: '97534a80-2fb3-4bbf-a17c-2fccf8f825ba' // Your Expo project ID\n          });\n          token = tokenData.data;\n          console.log('Push token:', token);\n        } catch (error) {\n          // Silent fail - push notifications don't work in Expo Go\n          // They will work in production build\n          console.log('Push notifications not available (Expo Go limitation)');\n          return null;\n        }\n      } else {\n        console.log('Must use physical device for Push Notifications');\n      }\n      return token;\n    });\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function sendPushTokenToBackend(_x) {\n    return _sendPushTokenToBackend.apply(this, arguments);\n  }\n  /**\n   * Update notification preferences on backend\n   */\n  function _sendPushTokenToBackend() {\n    _sendPushTokenToBackend = (0, _asyncToGenerator.default)(function* (token) {\n      try {\n        yield api.default.post('/api/notifications/register', {\n          token\n        });\n        console.log('Push token registered with backend');\n        return true;\n      } catch (error) {\n        console.error('Failed to register push token with backend:', error);\n        return false;\n      }\n    });\n    return _sendPushTokenToBackend.apply(this, arguments);\n  }\n  function updateNotificationPreferences(_x2) {\n    return _updateNotificationPreferences.apply(this, arguments);\n  }\n  /**\n   * Remove push token from backend (on logout)\n   */\n  function _updateNotificationPreferences() {\n    _updateNotificationPreferences = (0, _asyncToGenerator.default)(function* (preferences) {\n      try {\n        yield api.default.put('/api/notifications/preferences', preferences);\n        console.log('Notification preferences updated');\n        return true;\n      } catch (error) {\n        console.error('Failed to update notification preferences:', error);\n        return false;\n      }\n    });\n    return _updateNotificationPreferences.apply(this, arguments);\n  }\n  function removePushTokenFromBackend() {\n    return _removePushTokenFromBackend.apply(this, arguments);\n  }\n  function _removePushTokenFromBackend() {\n    _removePushTokenFromBackend = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield api.default.delete('/api/notifications/unregister');\n        console.log('Push token removed from backend');\n        return true;\n      } catch (error) {\n        console.error('Failed to remove push token from backend:', error);\n        return false;\n      }\n    });\n    return _removePushTokenFromBackend.apply(this, arguments);\n  }\n});","lineCount":164,"map":[[27,2,18,0,"exports"],[27,9,18,0],[27,10,18,0,"registerForPushNotificationsAsync"],[27,43,18,0],[27,46,18,0,"registerForPushNotificationsAsync"],[27,79,18,0],[28,2,66,0,"exports"],[28,9,66,0],[28,10,66,0,"sendPushTokenToBackend"],[28,32,66,0],[28,35,66,0,"sendPushTokenToBackend"],[28,57,66,0],[29,2,80,0,"exports"],[29,9,80,0],[29,10,80,0,"updateNotificationPreferences"],[29,39,80,0],[29,42,80,0,"updateNotificationPreferences"],[29,71,80,0],[30,2,99,0,"exports"],[30,9,99,0],[30,10,99,0,"removePushTokenFromBackend"],[30,36,99,0],[30,39,99,0,"removePushTokenFromBackend"],[30,65,99,0],[31,2,108,1],[31,6,108,1,"_babelRuntimeHelpersAsyncToGenerator"],[31,42,108,1],[31,45,108,1,"require"],[31,52,108,1],[31,53,108,1,"_dependencyMap"],[31,67,108,1],[32,2,108,1],[32,6,108,1,"_asyncToGenerator"],[32,23,108,1],[32,26,108,1,"_interopDefault"],[32,41,108,1],[32,42,108,1,"_babelRuntimeHelpersAsyncToGenerator"],[32,78,108,1],[33,2,1,0],[33,6,1,0,"_expoNotifications"],[33,24,1,0],[33,27,1,0,"require"],[33,34,1,0],[33,35,1,0,"_dependencyMap"],[33,49,1,0],[34,2,1,0],[34,6,1,0,"Notifications"],[34,19,1,0],[34,22,1,0,"_interopNamespace"],[34,39,1,0],[34,40,1,0,"_expoNotifications"],[34,58,1,0],[35,2,2,0],[35,6,2,0,"_expoDevice"],[35,17,2,0],[35,20,2,0,"require"],[35,27,2,0],[35,28,2,0,"_dependencyMap"],[35,42,2,0],[36,2,2,0],[36,6,2,0,"Device"],[36,12,2,0],[36,15,2,0,"_interopNamespace"],[36,32,2,0],[36,33,2,0,"_expoDevice"],[36,44,2,0],[37,2,3,0],[37,6,3,0,"_reactNative"],[37,18,3,0],[37,21,3,0,"require"],[37,28,3,0],[37,29,3,0,"_dependencyMap"],[37,43,3,0],[38,2,4,0],[38,6,4,0,"_api"],[38,10,4,0],[38,13,4,0,"require"],[38,20,4,0],[38,21,4,0,"_dependencyMap"],[38,35,4,0],[39,2,4,0],[39,6,4,0,"api"],[39,9,4,0],[39,12,4,0,"_interopDefault"],[39,27,4,0],[39,28,4,0,"_api"],[39,32,4,0],[40,2,6,0],[41,2,7,0,"Notifications"],[41,15,7,13],[41,16,7,14,"setNotificationHandler"],[41,38,7,36],[41,39,7,37],[42,4,8,2,"handleNotification"],[42,22,8,20],[43,6,8,20],[43,10,8,20,"_ref"],[43,14,8,20],[43,21,8,20,"_asyncToGenerator"],[43,38,8,20],[43,39,8,20,"default"],[43,46,8,20],[43,48,8,22],[44,8,8,22],[44,15,8,35],[45,10,9,4,"shouldShowAlert"],[45,25,9,19],[45,27,9,21],[45,31,9,25],[46,10,10,4,"shouldPlaySound"],[46,25,10,19],[46,27,10,21],[46,31,10,25],[47,10,11,4,"shouldSetBadge"],[47,24,11,18],[47,26,11,20],[48,8,12,2],[48,9,12,3],[49,6,12,3],[49,7,12,4],[50,6,12,4],[50,22,8,2,"handleNotification"],[50,40,8,20,"handleNotification"],[50,41,8,20],[51,8,8,20],[51,15,8,20,"_ref"],[51,19,8,20],[51,20,8,20,"apply"],[51,25,8,20],[51,32,8,20,"arguments"],[51,41,8,20],[52,6,8,20],[53,4,8,20],[54,2,13,0],[54,3,13,1],[54,4,13,2],[56,2,15,0],[57,0,16,0],[58,0,17,0],[59,2,15,0],[59,11,18,22,"registerForPushNotificationsAsync"],[59,44,18,55,"registerForPushNotificationsAsync"],[59,45,18,55],[60,4,18,55],[60,11,18,55,"_registerForPushNotificationsAsync"],[60,45,18,55],[60,46,18,55,"apply"],[60,51,18,55],[60,58,18,55,"arguments"],[60,67,18,55],[61,2,18,55],[62,2,63,0],[63,0,64,0],[64,0,65,0],[65,2,63,0],[65,11,63,0,"_registerForPushNotificationsAsync"],[65,46,63,0],[66,4,63,0,"_registerForPushNotificationsAsync"],[66,38,63,0],[66,45,63,0,"_asyncToGenerator"],[66,62,63,0],[66,63,63,0,"default"],[66,70,63,0],[66,72,18,7],[66,85,18,82],[67,6,19,2],[67,10,19,6,"token"],[67,15,19,11],[67,18,19,14],[67,22,19,18],[68,6,21,2],[68,10,21,6,"Platform"],[68,22,21,14],[68,23,21,14,"Platform"],[68,31,21,14],[68,32,21,15,"OS"],[68,34,21,17],[68,39,21,22],[68,48,21,31],[68,50,21,33],[69,8,22,4],[69,14,22,10,"Notifications"],[69,27,22,23],[69,28,22,24,"setNotificationChannelAsync"],[69,55,22,51],[69,56,22,52],[69,65,22,61],[69,67,22,63],[70,10,23,6,"name"],[70,14,23,10],[70,16,23,12],[70,25,23,21],[71,10,24,6,"importance"],[71,20,24,16],[71,22,24,18,"Notifications"],[71,35,24,31],[71,36,24,32,"AndroidImportance"],[71,53,24,49],[71,54,24,50,"MAX"],[71,57,24,53],[72,10,25,6,"vibrationPattern"],[72,26,25,22],[72,28,25,24],[72,29,25,25],[72,30,25,26],[72,32,25,28],[72,35,25,31],[72,37,25,33],[72,40,25,36],[72,42,25,38],[72,45,25,41],[72,46,25,42],[73,10,26,6,"lightColor"],[73,20,26,16],[73,22,26,18],[74,8,27,4],[74,9,27,5],[74,10,27,6],[75,6,28,2],[76,6,30,2],[76,10,30,6,"Device"],[76,16,30,12],[76,17,30,13,"isDevice"],[76,25,30,21],[76,27,30,23],[77,8,31,4],[77,12,31,4,"_yield$Notifications$"],[77,33,31,4],[77,42,31,45,"Notifications"],[77,55,31,58],[77,56,31,59,"getPermissionsAsync"],[77,75,31,78],[77,76,31,79],[77,77,31,80],[78,10,31,20,"existingStatus"],[78,24,31,34],[78,27,31,34,"_yield$Notifications$"],[78,48,31,34],[78,49,31,12,"status"],[78,55,31,18],[79,8,32,4],[79,12,32,8,"finalStatus"],[79,23,32,19],[79,26,32,22,"existingStatus"],[79,40,32,36],[80,8,34,4],[80,12,34,8,"existingStatus"],[80,26,34,22],[80,31,34,27],[80,40,34,36],[80,42,34,38],[81,10,35,6],[81,14,35,6,"_yield$Notifications$2"],[81,36,35,6],[81,45,35,31,"Notifications"],[81,58,35,44],[81,59,35,45,"requestPermissionsAsync"],[81,82,35,68],[81,83,35,69],[81,84,35,70],[82,12,35,14,"status"],[82,18,35,20],[82,21,35,20,"_yield$Notifications$2"],[82,43,35,20],[82,44,35,14,"status"],[82,50,35,20],[83,10,36,6,"finalStatus"],[83,21,36,17],[83,24,36,20,"status"],[83,30,36,26],[84,8,37,4],[85,8,39,4],[85,12,39,8,"finalStatus"],[85,23,39,19],[85,28,39,24],[85,37,39,33],[85,39,39,35],[86,10,40,6,"console"],[86,17,40,13],[86,18,40,14,"log"],[86,21,40,17],[86,22,40,18],[86,71,40,67],[86,72,40,68],[87,10,41,6],[87,17,41,13],[87,21,41,17],[88,8,42,4],[89,8,44,4],[89,12,44,8],[90,10,45,6],[90,14,45,12,"tokenData"],[90,23,45,21],[90,32,45,30,"Notifications"],[90,45,45,43],[90,46,45,44,"getExpoPushTokenAsync"],[90,67,45,65],[90,68,45,66],[91,12,46,8,"projectId"],[91,21,46,17],[91,23,46,19],[91,61,46,57],[91,62,46,59],[92,10,47,6],[92,11,47,7],[92,12,47,8],[93,10,48,6,"token"],[93,15,48,11],[93,18,48,14,"tokenData"],[93,27,48,23],[93,28,48,24,"data"],[93,32,48,28],[94,10,49,6,"console"],[94,17,49,13],[94,18,49,14,"log"],[94,21,49,17],[94,22,49,18],[94,35,49,31],[94,37,49,33,"token"],[94,42,49,38],[94,43,49,39],[95,8,50,4],[95,9,50,5],[95,10,50,6],[95,17,50,13,"error"],[95,22,50,18],[95,24,50,20],[96,10,51,6],[97,10,52,6],[98,10,53,6,"console"],[98,17,53,13],[98,18,53,14,"log"],[98,21,53,17],[98,22,53,18],[98,77,53,73],[98,78,53,74],[99,10,54,6],[99,17,54,13],[99,21,54,17],[100,8,55,4],[101,6,56,2],[101,7,56,3],[101,13,56,9],[102,8,57,4,"console"],[102,15,57,11],[102,16,57,12,"log"],[102,19,57,15],[102,20,57,16],[102,69,57,65],[102,70,57,66],[103,6,58,2],[104,6,60,2],[104,13,60,9,"token"],[104,18,60,14],[105,4,61,0],[105,5,61,1],[106,4,61,1],[106,11,61,1,"_registerForPushNotificationsAsync"],[106,45,61,1],[106,46,61,1,"apply"],[106,51,61,1],[106,58,61,1,"arguments"],[106,67,61,1],[107,2,61,1],[108,2,61,1],[108,11,66,22,"sendPushTokenToBackend"],[108,33,66,44,"sendPushTokenToBackend"],[108,34,66,44,"_x"],[108,36,66,44],[109,4,66,44],[109,11,66,44,"_sendPushTokenToBackend"],[109,34,66,44],[109,35,66,44,"apply"],[109,40,66,44],[109,47,66,44,"arguments"],[109,56,66,44],[110,2,66,44],[111,2,77,0],[112,0,78,0],[113,0,79,0],[114,2,77,0],[114,11,77,0,"_sendPushTokenToBackend"],[114,35,77,0],[115,4,77,0,"_sendPushTokenToBackend"],[115,27,77,0],[115,34,77,0,"_asyncToGenerator"],[115,51,77,0],[115,52,77,0,"default"],[115,59,77,0],[115,61,66,7],[115,72,66,45,"token"],[115,77,66,58],[115,79,66,78],[116,6,67,2],[116,10,67,6],[117,8,68,4],[117,14,68,10,"api"],[117,17,68,13],[117,18,68,13,"default"],[117,25,68,13],[117,26,68,14,"post"],[117,30,68,18],[117,31,68,19],[117,60,68,48],[117,62,68,50],[118,10,68,52,"token"],[119,8,68,58],[119,9,68,59],[119,10,68,60],[120,8,69,4,"console"],[120,15,69,11],[120,16,69,12,"log"],[120,19,69,15],[120,20,69,16],[120,56,69,52],[120,57,69,53],[121,8,70,4],[121,15,70,11],[121,19,70,15],[122,6,71,2],[122,7,71,3],[122,8,71,4],[122,15,71,11,"error"],[122,20,71,16],[122,22,71,18],[123,8,72,4,"console"],[123,15,72,11],[123,16,72,12,"error"],[123,21,72,17],[123,22,72,18],[123,67,72,63],[123,69,72,65,"error"],[123,74,72,70],[123,75,72,71],[124,8,73,4],[124,15,73,11],[124,20,73,16],[125,6,74,2],[126,4,75,0],[126,5,75,1],[127,4,75,1],[127,11,75,1,"_sendPushTokenToBackend"],[127,34,75,1],[127,35,75,1,"apply"],[127,40,75,1],[127,47,75,1,"arguments"],[127,56,75,1],[128,2,75,1],[129,2,75,1],[129,11,80,22,"updateNotificationPreferences"],[129,40,80,51,"updateNotificationPreferences"],[129,41,80,51,"_x2"],[129,44,80,51],[130,4,80,51],[130,11,80,51,"_updateNotificationPreferences"],[130,41,80,51],[130,42,80,51,"apply"],[130,47,80,51],[130,54,80,51,"arguments"],[130,63,80,51],[131,2,80,51],[132,2,96,0],[133,0,97,0],[134,0,98,0],[135,2,96,0],[135,11,96,0,"_updateNotificationPreferences"],[135,42,96,0],[136,4,96,0,"_updateNotificationPreferences"],[136,34,96,0],[136,41,96,0,"_asyncToGenerator"],[136,58,96,0],[136,59,96,0,"default"],[136,66,96,0],[136,68,80,7],[136,79,80,52,"preferences"],[136,90,85,1],[136,92,85,21],[137,6,86,2],[137,10,86,6],[138,8,87,4],[138,14,87,10,"api"],[138,17,87,13],[138,18,87,13,"default"],[138,25,87,13],[138,26,87,14,"put"],[138,29,87,17],[138,30,87,18],[138,62,87,50],[138,64,87,52,"preferences"],[138,75,87,63],[138,76,87,64],[139,8,88,4,"console"],[139,15,88,11],[139,16,88,12,"log"],[139,19,88,15],[139,20,88,16],[139,54,88,50],[139,55,88,51],[140,8,89,4],[140,15,89,11],[140,19,89,15],[141,6,90,2],[141,7,90,3],[141,8,90,4],[141,15,90,11,"error"],[141,20,90,16],[141,22,90,18],[142,8,91,4,"console"],[142,15,91,11],[142,16,91,12,"error"],[142,21,91,17],[142,22,91,18],[142,66,91,62],[142,68,91,64,"error"],[142,73,91,69],[142,74,91,70],[143,8,92,4],[143,15,92,11],[143,20,92,16],[144,6,93,2],[145,4,94,0],[145,5,94,1],[146,4,94,1],[146,11,94,1,"_updateNotificationPreferences"],[146,41,94,1],[146,42,94,1,"apply"],[146,47,94,1],[146,54,94,1,"arguments"],[146,63,94,1],[147,2,94,1],[148,2,94,1],[148,11,99,22,"removePushTokenFromBackend"],[148,37,99,48,"removePushTokenFromBackend"],[148,38,99,48],[149,4,99,48],[149,11,99,48,"_removePushTokenFromBackend"],[149,38,99,48],[149,39,99,48,"apply"],[149,44,99,48],[149,51,99,48,"arguments"],[149,60,99,48],[150,2,99,48],[151,2,99,48],[151,11,99,48,"_removePushTokenFromBackend"],[151,39,99,48],[152,4,99,48,"_removePushTokenFromBackend"],[152,31,99,48],[152,38,99,48,"_asyncToGenerator"],[152,55,99,48],[152,56,99,48,"default"],[152,63,99,48],[152,65,99,7],[152,78,99,69],[153,6,100,2],[153,10,100,6],[154,8,101,4],[154,14,101,10,"api"],[154,17,101,13],[154,18,101,13,"default"],[154,25,101,13],[154,26,101,14,"delete"],[154,32,101,20],[154,33,101,21],[154,64,101,52],[154,65,101,53],[155,8,102,4,"console"],[155,15,102,11],[155,16,102,12,"log"],[155,19,102,15],[155,20,102,16],[155,53,102,49],[155,54,102,50],[156,8,103,4],[156,15,103,11],[156,19,103,15],[157,6,104,2],[157,7,104,3],[157,8,104,4],[157,15,104,11,"error"],[157,20,104,16],[157,22,104,18],[158,8,105,4,"console"],[158,15,105,11],[158,16,105,12,"error"],[158,21,105,17],[158,22,105,18],[158,65,105,61],[158,67,105,63,"error"],[158,72,105,68],[158,73,105,69],[159,8,106,4],[159,15,106,11],[159,20,106,16],[160,6,107,2],[161,4,108,0],[161,5,108,1],[162,4,108,1],[162,11,108,1,"_removePushTokenFromBackend"],[162,38,108,1],[162,39,108,1,"apply"],[162,44,108,1],[162,51,108,1,"arguments"],[162,60,108,1],[163,2,108,1],[164,0,108,1],[164,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","sendPushTokenToBackend","updateNotificationPreferences","removePushTokenFromBackend"],"mappings":"AAA;sBCO;IDI;OEM;CF2C;OGK;CHS;OIK;CJc;OKK;CLS"},"hasCjsExports":false},"type":"js/module"}]}
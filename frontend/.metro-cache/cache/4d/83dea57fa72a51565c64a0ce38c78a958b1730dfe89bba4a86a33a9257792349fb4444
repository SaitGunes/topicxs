{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":31,"index":65}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useNotificationStore\", {\n    enumerable: true,\n    get: function () {\n      return useNotificationStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  const useNotificationStore = (0, _zustand.create)(set => ({\n    friendRequestCount: 0,\n    unreadMessageCount: 0,\n    expoPushToken: null,\n    preferences: {\n      friend_requests: true,\n      messages: true,\n      likes: true,\n      comments: true\n    },\n    loadFriendRequestCount: async () => {\n      try {\n        const response = await api.default.get('/api/friends/requests');\n        const pendingRequests = response.data.filter(req => req.status === 'pending');\n        set({\n          friendRequestCount: pendingRequests.length\n        });\n      } catch (error) {\n        console.error('Load friend requests count error:', error);\n      }\n    },\n    loadUnreadMessageCount: async () => {\n      try {\n        const response = await api.default.get('/api/chats');\n        // For now, we'll just count total chats\n        // In future, we can add unread_count to each chat\n        set({\n          unreadMessageCount: response.data.length > 0 ? response.data.length : 0\n        });\n      } catch (error) {\n        console.error('Load unread messages count error:', error);\n      }\n    },\n    resetFriendRequestCount: () => set({\n      friendRequestCount: 0\n    }),\n    resetUnreadMessageCount: () => set({\n      unreadMessageCount: 0\n    }),\n    decrementFriendRequestCount: () => {\n      set(state => ({\n        friendRequestCount: Math.max(0, state.friendRequestCount - 1)\n      }));\n    },\n    setExpoPushToken: token => {\n      set({\n        expoPushToken: token\n      });\n    },\n    setPreferences: prefs => {\n      set({\n        preferences: prefs\n      });\n    },\n    loadPreferences: async () => {\n      try {\n        const response = await api.default.get('/api/notifications/preferences');\n        set({\n          preferences: response.data\n        });\n      } catch (error) {\n        console.error('Failed to load notification preferences:', error);\n      }\n    }\n  }));\n});","lineCount":86,"map":[[12,2,27,0,"Object"],[12,8,27,0],[12,9,27,0,"defineProperty"],[12,23,27,0],[12,24,27,0,"exports"],[12,31,27,0],[13,4,27,0,"enumerable"],[13,14,27,0],[14,4,27,0,"get"],[14,7,27,0],[14,18,27,0,"get"],[14,19,27,0],[15,6,27,0],[15,13,27,0,"useNotificationStore"],[15,33,27,0],[16,4,27,0],[17,2,27,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_utilsApi"],[19,15,2,0],[19,18,2,0,"require"],[19,25,2,0],[19,26,2,0,"_dependencyMap"],[19,40,2,0],[20,2,2,0],[20,6,2,0,"api"],[20,9,2,0],[20,12,2,0,"_interopDefault"],[20,27,2,0],[20,28,2,0,"_utilsApi"],[20,37,2,0],[21,2,27,7],[21,8,27,13,"useNotificationStore"],[21,28,27,33],[21,31,27,36],[21,35,27,36,"create"],[21,43,27,42],[21,44,27,42,"create"],[21,50,27,42],[21,52,27,63,"set"],[21,55,27,66],[21,60,27,72],[22,4,28,2,"friendRequestCount"],[22,22,28,20],[22,24,28,22],[22,25,28,23],[23,4,29,2,"unreadMessageCount"],[23,22,29,20],[23,24,29,22],[23,25,29,23],[24,4,30,2,"expoPushToken"],[24,17,30,15],[24,19,30,17],[24,23,30,21],[25,4,31,2,"preferences"],[25,15,31,13],[25,17,31,15],[26,6,32,4,"friend_requests"],[26,21,32,19],[26,23,32,21],[26,27,32,25],[27,6,33,4,"messages"],[27,14,33,12],[27,16,33,14],[27,20,33,18],[28,6,34,4,"likes"],[28,11,34,9],[28,13,34,11],[28,17,34,15],[29,6,35,4,"comments"],[29,14,35,12],[29,16,35,14],[30,4,36,2],[30,5,36,3],[31,4,38,2,"loadFriendRequestCount"],[31,26,38,24],[31,28,38,26],[31,34,38,26,"loadFriendRequestCount"],[31,35,38,26],[31,40,38,38],[32,6,39,4],[32,10,39,8],[33,8,40,6],[33,14,40,12,"response"],[33,22,40,20],[33,25,40,23],[33,31,40,29,"api"],[33,34,40,32],[33,35,40,32,"default"],[33,42,40,32],[33,43,40,33,"get"],[33,46,40,36],[33,47,40,37],[33,70,40,60],[33,71,40,61],[34,8,41,6],[34,14,41,12,"pendingRequests"],[34,29,41,27],[34,32,41,30,"response"],[34,40,41,38],[34,41,41,39,"data"],[34,45,41,43],[34,46,41,44,"filter"],[34,52,41,50],[34,53,41,52,"req"],[34,56,41,60],[34,60,41,65,"req"],[34,63,41,68],[34,64,41,69,"status"],[34,70,41,75],[34,75,41,80],[34,84,41,89],[34,85,41,90],[35,8,42,6,"set"],[35,11,42,9],[35,12,42,10],[36,10,42,12,"friendRequestCount"],[36,28,42,30],[36,30,42,32,"pendingRequests"],[36,45,42,47],[36,46,42,48,"length"],[37,8,42,55],[37,9,42,56],[37,10,42,57],[38,6,43,4],[38,7,43,5],[38,8,43,6],[38,15,43,13,"error"],[38,20,43,18],[38,22,43,20],[39,8,44,6,"console"],[39,15,44,13],[39,16,44,14,"error"],[39,21,44,19],[39,22,44,20],[39,57,44,55],[39,59,44,57,"error"],[39,64,44,62],[39,65,44,63],[40,6,45,4],[41,4,46,2],[41,5,46,3],[42,4,48,2,"loadUnreadMessageCount"],[42,26,48,24],[42,28,48,26],[42,34,48,26,"loadUnreadMessageCount"],[42,35,48,26],[42,40,48,38],[43,6,49,4],[43,10,49,8],[44,8,50,6],[44,14,50,12,"response"],[44,22,50,20],[44,25,50,23],[44,31,50,29,"api"],[44,34,50,32],[44,35,50,32,"default"],[44,42,50,32],[44,43,50,33,"get"],[44,46,50,36],[44,47,50,37],[44,59,50,49],[44,60,50,50],[45,8,51,6],[46,8,52,6],[47,8,53,6,"set"],[47,11,53,9],[47,12,53,10],[48,10,53,12,"unreadMessageCount"],[48,28,53,30],[48,30,53,32,"response"],[48,38,53,40],[48,39,53,41,"data"],[48,43,53,45],[48,44,53,46,"length"],[48,50,53,52],[48,53,53,55],[48,54,53,56],[48,57,53,59,"response"],[48,65,53,67],[48,66,53,68,"data"],[48,70,53,72],[48,71,53,73,"length"],[48,77,53,79],[48,80,53,82],[49,8,53,84],[49,9,53,85],[49,10,53,86],[50,6,54,4],[50,7,54,5],[50,8,54,6],[50,15,54,13,"error"],[50,20,54,18],[50,22,54,20],[51,8,55,6,"console"],[51,15,55,13],[51,16,55,14,"error"],[51,21,55,19],[51,22,55,20],[51,57,55,55],[51,59,55,57,"error"],[51,64,55,62],[51,65,55,63],[52,6,56,4],[53,4,57,2],[53,5,57,3],[54,4,59,2,"resetFriendRequestCount"],[54,27,59,25],[54,29,59,27,"resetFriendRequestCount"],[54,30,59,27],[54,35,59,33,"set"],[54,38,59,36],[54,39,59,37],[55,6,59,39,"friendRequestCount"],[55,24,59,57],[55,26,59,59],[56,4,59,61],[56,5,59,62],[56,6,59,63],[57,4,60,2,"resetUnreadMessageCount"],[57,27,60,25],[57,29,60,27,"resetUnreadMessageCount"],[57,30,60,27],[57,35,60,33,"set"],[57,38,60,36],[57,39,60,37],[58,6,60,39,"unreadMessageCount"],[58,24,60,57],[58,26,60,59],[59,4,60,61],[59,5,60,62],[59,6,60,63],[60,4,62,2,"decrementFriendRequestCount"],[60,31,62,29],[60,33,62,31,"decrementFriendRequestCount"],[60,34,62,31],[60,39,62,37],[61,6,63,4,"set"],[61,9,63,7],[61,10,63,9,"state"],[61,15,63,14],[61,20,63,20],[62,8,64,6,"friendRequestCount"],[62,26,64,24],[62,28,64,26,"Math"],[62,32,64,30],[62,33,64,31,"max"],[62,36,64,34],[62,37,64,35],[62,38,64,36],[62,40,64,38,"state"],[62,45,64,43],[62,46,64,44,"friendRequestCount"],[62,64,64,62],[62,67,64,65],[62,68,64,66],[63,6,65,4],[63,7,65,5],[63,8,65,6],[63,9,65,7],[64,4,66,2],[64,5,66,3],[65,4,68,2,"setExpoPushToken"],[65,20,68,18],[65,22,68,21,"token"],[65,27,68,41],[65,31,68,46],[66,6,69,4,"set"],[66,9,69,7],[66,10,69,8],[67,8,69,10,"expoPushToken"],[67,21,69,23],[67,23,69,25,"token"],[68,6,69,31],[68,7,69,32],[68,8,69,33],[69,4,70,2],[69,5,70,3],[70,4,72,2,"setPreferences"],[70,18,72,16],[70,20,72,19,"prefs"],[70,25,72,49],[70,29,72,54],[71,6,73,4,"set"],[71,9,73,7],[71,10,73,8],[72,8,73,10,"preferences"],[72,19,73,21],[72,21,73,23,"prefs"],[73,6,73,29],[73,7,73,30],[73,8,73,31],[74,4,74,2],[74,5,74,3],[75,4,76,2,"loadPreferences"],[75,19,76,17],[75,21,76,19],[75,27,76,19,"loadPreferences"],[75,28,76,19],[75,33,76,31],[76,6,77,4],[76,10,77,8],[77,8,78,6],[77,14,78,12,"response"],[77,22,78,20],[77,25,78,23],[77,31,78,29,"api"],[77,34,78,32],[77,35,78,32,"default"],[77,42,78,32],[77,43,78,33,"get"],[77,46,78,36],[77,47,78,37],[77,79,78,69],[77,80,78,70],[78,8,79,6,"set"],[78,11,79,9],[78,12,79,10],[79,10,79,12,"preferences"],[79,21,79,23],[79,23,79,25,"response"],[79,31,79,33],[79,32,79,34,"data"],[80,8,79,39],[80,9,79,40],[80,10,79,41],[81,6,80,4],[81,7,80,5],[81,8,80,6],[81,15,80,13,"error"],[81,20,80,18],[81,22,80,20],[82,8,81,6,"console"],[82,15,81,13],[82,16,81,14,"error"],[82,21,81,19],[82,22,81,20],[82,64,81,62],[82,66,81,64,"error"],[82,71,81,69],[82,72,81,70],[83,6,82,4],[84,4,83,2],[85,2,84,0],[85,3,84,1],[85,4,84,2],[85,5,84,3],[86,0,84,4],[86,3]],"functionMap":{"names":["<global>","create$argument_0","loadFriendRequestCount","response.data.filter$argument_0","loadUnreadMessageCount","resetFriendRequestCount","resetUnreadMessageCount","decrementFriendRequestCount","set$argument_0","setExpoPushToken","setPreferences","loadPreferences"],"mappings":"AAA;8DC0B;0BCW;mDCG,sCD;GDK;0BGE;GHS;2BIE,oCJ;2BKC,oCL;+BME;QCC;MDE;GNC;oBQE;GRE;kBSE;GTE;mBUE;GVO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
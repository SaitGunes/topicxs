{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":99,"column":53,"index":2886},"end":{"line":99,"column":85,"index":2918}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":99,"column":47,"index":2880},"end":{"line":99,"column":85,"index":2918}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear AsyncStorage\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.clear(); // Clear all storage\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":135,"map":[[12,2,33,0,"Object"],[12,8,33,0],[12,9,33,0,"defineProperty"],[12,23,33,0],[12,24,33,0,"exports"],[12,31,33,0],[13,4,33,0,"enumerable"],[13,14,33,0],[14,4,33,0,"get"],[14,7,33,0],[14,18,33,0,"get"],[14,19,33,0],[15,6,33,0],[15,13,33,0,"useAuthStore"],[15,25,33,0],[16,4,33,0],[17,2,33,0],[18,2,127,4],[18,6,127,4,"_expoVirtualEnv"],[18,21,127,4],[18,24,127,4,"require"],[18,31,127,4],[18,32,127,4,"_dependencyMap"],[18,46,127,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_axios"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"axios"],[23,11,3,0],[23,14,3,0,"_interopDefault"],[23,29,3,0],[23,30,3,0,"_axios"],[23,36,3,0],[24,2,5,0],[24,8,5,6,"API_URL"],[24,15,5,13],[24,18,5,13,"_expoVirtualEnv"],[24,33,5,13],[24,34,5,13,"env"],[24,37,5,13],[24,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[24,61,5,51],[25,2,33,7],[25,8,33,13,"useAuthStore"],[25,20,33,25],[25,23,33,28],[25,27,33,28,"create"],[25,35,33,34],[25,36,33,34,"create"],[25,42,33,34],[25,44,33,47,"set"],[25,47,33,50],[25,52,33,56],[26,4,34,2,"user"],[26,8,34,6],[26,10,34,8],[26,14,34,12],[27,4,35,2,"token"],[27,9,35,7],[27,11,35,9],[27,15,35,13],[28,4,36,2,"isLoading"],[28,13,36,11],[28,15,36,13],[28,19,36,17],[29,4,38,2,"loadToken"],[29,13,38,11],[29,15,38,13],[29,21,38,13,"loadToken"],[29,22,38,13],[29,27,38,25],[30,6,39,4],[30,10,39,8],[31,8,40,6],[31,14,40,12,"token"],[31,19,40,17],[31,22,40,20],[31,28,40,26,"AsyncStorage"],[31,40,40,38],[31,41,40,38,"default"],[31,48,40,38],[31,49,40,39,"getItem"],[31,56,40,46],[31,57,40,47],[31,64,40,54],[31,65,40,55],[32,8,41,6],[32,14,41,12,"userData"],[32,22,41,20],[32,25,41,23],[32,31,41,29,"AsyncStorage"],[32,43,41,41],[32,44,41,41,"default"],[32,51,41,41],[32,52,41,42,"getItem"],[32,59,41,49],[32,60,41,50],[32,66,41,56],[32,67,41,57],[33,8,43,6],[33,12,43,10,"token"],[33,17,43,15],[33,21,43,19,"userData"],[33,29,43,27],[33,31,43,29],[34,10,44,8,"set"],[34,13,44,11],[34,14,44,12],[35,12,44,14,"token"],[35,17,44,19],[36,12,44,21,"user"],[36,16,44,25],[36,18,44,27,"JSON"],[36,22,44,31],[36,23,44,32,"parse"],[36,28,44,37],[36,29,44,38,"userData"],[36,37,44,46],[36,38,44,47],[37,12,44,49,"isLoading"],[37,21,44,58],[37,23,44,60],[38,10,44,66],[38,11,44,67],[38,12,44,68],[39,8,45,6],[39,9,45,7],[39,15,45,13],[40,10,46,8,"set"],[40,13,46,11],[40,14,46,12],[41,12,46,14,"isLoading"],[41,21,46,23],[41,23,46,25],[42,10,46,31],[42,11,46,32],[42,12,46,33],[43,8,47,6],[44,6,48,4],[44,7,48,5],[44,8,48,6],[44,15,48,13,"error"],[44,20,48,18],[44,22,48,20],[45,8,49,6,"console"],[45,15,49,13],[45,16,49,14,"error"],[45,21,49,19],[45,22,49,20],[45,41,49,39],[45,43,49,41,"error"],[45,48,49,46],[45,49,49,47],[46,8,50,6,"set"],[46,11,50,9],[46,12,50,10],[47,10,50,12,"isLoading"],[47,19,50,21],[47,21,50,23],[48,8,50,29],[48,9,50,30],[48,10,50,31],[49,6,51,4],[50,4,52,2],[50,5,52,3],[51,4,54,2,"login"],[51,9,54,7],[51,11,54,9],[51,17,54,9,"login"],[51,18,54,16,"username"],[51,26,54,32],[51,28,54,34,"password"],[51,36,54,50],[51,41,54,55],[52,6,55,4],[52,10,55,8],[53,8,56,6],[53,14,56,12,"response"],[53,22,56,20],[53,25,56,23],[53,31,56,29,"axios"],[53,36,56,34],[53,37,56,34,"default"],[53,44,56,34],[53,45,56,35,"post"],[53,49,56,39],[53,50,56,40],[53,53,56,43,"API_URL"],[53,60,56,50],[53,77,56,67],[53,79,56,69],[54,10,57,8,"username"],[54,18,57,16],[55,10,58,8,"password"],[56,8,59,6],[56,9,59,7],[56,10,59,8],[57,8,61,6],[57,14,61,12],[58,10,61,14,"access_token"],[58,22,61,26],[59,10,61,28,"user"],[60,8,61,33],[60,9,61,34],[60,12,61,37,"response"],[60,20,61,45],[60,21,61,46,"data"],[60,25,61,50],[61,8,63,6],[61,14,63,12,"AsyncStorage"],[61,26,63,24],[61,27,63,24,"default"],[61,34,63,24],[61,35,63,25,"setItem"],[61,42,63,32],[61,43,63,33],[61,50,63,40],[61,52,63,42,"access_token"],[61,64,63,54],[61,65,63,55],[62,8,64,6],[62,14,64,12,"AsyncStorage"],[62,26,64,24],[62,27,64,24,"default"],[62,34,64,24],[62,35,64,25,"setItem"],[62,42,64,32],[62,43,64,33],[62,49,64,39],[62,51,64,41,"JSON"],[62,55,64,45],[62,56,64,46,"stringify"],[62,65,64,55],[62,66,64,56,"user"],[62,70,64,60],[62,71,64,61],[62,72,64,62],[63,8,66,6,"set"],[63,11,66,9],[63,12,66,10],[64,10,66,12,"user"],[64,14,66,16],[65,10,66,18,"token"],[65,15,66,23],[65,17,66,25,"access_token"],[66,8,66,38],[66,9,66,39],[66,10,66,40],[67,6,67,4],[67,7,67,5],[67,8,67,6],[67,15,67,13,"error"],[67,20,67,23],[67,22,67,25],[68,8,68,6],[68,14,68,12],[68,18,68,16,"Error"],[68,23,68,21],[68,24,68,22,"error"],[68,29,68,27],[68,30,68,28,"response"],[68,38,68,36],[68,40,68,38,"data"],[68,44,68,42],[68,46,68,44,"detail"],[68,52,68,50],[68,56,68,54],[68,70,68,68],[68,71,68,69],[69,6,69,4],[70,4,70,2],[70,5,70,3],[71,4,72,2,"register"],[71,12,72,10],[71,14,72,12],[71,20,72,12,"register"],[71,21,72,19,"username"],[71,29,72,35],[71,31,72,37,"email"],[71,36,72,50],[71,38,72,52,"password"],[71,46,72,68],[71,48,72,70,"full_name"],[71,57,72,87],[71,59,72,89,"referral_code"],[71,72,72,111],[71,74,72,113,"user_type"],[71,83,72,131],[71,85,72,133,"phone_number"],[71,97,72,154],[71,102,72,159],[72,6,73,4],[72,10,73,8],[73,8,74,6],[73,14,74,12,"response"],[73,22,74,20],[73,25,74,23],[73,31,74,29,"axios"],[73,36,74,34],[73,37,74,34,"default"],[73,44,74,34],[73,45,74,35,"post"],[73,49,74,39],[73,50,74,40],[73,53,74,43,"API_URL"],[73,60,74,50],[73,80,74,70],[73,82,74,72],[74,10,75,8,"username"],[74,18,75,16],[75,10,76,8,"email"],[75,15,76,13],[76,10,77,8,"password"],[76,18,77,16],[77,10,78,8,"full_name"],[77,19,78,17],[78,10,79,8,"referral_code"],[78,23,79,21],[78,25,79,23,"referral_code"],[78,38,79,36],[78,42,79,40,"undefined"],[78,51,79,49],[79,10,80,8,"user_type"],[79,19,80,17],[79,21,80,19,"user_type"],[79,30,80,28],[79,34,80,32],[79,42,80,40],[80,10,81,8,"phone_number"],[80,22,81,20],[80,24,81,22,"phone_number"],[80,36,81,34],[80,40,81,38,"undefined"],[81,8,82,6],[81,9,82,7],[81,10,82,8],[82,8,84,6],[82,14,84,12],[83,10,84,14,"access_token"],[83,22,84,26],[84,10,84,28,"user"],[85,8,84,33],[85,9,84,34],[85,12,84,37,"response"],[85,20,84,45],[85,21,84,46,"data"],[85,25,84,50],[86,8,86,6],[86,14,86,12,"AsyncStorage"],[86,26,86,24],[86,27,86,24,"default"],[86,34,86,24],[86,35,86,25,"setItem"],[86,42,86,32],[86,43,86,33],[86,50,86,40],[86,52,86,42,"access_token"],[86,64,86,54],[86,65,86,55],[87,8,87,6],[87,14,87,12,"AsyncStorage"],[87,26,87,24],[87,27,87,24,"default"],[87,34,87,24],[87,35,87,25,"setItem"],[87,42,87,32],[87,43,87,33],[87,49,87,39],[87,51,87,41,"JSON"],[87,55,87,45],[87,56,87,46,"stringify"],[87,65,87,55],[87,66,87,56,"user"],[87,70,87,60],[87,71,87,61],[87,72,87,62],[88,8,89,6,"set"],[88,11,89,9],[88,12,89,10],[89,10,89,12,"user"],[89,14,89,16],[90,10,89,18,"token"],[90,15,89,23],[90,17,89,25,"access_token"],[91,8,89,38],[91,9,89,39],[91,10,89,40],[92,6,90,4],[92,7,90,5],[92,8,90,6],[92,15,90,13,"error"],[92,20,90,23],[92,22,90,25],[93,8,91,6],[93,14,91,12],[93,18,91,16,"Error"],[93,23,91,21],[93,24,91,22,"error"],[93,29,91,27],[93,30,91,28,"response"],[93,38,91,36],[93,40,91,38,"data"],[93,44,91,42],[93,46,91,44,"detail"],[93,52,91,50],[93,56,91,54],[93,77,91,75],[93,78,91,76],[94,6,92,4],[95,4,93,2],[95,5,93,3],[96,4,95,2,"logout"],[96,10,95,8],[96,12,95,10],[96,18,95,10,"logout"],[96,19,95,10],[96,24,95,22],[97,6,96,4],[97,10,96,8],[98,8,97,6],[99,8,98,6],[99,12,98,10],[100,10,99,8],[100,16,99,14],[101,12,99,16,"removePushTokenFromBackend"],[102,10,99,43],[102,11,99,44],[102,14,99,47],[102,20,99,47,"require"],[102,27,99,47],[102,28,99,47,"_dependencyMap"],[102,42,99,47],[102,85,99,47,"_dependencyMap"],[102,99,99,47],[102,104,99,47,"_dependencyMap"],[102,118,99,47],[102,119,99,47,"paths"],[102,124,99,47],[102,151,99,85],[103,10,100,8],[103,16,100,14,"removePushTokenFromBackend"],[103,42,100,40],[103,43,100,41],[103,44,100,42],[104,8,101,6],[104,9,101,7],[104,10,101,8],[104,17,101,15,"error"],[104,22,101,20],[104,24,101,22],[105,10,102,8,"console"],[105,17,102,15],[105,18,102,16,"error"],[105,23,102,21],[105,24,102,22],[105,52,102,50],[105,54,102,52,"error"],[105,59,102,57],[105,60,102,58],[106,8,103,6],[108,8,105,6],[109,8,106,6],[109,14,106,12,"AsyncStorage"],[109,26,106,24],[109,27,106,24,"default"],[109,34,106,24],[109,35,106,25,"removeItem"],[109,45,106,35],[109,46,106,36],[109,53,106,43],[109,54,106,44],[110,8,107,6],[110,14,107,12,"AsyncStorage"],[110,26,107,24],[110,27,107,24,"default"],[110,34,107,24],[110,35,107,25,"removeItem"],[110,45,107,35],[110,46,107,36],[110,52,107,42],[110,53,107,43],[111,8,108,6],[111,14,108,12,"AsyncStorage"],[111,26,108,24],[111,27,108,24,"default"],[111,34,108,24],[111,35,108,25,"clear"],[111,40,108,30],[111,41,108,31],[111,42,108,32],[111,43,108,33],[111,44,108,34],[113,8,110,6],[114,8,111,6,"set"],[114,11,111,9],[114,12,111,10],[115,10,111,12,"user"],[115,14,111,16],[115,16,111,18],[115,20,111,22],[116,10,111,24,"token"],[116,15,111,29],[116,17,111,31],[116,21,111,35],[117,10,111,37,"isLoading"],[117,19,111,46],[117,21,111,48],[118,8,111,54],[118,9,111,55],[118,10,111,56],[119,8,113,6,"console"],[119,15,113,13],[119,16,113,14,"log"],[119,19,113,17],[119,20,113,18],[119,39,113,37],[119,40,113,38],[120,6,114,4],[120,7,114,5],[120,8,114,6],[120,15,114,13,"error"],[120,20,114,18],[120,22,114,20],[121,8,115,6,"console"],[121,15,115,13],[121,16,115,14,"error"],[121,21,115,19],[121,22,115,20],[121,37,115,35],[121,39,115,37,"error"],[121,44,115,42],[121,45,115,43],[122,6,116,4],[123,4,117,2],[123,5,117,3],[124,4,119,2,"setUser"],[124,11,119,9],[124,13,119,11],[124,19,119,18,"user"],[124,23,119,28],[124,27,119,33],[125,6,120,4],[125,10,120,8],[126,8,121,6],[126,14,121,12,"AsyncStorage"],[126,26,121,24],[126,27,121,24,"default"],[126,34,121,24],[126,35,121,25,"setItem"],[126,42,121,32],[126,43,121,33],[126,49,121,39],[126,51,121,41,"JSON"],[126,55,121,45],[126,56,121,46,"stringify"],[126,65,121,55],[126,66,121,56,"user"],[126,70,121,60],[126,71,121,61],[126,72,121,62],[127,8,122,6,"set"],[127,11,122,9],[127,12,122,10],[128,10,122,12,"user"],[129,8,122,17],[129,9,122,18],[129,10,122,19],[130,6,123,4],[130,7,123,5],[130,8,123,6],[130,15,123,13,"error"],[130,20,123,18],[130,22,123,20],[131,8,124,6,"console"],[131,15,124,13],[131,16,124,14,"error"],[131,21,124,19],[131,22,124,20],[131,39,124,37],[131,41,124,39,"error"],[131,46,124,44],[131,47,124,45],[132,6,125,4],[133,4,126,2],[134,2,127,0],[134,3,127,1],[134,4,127,2],[134,5,127,3],[135,0,127,4],[135,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CCgC;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJsB;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
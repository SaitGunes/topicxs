{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/clearCache","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":52,"index":183}}],"key":"V3KNYr0/rs2EUk905GBiQx9TVL8=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":110,"column":53,"index":3222},"end":{"line":110,"column":85,"index":3254}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":110,"column":47,"index":3216},"end":{"line":110,"column":85,"index":3254}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsClearCache = require(_dependencyMap[4], \"../utils/clearCache\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[6], \"expo/internal/async-require-module\")(_dependencyMap[5], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear all cache including Expo cache\n        await (0, _utilsClearCache.clearAllCache)();\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful - all cache cleared');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":134,"map":[[12,2,44,0,"Object"],[12,8,44,0],[12,9,44,0,"defineProperty"],[12,23,44,0],[12,24,44,0,"exports"],[12,31,44,0],[13,4,44,0,"enumerable"],[13,14,44,0],[14,4,44,0,"get"],[14,7,44,0],[14,18,44,0,"get"],[14,19,44,0],[15,6,44,0],[15,13,44,0,"useAuthStore"],[15,25,44,0],[16,4,44,0],[17,2,44,0],[18,2,136,4],[18,6,136,4,"_expoVirtualEnv"],[18,21,136,4],[18,24,136,4,"require"],[18,31,136,4],[18,32,136,4,"_dependencyMap"],[18,46,136,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_axios"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"axios"],[23,11,3,0],[23,14,3,0,"_interopDefault"],[23,29,3,0],[23,30,3,0,"_axios"],[23,36,3,0],[24,2,4,0],[24,6,4,0,"_utilsClearCache"],[24,22,4,0],[24,25,4,0,"require"],[24,32,4,0],[24,33,4,0,"_dependencyMap"],[24,47,4,0],[25,2,6,0],[25,8,6,6,"API_URL"],[25,15,6,13],[25,18,6,13,"_expoVirtualEnv"],[25,33,6,13],[25,34,6,13,"env"],[25,37,6,13],[25,38,6,13,"EXPO_PUBLIC_BACKEND_URL"],[25,61,6,51],[26,2,44,7],[26,8,44,13,"useAuthStore"],[26,20,44,25],[26,23,44,28],[26,27,44,28,"create"],[26,35,44,34],[26,36,44,34,"create"],[26,42,44,34],[26,44,44,47,"set"],[26,47,44,50],[26,52,44,56],[27,4,45,2,"user"],[27,8,45,6],[27,10,45,8],[27,14,45,12],[28,4,46,2,"token"],[28,9,46,7],[28,11,46,9],[28,15,46,13],[29,4,47,2,"isLoading"],[29,13,47,11],[29,15,47,13],[29,19,47,17],[30,4,49,2,"loadToken"],[30,13,49,11],[30,15,49,13],[30,21,49,13,"loadToken"],[30,22,49,13],[30,27,49,25],[31,6,50,4],[31,10,50,8],[32,8,51,6],[32,14,51,12,"token"],[32,19,51,17],[32,22,51,20],[32,28,51,26,"AsyncStorage"],[32,40,51,38],[32,41,51,38,"default"],[32,48,51,38],[32,49,51,39,"getItem"],[32,56,51,46],[32,57,51,47],[32,64,51,54],[32,65,51,55],[33,8,52,6],[33,14,52,12,"userData"],[33,22,52,20],[33,25,52,23],[33,31,52,29,"AsyncStorage"],[33,43,52,41],[33,44,52,41,"default"],[33,51,52,41],[33,52,52,42,"getItem"],[33,59,52,49],[33,60,52,50],[33,66,52,56],[33,67,52,57],[34,8,54,6],[34,12,54,10,"token"],[34,17,54,15],[34,21,54,19,"userData"],[34,29,54,27],[34,31,54,29],[35,10,55,8,"set"],[35,13,55,11],[35,14,55,12],[36,12,55,14,"token"],[36,17,55,19],[37,12,55,21,"user"],[37,16,55,25],[37,18,55,27,"JSON"],[37,22,55,31],[37,23,55,32,"parse"],[37,28,55,37],[37,29,55,38,"userData"],[37,37,55,46],[37,38,55,47],[38,12,55,49,"isLoading"],[38,21,55,58],[38,23,55,60],[39,10,55,66],[39,11,55,67],[39,12,55,68],[40,8,56,6],[40,9,56,7],[40,15,56,13],[41,10,57,8,"set"],[41,13,57,11],[41,14,57,12],[42,12,57,14,"isLoading"],[42,21,57,23],[42,23,57,25],[43,10,57,31],[43,11,57,32],[43,12,57,33],[44,8,58,6],[45,6,59,4],[45,7,59,5],[45,8,59,6],[45,15,59,13,"error"],[45,20,59,18],[45,22,59,20],[46,8,60,6,"console"],[46,15,60,13],[46,16,60,14,"error"],[46,21,60,19],[46,22,60,20],[46,41,60,39],[46,43,60,41,"error"],[46,48,60,46],[46,49,60,47],[47,8,61,6,"set"],[47,11,61,9],[47,12,61,10],[48,10,61,12,"isLoading"],[48,19,61,21],[48,21,61,23],[49,8,61,29],[49,9,61,30],[49,10,61,31],[50,6,62,4],[51,4,63,2],[51,5,63,3],[52,4,65,2,"login"],[52,9,65,7],[52,11,65,9],[52,17,65,9,"login"],[52,18,65,16,"username"],[52,26,65,32],[52,28,65,34,"password"],[52,36,65,50],[52,41,65,55],[53,6,66,4],[53,10,66,8],[54,8,67,6],[54,14,67,12,"response"],[54,22,67,20],[54,25,67,23],[54,31,67,29,"axios"],[54,36,67,34],[54,37,67,34,"default"],[54,44,67,34],[54,45,67,35,"post"],[54,49,67,39],[54,50,67,40],[54,53,67,43,"API_URL"],[54,60,67,50],[54,77,67,67],[54,79,67,69],[55,10,68,8,"username"],[55,18,68,16],[56,10,69,8,"password"],[57,8,70,6],[57,9,70,7],[57,10,70,8],[58,8,72,6],[58,14,72,12],[59,10,72,14,"access_token"],[59,22,72,26],[60,10,72,28,"user"],[61,8,72,33],[61,9,72,34],[61,12,72,37,"response"],[61,20,72,45],[61,21,72,46,"data"],[61,25,72,50],[62,8,74,6],[62,14,74,12,"AsyncStorage"],[62,26,74,24],[62,27,74,24,"default"],[62,34,74,24],[62,35,74,25,"setItem"],[62,42,74,32],[62,43,74,33],[62,50,74,40],[62,52,74,42,"access_token"],[62,64,74,54],[62,65,74,55],[63,8,75,6],[63,14,75,12,"AsyncStorage"],[63,26,75,24],[63,27,75,24,"default"],[63,34,75,24],[63,35,75,25,"setItem"],[63,42,75,32],[63,43,75,33],[63,49,75,39],[63,51,75,41,"JSON"],[63,55,75,45],[63,56,75,46,"stringify"],[63,65,75,55],[63,66,75,56,"user"],[63,70,75,60],[63,71,75,61],[63,72,75,62],[64,8,77,6,"set"],[64,11,77,9],[64,12,77,10],[65,10,77,12,"user"],[65,14,77,16],[66,10,77,18,"token"],[66,15,77,23],[66,17,77,25,"access_token"],[67,8,77,38],[67,9,77,39],[67,10,77,40],[68,6,78,4],[68,7,78,5],[68,8,78,6],[68,15,78,13,"error"],[68,20,78,23],[68,22,78,25],[69,8,79,6],[69,14,79,12],[69,18,79,16,"Error"],[69,23,79,21],[69,24,79,22,"error"],[69,29,79,27],[69,30,79,28,"response"],[69,38,79,36],[69,40,79,38,"data"],[69,44,79,42],[69,46,79,44,"detail"],[69,52,79,50],[69,56,79,54],[69,70,79,68],[69,71,79,69],[70,6,80,4],[71,4,81,2],[71,5,81,3],[72,4,83,2,"register"],[72,12,83,10],[72,14,83,12],[72,20,83,12,"register"],[72,21,83,19,"username"],[72,29,83,35],[72,31,83,37,"email"],[72,36,83,50],[72,38,83,52,"password"],[72,46,83,68],[72,48,83,70,"full_name"],[72,57,83,87],[72,59,83,89,"referral_code"],[72,72,83,111],[72,74,83,113,"user_type"],[72,83,83,131],[72,85,83,133,"phone_number"],[72,97,83,154],[72,102,83,159],[73,6,84,4],[73,10,84,8],[74,8,85,6],[74,14,85,12,"response"],[74,22,85,20],[74,25,85,23],[74,31,85,29,"axios"],[74,36,85,34],[74,37,85,34,"default"],[74,44,85,34],[74,45,85,35,"post"],[74,49,85,39],[74,50,85,40],[74,53,85,43,"API_URL"],[74,60,85,50],[74,80,85,70],[74,82,85,72],[75,10,86,8,"username"],[75,18,86,16],[76,10,87,8,"email"],[76,15,87,13],[77,10,88,8,"password"],[77,18,88,16],[78,10,89,8,"full_name"],[78,19,89,17],[79,10,90,8,"referral_code"],[79,23,90,21],[79,25,90,23,"referral_code"],[79,38,90,36],[79,42,90,40,"undefined"],[79,51,90,49],[80,10,91,8,"user_type"],[80,19,91,17],[80,21,91,19,"user_type"],[80,30,91,28],[80,34,91,32],[80,42,91,40],[81,10,92,8,"phone_number"],[81,22,92,20],[81,24,92,22,"phone_number"],[81,36,92,34],[81,40,92,38,"undefined"],[82,8,93,6],[82,9,93,7],[82,10,93,8],[83,8,95,6],[83,14,95,12],[84,10,95,14,"access_token"],[84,22,95,26],[85,10,95,28,"user"],[86,8,95,33],[86,9,95,34],[86,12,95,37,"response"],[86,20,95,45],[86,21,95,46,"data"],[86,25,95,50],[87,8,97,6],[87,14,97,12,"AsyncStorage"],[87,26,97,24],[87,27,97,24,"default"],[87,34,97,24],[87,35,97,25,"setItem"],[87,42,97,32],[87,43,97,33],[87,50,97,40],[87,52,97,42,"access_token"],[87,64,97,54],[87,65,97,55],[88,8,98,6],[88,14,98,12,"AsyncStorage"],[88,26,98,24],[88,27,98,24,"default"],[88,34,98,24],[88,35,98,25,"setItem"],[88,42,98,32],[88,43,98,33],[88,49,98,39],[88,51,98,41,"JSON"],[88,55,98,45],[88,56,98,46,"stringify"],[88,65,98,55],[88,66,98,56,"user"],[88,70,98,60],[88,71,98,61],[88,72,98,62],[89,8,100,6,"set"],[89,11,100,9],[89,12,100,10],[90,10,100,12,"user"],[90,14,100,16],[91,10,100,18,"token"],[91,15,100,23],[91,17,100,25,"access_token"],[92,8,100,38],[92,9,100,39],[92,10,100,40],[93,6,101,4],[93,7,101,5],[93,8,101,6],[93,15,101,13,"error"],[93,20,101,23],[93,22,101,25],[94,8,102,6],[94,14,102,12],[94,18,102,16,"Error"],[94,23,102,21],[94,24,102,22,"error"],[94,29,102,27],[94,30,102,28,"response"],[94,38,102,36],[94,40,102,38,"data"],[94,44,102,42],[94,46,102,44,"detail"],[94,52,102,50],[94,56,102,54],[94,77,102,75],[94,78,102,76],[95,6,103,4],[96,4,104,2],[96,5,104,3],[97,4,106,2,"logout"],[97,10,106,8],[97,12,106,10],[97,18,106,10,"logout"],[97,19,106,10],[97,24,106,22],[98,6,107,4],[98,10,107,8],[99,8,108,6],[100,8,109,6],[100,12,109,10],[101,10,110,8],[101,16,110,14],[102,12,110,16,"removePushTokenFromBackend"],[103,10,110,43],[103,11,110,44],[103,14,110,47],[103,20,110,47,"require"],[103,27,110,47],[103,28,110,47,"_dependencyMap"],[103,42,110,47],[103,85,110,47,"_dependencyMap"],[103,99,110,47],[103,104,110,47,"_dependencyMap"],[103,118,110,47],[103,119,110,47,"paths"],[103,124,110,47],[103,151,110,85],[104,10,111,8],[104,16,111,14,"removePushTokenFromBackend"],[104,42,111,40],[104,43,111,41],[104,44,111,42],[105,8,112,6],[105,9,112,7],[105,10,112,8],[105,17,112,15,"error"],[105,22,112,20],[105,24,112,22],[106,10,113,8,"console"],[106,17,113,15],[106,18,113,16,"error"],[106,23,113,21],[106,24,113,22],[106,52,113,50],[106,54,113,52,"error"],[106,59,113,57],[106,60,113,58],[107,8,114,6],[109,8,116,6],[110,8,117,6],[110,14,117,12],[110,18,117,12,"clearAllCache"],[110,34,117,25],[110,35,117,25,"clearAllCache"],[110,48,117,25],[110,50,117,26],[110,51,117,27],[112,8,119,6],[113,8,120,6,"set"],[113,11,120,9],[113,12,120,10],[114,10,120,12,"user"],[114,14,120,16],[114,16,120,18],[114,20,120,22],[115,10,120,24,"token"],[115,15,120,29],[115,17,120,31],[115,21,120,35],[116,10,120,37,"isLoading"],[116,19,120,46],[116,21,120,48],[117,8,120,54],[117,9,120,55],[117,10,120,56],[118,8,122,6,"console"],[118,15,122,13],[118,16,122,14,"log"],[118,19,122,17],[118,20,122,18],[118,59,122,57],[118,60,122,58],[119,6,123,4],[119,7,123,5],[119,8,123,6],[119,15,123,13,"error"],[119,20,123,18],[119,22,123,20],[120,8,124,6,"console"],[120,15,124,13],[120,16,124,14,"error"],[120,21,124,19],[120,22,124,20],[120,37,124,35],[120,39,124,37,"error"],[120,44,124,42],[120,45,124,43],[121,6,125,4],[122,4,126,2],[122,5,126,3],[123,4,128,2,"setUser"],[123,11,128,9],[123,13,128,11],[123,19,128,18,"user"],[123,23,128,28],[123,27,128,33],[124,6,129,4],[124,10,129,8],[125,8,130,6],[125,14,130,12,"AsyncStorage"],[125,26,130,24],[125,27,130,24,"default"],[125,34,130,24],[125,35,130,25,"setItem"],[125,42,130,32],[125,43,130,33],[125,49,130,39],[125,51,130,41,"JSON"],[125,55,130,45],[125,56,130,46,"stringify"],[125,65,130,55],[125,66,130,56,"user"],[125,70,130,60],[125,71,130,61],[125,72,130,62],[126,8,131,6,"set"],[126,11,131,9],[126,12,131,10],[127,10,131,12,"user"],[128,8,131,17],[128,9,131,18],[128,10,131,19],[129,6,132,4],[129,7,132,5],[129,8,132,6],[129,15,132,13,"error"],[129,20,132,18],[129,22,132,20],[130,8,133,6,"console"],[130,15,133,13],[130,16,133,14,"error"],[130,21,133,19],[130,22,133,20],[130,39,133,37],[130,41,133,39,"error"],[130,46,133,44],[130,47,133,45],[131,6,134,4],[132,4,135,2],[133,2,136,0],[133,3,136,1],[133,4,136,2],[133,5,136,3],[134,0,136,4],[134,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC2C;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJoB;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/clearCache","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":131},"end":{"line":4,"column":52,"index":183}}],"key":"V3KNYr0/rs2EUk905GBiQx9TVL8=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":118,"column":53,"index":3546},"end":{"line":118,"column":85,"index":3578}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":118,"column":47,"index":3540},"end":{"line":118,"column":85,"index":3578}},{"start":{"line":126,"column":35,"index":3802},"end":{"line":126,"column":64,"index":3831}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":2}},{"name":"./sectorStore","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":126,"column":41,"index":3808},"end":{"line":126,"column":64,"index":3831}}],"key":"VqOdxAU6K3p132ZZWc8ahloag9E=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsClearCache = require(_dependencyMap[4], \"../utils/clearCache\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password, current_sector = 'drivers') => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password,\n          current_sector\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[6], \"expo/internal/async-require-module\")(_dependencyMap[5], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear sector selection\n        try {\n          const {\n            useSectorStore\n          } = await require(_dependencyMap[6], \"expo/internal/async-require-module\")(_dependencyMap[7], _dependencyMap.paths, \"./sectorStore\");\n          await useSectorStore.getState().clearSector();\n        } catch (error) {\n          console.error('Error clearing sector:', error);\n        }\n\n        // Clear all cache including Expo cache\n        await (0, _utilsClearCache.clearAllCache)();\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful - all cache cleared');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":145,"map":[[12,2,51,0,"Object"],[12,8,51,0],[12,9,51,0,"defineProperty"],[12,23,51,0],[12,24,51,0,"exports"],[12,31,51,0],[13,4,51,0,"enumerable"],[13,14,51,0],[14,4,51,0,"get"],[14,7,51,0],[14,18,51,0,"get"],[14,19,51,0],[15,6,51,0],[15,13,51,0,"useAuthStore"],[15,25,51,0],[16,4,51,0],[17,2,51,0],[18,2,152,4],[18,6,152,4,"_expoVirtualEnv"],[18,21,152,4],[18,24,152,4,"require"],[18,31,152,4],[18,32,152,4,"_dependencyMap"],[18,46,152,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_axios"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"axios"],[23,11,3,0],[23,14,3,0,"_interopDefault"],[23,29,3,0],[23,30,3,0,"_axios"],[23,36,3,0],[24,2,4,0],[24,6,4,0,"_utilsClearCache"],[24,22,4,0],[24,25,4,0,"require"],[24,32,4,0],[24,33,4,0,"_dependencyMap"],[24,47,4,0],[25,2,6,0],[25,8,6,6,"API_URL"],[25,15,6,13],[25,18,6,13,"_expoVirtualEnv"],[25,33,6,13],[25,34,6,13,"env"],[25,37,6,13],[25,38,6,13,"EXPO_PUBLIC_BACKEND_URL"],[25,61,6,51],[26,2,51,7],[26,8,51,13,"useAuthStore"],[26,20,51,25],[26,23,51,28],[26,27,51,28,"create"],[26,35,51,34],[26,36,51,34,"create"],[26,42,51,34],[26,44,51,47,"set"],[26,47,51,50],[26,52,51,56],[27,4,52,2,"user"],[27,8,52,6],[27,10,52,8],[27,14,52,12],[28,4,53,2,"token"],[28,9,53,7],[28,11,53,9],[28,15,53,13],[29,4,54,2,"isLoading"],[29,13,54,11],[29,15,54,13],[29,19,54,17],[30,4,56,2,"loadToken"],[30,13,56,11],[30,15,56,13],[30,21,56,13,"loadToken"],[30,22,56,13],[30,27,56,25],[31,6,57,4],[31,10,57,8],[32,8,58,6],[32,14,58,12,"token"],[32,19,58,17],[32,22,58,20],[32,28,58,26,"AsyncStorage"],[32,40,58,38],[32,41,58,38,"default"],[32,48,58,38],[32,49,58,39,"getItem"],[32,56,58,46],[32,57,58,47],[32,64,58,54],[32,65,58,55],[33,8,59,6],[33,14,59,12,"userData"],[33,22,59,20],[33,25,59,23],[33,31,59,29,"AsyncStorage"],[33,43,59,41],[33,44,59,41,"default"],[33,51,59,41],[33,52,59,42,"getItem"],[33,59,59,49],[33,60,59,50],[33,66,59,56],[33,67,59,57],[34,8,61,6],[34,12,61,10,"token"],[34,17,61,15],[34,21,61,19,"userData"],[34,29,61,27],[34,31,61,29],[35,10,62,8,"set"],[35,13,62,11],[35,14,62,12],[36,12,62,14,"token"],[36,17,62,19],[37,12,62,21,"user"],[37,16,62,25],[37,18,62,27,"JSON"],[37,22,62,31],[37,23,62,32,"parse"],[37,28,62,37],[37,29,62,38,"userData"],[37,37,62,46],[37,38,62,47],[38,12,62,49,"isLoading"],[38,21,62,58],[38,23,62,60],[39,10,62,66],[39,11,62,67],[39,12,62,68],[40,8,63,6],[40,9,63,7],[40,15,63,13],[41,10,64,8,"set"],[41,13,64,11],[41,14,64,12],[42,12,64,14,"isLoading"],[42,21,64,23],[42,23,64,25],[43,10,64,31],[43,11,64,32],[43,12,64,33],[44,8,65,6],[45,6,66,4],[45,7,66,5],[45,8,66,6],[45,15,66,13,"error"],[45,20,66,18],[45,22,66,20],[46,8,67,6,"console"],[46,15,67,13],[46,16,67,14,"error"],[46,21,67,19],[46,22,67,20],[46,41,67,39],[46,43,67,41,"error"],[46,48,67,46],[46,49,67,47],[47,8,68,6,"set"],[47,11,68,9],[47,12,68,10],[48,10,68,12,"isLoading"],[48,19,68,21],[48,21,68,23],[49,8,68,29],[49,9,68,30],[49,10,68,31],[50,6,69,4],[51,4,70,2],[51,5,70,3],[52,4,72,2,"login"],[52,9,72,7],[52,11,72,9],[52,17,72,9,"login"],[52,18,72,16,"username"],[52,26,72,32],[52,28,72,34,"password"],[52,36,72,50],[52,38,72,52,"current_sector"],[52,52,72,74],[52,55,72,77],[52,64,72,86],[52,69,72,91],[53,6,73,4],[53,10,73,8],[54,8,74,6],[54,14,74,12,"response"],[54,22,74,20],[54,25,74,23],[54,31,74,29,"axios"],[54,36,74,34],[54,37,74,34,"default"],[54,44,74,34],[54,45,74,35,"post"],[54,49,74,39],[54,50,74,40],[54,53,74,43,"API_URL"],[54,60,74,50],[54,77,74,67],[54,79,74,69],[55,10,75,8,"username"],[55,18,75,16],[56,10,76,8,"password"],[56,18,76,16],[57,10,77,8,"current_sector"],[58,8,78,6],[58,9,78,7],[58,10,78,8],[59,8,80,6],[59,14,80,12],[60,10,80,14,"access_token"],[60,22,80,26],[61,10,80,28,"user"],[62,8,80,33],[62,9,80,34],[62,12,80,37,"response"],[62,20,80,45],[62,21,80,46,"data"],[62,25,80,50],[63,8,82,6],[63,14,82,12,"AsyncStorage"],[63,26,82,24],[63,27,82,24,"default"],[63,34,82,24],[63,35,82,25,"setItem"],[63,42,82,32],[63,43,82,33],[63,50,82,40],[63,52,82,42,"access_token"],[63,64,82,54],[63,65,82,55],[64,8,83,6],[64,14,83,12,"AsyncStorage"],[64,26,83,24],[64,27,83,24,"default"],[64,34,83,24],[64,35,83,25,"setItem"],[64,42,83,32],[64,43,83,33],[64,49,83,39],[64,51,83,41,"JSON"],[64,55,83,45],[64,56,83,46,"stringify"],[64,65,83,55],[64,66,83,56,"user"],[64,70,83,60],[64,71,83,61],[64,72,83,62],[65,8,85,6,"set"],[65,11,85,9],[65,12,85,10],[66,10,85,12,"user"],[66,14,85,16],[67,10,85,18,"token"],[67,15,85,23],[67,17,85,25,"access_token"],[68,8,85,38],[68,9,85,39],[68,10,85,40],[69,6,86,4],[69,7,86,5],[69,8,86,6],[69,15,86,13,"error"],[69,20,86,23],[69,22,86,25],[70,8,87,6],[70,14,87,12],[70,18,87,16,"Error"],[70,23,87,21],[70,24,87,22,"error"],[70,29,87,27],[70,30,87,28,"response"],[70,38,87,36],[70,40,87,38,"data"],[70,44,87,42],[70,46,87,44,"detail"],[70,52,87,50],[70,56,87,54],[70,70,87,68],[70,71,87,69],[71,6,88,4],[72,4,89,2],[72,5,89,3],[73,4,91,2,"register"],[73,12,91,10],[73,14,91,12],[73,20,91,12,"register"],[73,21,91,19,"username"],[73,29,91,35],[73,31,91,37,"email"],[73,36,91,50],[73,38,91,52,"password"],[73,46,91,68],[73,48,91,70,"full_name"],[73,57,91,87],[73,59,91,89,"referral_code"],[73,72,91,111],[73,74,91,113,"user_type"],[73,83,91,131],[73,85,91,133,"phone_number"],[73,97,91,154],[73,102,91,159],[74,6,92,4],[74,10,92,8],[75,8,93,6],[75,14,93,12,"response"],[75,22,93,20],[75,25,93,23],[75,31,93,29,"axios"],[75,36,93,34],[75,37,93,34,"default"],[75,44,93,34],[75,45,93,35,"post"],[75,49,93,39],[75,50,93,40],[75,53,93,43,"API_URL"],[75,60,93,50],[75,80,93,70],[75,82,93,72],[76,10,94,8,"username"],[76,18,94,16],[77,10,95,8,"email"],[77,15,95,13],[78,10,96,8,"password"],[78,18,96,16],[79,10,97,8,"full_name"],[79,19,97,17],[80,10,98,8,"referral_code"],[80,23,98,21],[80,25,98,23,"referral_code"],[80,38,98,36],[80,42,98,40,"undefined"],[80,51,98,49],[81,10,99,8,"user_type"],[81,19,99,17],[81,21,99,19,"user_type"],[81,30,99,28],[81,34,99,32],[81,42,99,40],[82,10,100,8,"phone_number"],[82,22,100,20],[82,24,100,22,"phone_number"],[82,36,100,34],[82,40,100,38,"undefined"],[83,8,101,6],[83,9,101,7],[83,10,101,8],[84,8,103,6],[84,14,103,12],[85,10,103,14,"access_token"],[85,22,103,26],[86,10,103,28,"user"],[87,8,103,33],[87,9,103,34],[87,12,103,37,"response"],[87,20,103,45],[87,21,103,46,"data"],[87,25,103,50],[88,8,105,6],[88,14,105,12,"AsyncStorage"],[88,26,105,24],[88,27,105,24,"default"],[88,34,105,24],[88,35,105,25,"setItem"],[88,42,105,32],[88,43,105,33],[88,50,105,40],[88,52,105,42,"access_token"],[88,64,105,54],[88,65,105,55],[89,8,106,6],[89,14,106,12,"AsyncStorage"],[89,26,106,24],[89,27,106,24,"default"],[89,34,106,24],[89,35,106,25,"setItem"],[89,42,106,32],[89,43,106,33],[89,49,106,39],[89,51,106,41,"JSON"],[89,55,106,45],[89,56,106,46,"stringify"],[89,65,106,55],[89,66,106,56,"user"],[89,70,106,60],[89,71,106,61],[89,72,106,62],[90,8,108,6,"set"],[90,11,108,9],[90,12,108,10],[91,10,108,12,"user"],[91,14,108,16],[92,10,108,18,"token"],[92,15,108,23],[92,17,108,25,"access_token"],[93,8,108,38],[93,9,108,39],[93,10,108,40],[94,6,109,4],[94,7,109,5],[94,8,109,6],[94,15,109,13,"error"],[94,20,109,23],[94,22,109,25],[95,8,110,6],[95,14,110,12],[95,18,110,16,"Error"],[95,23,110,21],[95,24,110,22,"error"],[95,29,110,27],[95,30,110,28,"response"],[95,38,110,36],[95,40,110,38,"data"],[95,44,110,42],[95,46,110,44,"detail"],[95,52,110,50],[95,56,110,54],[95,77,110,75],[95,78,110,76],[96,6,111,4],[97,4,112,2],[97,5,112,3],[98,4,114,2,"logout"],[98,10,114,8],[98,12,114,10],[98,18,114,10,"logout"],[98,19,114,10],[98,24,114,22],[99,6,115,4],[99,10,115,8],[100,8,116,6],[101,8,117,6],[101,12,117,10],[102,10,118,8],[102,16,118,14],[103,12,118,16,"removePushTokenFromBackend"],[104,10,118,43],[104,11,118,44],[104,14,118,47],[104,20,118,47,"require"],[104,27,118,47],[104,28,118,47,"_dependencyMap"],[104,42,118,47],[104,85,118,47,"_dependencyMap"],[104,99,118,47],[104,104,118,47,"_dependencyMap"],[104,118,118,47],[104,119,118,47,"paths"],[104,124,118,47],[104,151,118,85],[105,10,119,8],[105,16,119,14,"removePushTokenFromBackend"],[105,42,119,40],[105,43,119,41],[105,44,119,42],[106,8,120,6],[106,9,120,7],[106,10,120,8],[106,17,120,15,"error"],[106,22,120,20],[106,24,120,22],[107,10,121,8,"console"],[107,17,121,15],[107,18,121,16,"error"],[107,23,121,21],[107,24,121,22],[107,52,121,50],[107,54,121,52,"error"],[107,59,121,57],[107,60,121,58],[108,8,122,6],[110,8,124,6],[111,8,125,6],[111,12,125,10],[112,10,126,8],[112,16,126,14],[113,12,126,16,"useSectorStore"],[114,10,126,31],[114,11,126,32],[114,14,126,35],[114,20,126,35,"require"],[114,27,126,35],[114,28,126,35,"_dependencyMap"],[114,42,126,35],[114,85,126,35,"_dependencyMap"],[114,99,126,35],[114,104,126,35,"_dependencyMap"],[114,118,126,35],[114,119,126,35,"paths"],[114,124,126,35],[114,142,126,64],[115,10,127,8],[115,16,127,14,"useSectorStore"],[115,30,127,28],[115,31,127,29,"getState"],[115,39,127,37],[115,40,127,38],[115,41,127,39],[115,42,127,40,"clearSector"],[115,53,127,51],[115,54,127,52],[115,55,127,53],[116,8,128,6],[116,9,128,7],[116,10,128,8],[116,17,128,15,"error"],[116,22,128,20],[116,24,128,22],[117,10,129,8,"console"],[117,17,129,15],[117,18,129,16,"error"],[117,23,129,21],[117,24,129,22],[117,48,129,46],[117,50,129,48,"error"],[117,55,129,53],[117,56,129,54],[118,8,130,6],[120,8,132,6],[121,8,133,6],[121,14,133,12],[121,18,133,12,"clearAllCache"],[121,34,133,25],[121,35,133,25,"clearAllCache"],[121,48,133,25],[121,50,133,26],[121,51,133,27],[123,8,135,6],[124,8,136,6,"set"],[124,11,136,9],[124,12,136,10],[125,10,136,12,"user"],[125,14,136,16],[125,16,136,18],[125,20,136,22],[126,10,136,24,"token"],[126,15,136,29],[126,17,136,31],[126,21,136,35],[127,10,136,37,"isLoading"],[127,19,136,46],[127,21,136,48],[128,8,136,54],[128,9,136,55],[128,10,136,56],[129,8,138,6,"console"],[129,15,138,13],[129,16,138,14,"log"],[129,19,138,17],[129,20,138,18],[129,59,138,57],[129,60,138,58],[130,6,139,4],[130,7,139,5],[130,8,139,6],[130,15,139,13,"error"],[130,20,139,18],[130,22,139,20],[131,8,140,6,"console"],[131,15,140,13],[131,16,140,14,"error"],[131,21,140,19],[131,22,140,20],[131,37,140,35],[131,39,140,37,"error"],[131,44,140,42],[131,45,140,43],[132,6,141,4],[133,4,142,2],[133,5,142,3],[134,4,144,2,"setUser"],[134,11,144,9],[134,13,144,11],[134,19,144,18,"user"],[134,23,144,28],[134,27,144,33],[135,6,145,4],[135,10,145,8],[136,8,146,6],[136,14,146,12,"AsyncStorage"],[136,26,146,24],[136,27,146,24,"default"],[136,34,146,24],[136,35,146,25,"setItem"],[136,42,146,32],[136,43,146,33],[136,49,146,39],[136,51,146,41,"JSON"],[136,55,146,45],[136,56,146,46,"stringify"],[136,65,146,55],[136,66,146,56,"user"],[136,70,146,60],[136,71,146,61],[136,72,146,62],[137,8,147,6,"set"],[137,11,147,9],[137,12,147,10],[138,10,147,12,"user"],[139,8,147,17],[139,9,147,18],[139,10,147,19],[140,6,148,4],[140,7,148,5],[140,8,148,6],[140,15,148,13,"error"],[140,20,148,18],[140,22,148,20],[141,8,149,6,"console"],[141,15,149,13],[141,16,149,14,"error"],[141,21,149,19],[141,22,149,20],[141,39,149,37],[141,41,149,39,"error"],[141,46,149,44],[141,47,149,45],[142,6,150,4],[143,4,151,2],[144,2,152,0],[144,3,152,1],[144,4,152,2],[144,5,152,3],[145,0,152,4],[145,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CCkD;aCK;GDc;SEE;GFiB;YGE;GHqB;UIE;GJ4B;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
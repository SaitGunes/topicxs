{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":24,"index":157}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.sendPushTokenToBackend = sendPushTokenToBackend;\n  exports.updateNotificationPreferences = updateNotificationPreferences;\n  exports.removePushTokenFromBackend = removePushTokenFromBackend;\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[1], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _api = require(_dependencyMap[3], \"./api\");\n  var api = _interopDefault(_api);\n  // Configure how notifications should be displayed when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n\n  /**\n   * Register for push notifications and get the Expo Push Token\n   */\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#FF231F7C'\n      });\n    }\n    if (Device.isDevice) {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Failed to get push token for push notification!');\n        return null;\n      }\n      try {\n        const tokenData = await Notifications.getExpoPushTokenAsync({\n          projectId: '97534a80-2fb3-4bbf-a17c-2fccf8f825ba' // Your Expo project ID\n        });\n        token = tokenData.data;\n        console.log('Push token:', token);\n      } catch (error) {\n        // Silent fail - push notifications don't work in Expo Go\n        // They will work in production build\n        console.log('Push notifications not available (Expo Go limitation)');\n        return null;\n      }\n    } else {\n      console.log('Must use physical device for Push Notifications');\n    }\n    return token;\n  }\n\n  /**\n   * Send the push token to backend\n   */\n  async function sendPushTokenToBackend(token) {\n    try {\n      await api.default.post('/api/notifications/register', {\n        token\n      });\n      console.log('Push token registered with backend');\n      return true;\n    } catch (error) {\n      console.error('Failed to register push token with backend:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Update notification preferences on backend\n   */\n  async function updateNotificationPreferences(preferences) {\n    try {\n      await api.default.put('/api/notifications/preferences', preferences);\n      console.log('Notification preferences updated');\n      return true;\n    } catch (error) {\n      console.error('Failed to update notification preferences:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Remove push token from backend (on logout)\n   */\n  async function removePushTokenFromBackend() {\n    try {\n      await api.default.delete('/api/notifications/unregister');\n      console.log('Push token removed from backend');\n      return true;\n    } catch (error) {\n      console.error('Failed to remove push token from backend:', error);\n      return false;\n    }\n  }\n});","lineCount":137,"map":[[27,2,18,0,"exports"],[27,9,18,0],[27,10,18,0,"registerForPushNotificationsAsync"],[27,43,18,0],[27,46,18,0,"registerForPushNotificationsAsync"],[27,79,18,0],[28,2,66,0,"exports"],[28,9,66,0],[28,10,66,0,"sendPushTokenToBackend"],[28,32,66,0],[28,35,66,0,"sendPushTokenToBackend"],[28,57,66,0],[29,2,80,0,"exports"],[29,9,80,0],[29,10,80,0,"updateNotificationPreferences"],[29,39,80,0],[29,42,80,0,"updateNotificationPreferences"],[29,71,80,0],[30,2,99,0,"exports"],[30,9,99,0],[30,10,99,0,"removePushTokenFromBackend"],[30,36,99,0],[30,39,99,0,"removePushTokenFromBackend"],[30,65,99,0],[31,2,1,0],[31,6,1,0,"_expoNotifications"],[31,24,1,0],[31,27,1,0,"require"],[31,34,1,0],[31,35,1,0,"_dependencyMap"],[31,49,1,0],[32,2,1,0],[32,6,1,0,"Notifications"],[32,19,1,0],[32,22,1,0,"_interopNamespace"],[32,39,1,0],[32,40,1,0,"_expoNotifications"],[32,58,1,0],[33,2,2,0],[33,6,2,0,"_expoDevice"],[33,17,2,0],[33,20,2,0,"require"],[33,27,2,0],[33,28,2,0,"_dependencyMap"],[33,42,2,0],[34,2,2,0],[34,6,2,0,"Device"],[34,12,2,0],[34,15,2,0,"_interopNamespace"],[34,32,2,0],[34,33,2,0,"_expoDevice"],[34,44,2,0],[35,2,2,38],[35,6,2,38,"_reactNativeWebDistExportsPlatform"],[35,40,2,38],[35,43,2,38,"require"],[35,50,2,38],[35,51,2,38,"_dependencyMap"],[35,65,2,38],[36,2,2,38],[36,6,2,38,"Platform"],[36,14,2,38],[36,17,2,38,"_interopDefault"],[36,32,2,38],[36,33,2,38,"_reactNativeWebDistExportsPlatform"],[36,67,2,38],[37,2,4,0],[37,6,4,0,"_api"],[37,10,4,0],[37,13,4,0,"require"],[37,20,4,0],[37,21,4,0,"_dependencyMap"],[37,35,4,0],[38,2,4,0],[38,6,4,0,"api"],[38,9,4,0],[38,12,4,0,"_interopDefault"],[38,27,4,0],[38,28,4,0,"_api"],[38,32,4,0],[39,2,6,0],[40,2,7,0,"Notifications"],[40,15,7,13],[40,16,7,14,"setNotificationHandler"],[40,38,7,36],[40,39,7,37],[41,4,8,2,"handleNotification"],[41,22,8,20],[41,24,8,22],[41,30,8,22,"handleNotification"],[41,31,8,22],[41,37,8,35],[42,6,9,4,"shouldShowAlert"],[42,21,9,19],[42,23,9,21],[42,27,9,25],[43,6,10,4,"shouldPlaySound"],[43,21,10,19],[43,23,10,21],[43,27,10,25],[44,6,11,4,"shouldSetBadge"],[44,20,11,18],[44,22,11,20],[45,4,12,2],[45,5,12,3],[46,2,13,0],[46,3,13,1],[46,4,13,2],[48,2,15,0],[49,0,16,0],[50,0,17,0],[51,2,18,7],[51,17,18,22,"registerForPushNotificationsAsync"],[51,50,18,55,"registerForPushNotificationsAsync"],[51,51,18,55],[51,53,18,82],[52,4,19,2],[52,8,19,6,"token"],[52,13,19,11],[52,16,19,14],[52,20,19,18],[53,4,21,2],[53,8,21,6,"Platform"],[53,16,21,14],[53,17,21,14,"default"],[53,24,21,14],[53,25,21,15,"OS"],[53,27,21,17],[53,32,21,22],[53,41,21,31],[53,43,21,33],[54,6,22,4],[54,12,22,10,"Notifications"],[54,25,22,23],[54,26,22,24,"setNotificationChannelAsync"],[54,53,22,51],[54,54,22,52],[54,63,22,61],[54,65,22,63],[55,8,23,6,"name"],[55,12,23,10],[55,14,23,12],[55,23,23,21],[56,8,24,6,"importance"],[56,18,24,16],[56,20,24,18,"Notifications"],[56,33,24,31],[56,34,24,32,"AndroidImportance"],[56,51,24,49],[56,52,24,50,"MAX"],[56,55,24,53],[57,8,25,6,"vibrationPattern"],[57,24,25,22],[57,26,25,24],[57,27,25,25],[57,28,25,26],[57,30,25,28],[57,33,25,31],[57,35,25,33],[57,38,25,36],[57,40,25,38],[57,43,25,41],[57,44,25,42],[58,8,26,6,"lightColor"],[58,18,26,16],[58,20,26,18],[59,6,27,4],[59,7,27,5],[59,8,27,6],[60,4,28,2],[61,4,30,2],[61,8,30,6,"Device"],[61,14,30,12],[61,15,30,13,"isDevice"],[61,23,30,21],[61,25,30,23],[62,6,31,4],[62,12,31,10],[63,8,31,12,"status"],[63,14,31,18],[63,16,31,20,"existingStatus"],[64,6,31,35],[64,7,31,36],[64,10,31,39],[64,16,31,45,"Notifications"],[64,29,31,58],[64,30,31,59,"getPermissionsAsync"],[64,49,31,78],[64,50,31,79],[64,51,31,80],[65,6,32,4],[65,10,32,8,"finalStatus"],[65,21,32,19],[65,24,32,22,"existingStatus"],[65,38,32,36],[66,6,34,4],[66,10,34,8,"existingStatus"],[66,24,34,22],[66,29,34,27],[66,38,34,36],[66,40,34,38],[67,8,35,6],[67,14,35,12],[68,10,35,14,"status"],[69,8,35,21],[69,9,35,22],[69,12,35,25],[69,18,35,31,"Notifications"],[69,31,35,44],[69,32,35,45,"requestPermissionsAsync"],[69,55,35,68],[69,56,35,69],[69,57,35,70],[70,8,36,6,"finalStatus"],[70,19,36,17],[70,22,36,20,"status"],[70,28,36,26],[71,6,37,4],[72,6,39,4],[72,10,39,8,"finalStatus"],[72,21,39,19],[72,26,39,24],[72,35,39,33],[72,37,39,35],[73,8,40,6,"console"],[73,15,40,13],[73,16,40,14,"log"],[73,19,40,17],[73,20,40,18],[73,69,40,67],[73,70,40,68],[74,8,41,6],[74,15,41,13],[74,19,41,17],[75,6,42,4],[76,6,44,4],[76,10,44,8],[77,8,45,6],[77,14,45,12,"tokenData"],[77,23,45,21],[77,26,45,24],[77,32,45,30,"Notifications"],[77,45,45,43],[77,46,45,44,"getExpoPushTokenAsync"],[77,67,45,65],[77,68,45,66],[78,10,46,8,"projectId"],[78,19,46,17],[78,21,46,19],[78,59,46,57],[78,60,46,59],[79,8,47,6],[79,9,47,7],[79,10,47,8],[80,8,48,6,"token"],[80,13,48,11],[80,16,48,14,"tokenData"],[80,25,48,23],[80,26,48,24,"data"],[80,30,48,28],[81,8,49,6,"console"],[81,15,49,13],[81,16,49,14,"log"],[81,19,49,17],[81,20,49,18],[81,33,49,31],[81,35,49,33,"token"],[81,40,49,38],[81,41,49,39],[82,6,50,4],[82,7,50,5],[82,8,50,6],[82,15,50,13,"error"],[82,20,50,18],[82,22,50,20],[83,8,51,6],[84,8,52,6],[85,8,53,6,"console"],[85,15,53,13],[85,16,53,14,"log"],[85,19,53,17],[85,20,53,18],[85,75,53,73],[85,76,53,74],[86,8,54,6],[86,15,54,13],[86,19,54,17],[87,6,55,4],[88,4,56,2],[88,5,56,3],[88,11,56,9],[89,6,57,4,"console"],[89,13,57,11],[89,14,57,12,"log"],[89,17,57,15],[89,18,57,16],[89,67,57,65],[89,68,57,66],[90,4,58,2],[91,4,60,2],[91,11,60,9,"token"],[91,16,60,14],[92,2,61,0],[94,2,63,0],[95,0,64,0],[96,0,65,0],[97,2,66,7],[97,17,66,22,"sendPushTokenToBackend"],[97,39,66,44,"sendPushTokenToBackend"],[97,40,66,45,"token"],[97,45,66,58],[97,47,66,78],[98,4,67,2],[98,8,67,6],[99,6,68,4],[99,12,68,10,"api"],[99,15,68,13],[99,16,68,13,"default"],[99,23,68,13],[99,24,68,14,"post"],[99,28,68,18],[99,29,68,19],[99,58,68,48],[99,60,68,50],[100,8,68,52,"token"],[101,6,68,58],[101,7,68,59],[101,8,68,60],[102,6,69,4,"console"],[102,13,69,11],[102,14,69,12,"log"],[102,17,69,15],[102,18,69,16],[102,54,69,52],[102,55,69,53],[103,6,70,4],[103,13,70,11],[103,17,70,15],[104,4,71,2],[104,5,71,3],[104,6,71,4],[104,13,71,11,"error"],[104,18,71,16],[104,20,71,18],[105,6,72,4,"console"],[105,13,72,11],[105,14,72,12,"error"],[105,19,72,17],[105,20,72,18],[105,65,72,63],[105,67,72,65,"error"],[105,72,72,70],[105,73,72,71],[106,6,73,4],[106,13,73,11],[106,18,73,16],[107,4,74,2],[108,2,75,0],[110,2,77,0],[111,0,78,0],[112,0,79,0],[113,2,80,7],[113,17,80,22,"updateNotificationPreferences"],[113,46,80,51,"updateNotificationPreferences"],[113,47,80,52,"preferences"],[113,58,85,1],[113,60,85,21],[114,4,86,2],[114,8,86,6],[115,6,87,4],[115,12,87,10,"api"],[115,15,87,13],[115,16,87,13,"default"],[115,23,87,13],[115,24,87,14,"put"],[115,27,87,17],[115,28,87,18],[115,60,87,50],[115,62,87,52,"preferences"],[115,73,87,63],[115,74,87,64],[116,6,88,4,"console"],[116,13,88,11],[116,14,88,12,"log"],[116,17,88,15],[116,18,88,16],[116,52,88,50],[116,53,88,51],[117,6,89,4],[117,13,89,11],[117,17,89,15],[118,4,90,2],[118,5,90,3],[118,6,90,4],[118,13,90,11,"error"],[118,18,90,16],[118,20,90,18],[119,6,91,4,"console"],[119,13,91,11],[119,14,91,12,"error"],[119,19,91,17],[119,20,91,18],[119,64,91,62],[119,66,91,64,"error"],[119,71,91,69],[119,72,91,70],[120,6,92,4],[120,13,92,11],[120,18,92,16],[121,4,93,2],[122,2,94,0],[124,2,96,0],[125,0,97,0],[126,0,98,0],[127,2,99,7],[127,17,99,22,"removePushTokenFromBackend"],[127,43,99,48,"removePushTokenFromBackend"],[127,44,99,48],[127,46,99,69],[128,4,100,2],[128,8,100,6],[129,6,101,4],[129,12,101,10,"api"],[129,15,101,13],[129,16,101,13,"default"],[129,23,101,13],[129,24,101,14,"delete"],[129,30,101,20],[129,31,101,21],[129,62,101,52],[129,63,101,53],[130,6,102,4,"console"],[130,13,102,11],[130,14,102,12,"log"],[130,17,102,15],[130,18,102,16],[130,51,102,49],[130,52,102,50],[131,6,103,4],[131,13,103,11],[131,17,103,15],[132,4,104,2],[132,5,104,3],[132,6,104,4],[132,13,104,11,"error"],[132,18,104,16],[132,20,104,18],[133,6,105,4,"console"],[133,13,105,11],[133,14,105,12,"error"],[133,19,105,17],[133,20,105,18],[133,63,105,61],[133,65,105,63,"error"],[133,70,105,68],[133,71,105,69],[134,6,106,4],[134,13,106,11],[134,18,106,16],[135,4,107,2],[136,2,108,0],[137,0,108,1],[137,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","sendPushTokenToBackend","updateNotificationPreferences","removePushTokenFromBackend"],"mappings":"AAA;sBCO;IDI;OEM;CF2C;OGK;CHS;OIK;CJc;OKK;CLS"},"hasCjsExports":false},"type":"js/module"}]}
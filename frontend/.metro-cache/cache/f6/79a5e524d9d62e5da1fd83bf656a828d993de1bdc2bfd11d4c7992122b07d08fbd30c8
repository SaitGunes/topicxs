{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":109,"column":53,"index":3169},"end":{"line":109,"column":85,"index":3201}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"imports":1,"isOptional":true}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":109,"column":47,"index":3163},"end":{"line":109,"column":85,"index":3201}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"expo/internal/async-require-module\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear AsyncStorage\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.clear(); // Clear all storage\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":135,"map":[[12,2,43,0,"Object"],[12,8,43,0],[12,9,43,0,"defineProperty"],[12,23,43,0],[12,24,43,0,"exports"],[12,31,43,0],[13,4,43,0,"enumerable"],[13,14,43,0],[14,4,43,0,"get"],[14,7,43,0],[14,18,43,0,"get"],[14,19,43,0],[15,6,43,0],[15,13,43,0,"useAuthStore"],[15,25,43,0],[16,4,43,0],[17,2,43,0],[18,2,137,4],[18,6,137,4,"_expoVirtualEnv"],[18,21,137,4],[18,24,137,4,"require"],[18,31,137,4],[18,32,137,4,"_dependencyMap"],[18,46,137,4],[19,2,1,0],[19,6,1,0,"_zustand"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_axios"],[22,12,3,0],[22,15,3,0,"require"],[22,22,3,0],[22,23,3,0,"_dependencyMap"],[22,37,3,0],[23,2,3,0],[23,6,3,0,"axios"],[23,11,3,0],[23,14,3,0,"_interopDefault"],[23,29,3,0],[23,30,3,0,"_axios"],[23,36,3,0],[24,2,5,0],[24,8,5,6,"API_URL"],[24,15,5,13],[24,18,5,13,"_expoVirtualEnv"],[24,33,5,13],[24,34,5,13,"env"],[24,37,5,13],[24,38,5,13,"EXPO_PUBLIC_BACKEND_URL"],[24,61,5,51],[25,2,43,7],[25,8,43,13,"useAuthStore"],[25,20,43,25],[25,23,43,28],[25,27,43,28,"create"],[25,35,43,34],[25,36,43,34,"create"],[25,42,43,34],[25,44,43,47,"set"],[25,47,43,50],[25,52,43,56],[26,4,44,2,"user"],[26,8,44,6],[26,10,44,8],[26,14,44,12],[27,4,45,2,"token"],[27,9,45,7],[27,11,45,9],[27,15,45,13],[28,4,46,2,"isLoading"],[28,13,46,11],[28,15,46,13],[28,19,46,17],[29,4,48,2,"loadToken"],[29,13,48,11],[29,15,48,13],[29,21,48,13,"loadToken"],[29,22,48,13],[29,27,48,25],[30,6,49,4],[30,10,49,8],[31,8,50,6],[31,14,50,12,"token"],[31,19,50,17],[31,22,50,20],[31,28,50,26,"AsyncStorage"],[31,40,50,38],[31,41,50,38,"default"],[31,48,50,38],[31,49,50,39,"getItem"],[31,56,50,46],[31,57,50,47],[31,64,50,54],[31,65,50,55],[32,8,51,6],[32,14,51,12,"userData"],[32,22,51,20],[32,25,51,23],[32,31,51,29,"AsyncStorage"],[32,43,51,41],[32,44,51,41,"default"],[32,51,51,41],[32,52,51,42,"getItem"],[32,59,51,49],[32,60,51,50],[32,66,51,56],[32,67,51,57],[33,8,53,6],[33,12,53,10,"token"],[33,17,53,15],[33,21,53,19,"userData"],[33,29,53,27],[33,31,53,29],[34,10,54,8,"set"],[34,13,54,11],[34,14,54,12],[35,12,54,14,"token"],[35,17,54,19],[36,12,54,21,"user"],[36,16,54,25],[36,18,54,27,"JSON"],[36,22,54,31],[36,23,54,32,"parse"],[36,28,54,37],[36,29,54,38,"userData"],[36,37,54,46],[36,38,54,47],[37,12,54,49,"isLoading"],[37,21,54,58],[37,23,54,60],[38,10,54,66],[38,11,54,67],[38,12,54,68],[39,8,55,6],[39,9,55,7],[39,15,55,13],[40,10,56,8,"set"],[40,13,56,11],[40,14,56,12],[41,12,56,14,"isLoading"],[41,21,56,23],[41,23,56,25],[42,10,56,31],[42,11,56,32],[42,12,56,33],[43,8,57,6],[44,6,58,4],[44,7,58,5],[44,8,58,6],[44,15,58,13,"error"],[44,20,58,18],[44,22,58,20],[45,8,59,6,"console"],[45,15,59,13],[45,16,59,14,"error"],[45,21,59,19],[45,22,59,20],[45,41,59,39],[45,43,59,41,"error"],[45,48,59,46],[45,49,59,47],[46,8,60,6,"set"],[46,11,60,9],[46,12,60,10],[47,10,60,12,"isLoading"],[47,19,60,21],[47,21,60,23],[48,8,60,29],[48,9,60,30],[48,10,60,31],[49,6,61,4],[50,4,62,2],[50,5,62,3],[51,4,64,2,"login"],[51,9,64,7],[51,11,64,9],[51,17,64,9,"login"],[51,18,64,16,"username"],[51,26,64,32],[51,28,64,34,"password"],[51,36,64,50],[51,41,64,55],[52,6,65,4],[52,10,65,8],[53,8,66,6],[53,14,66,12,"response"],[53,22,66,20],[53,25,66,23],[53,31,66,29,"axios"],[53,36,66,34],[53,37,66,34,"default"],[53,44,66,34],[53,45,66,35,"post"],[53,49,66,39],[53,50,66,40],[53,53,66,43,"API_URL"],[53,60,66,50],[53,77,66,67],[53,79,66,69],[54,10,67,8,"username"],[54,18,67,16],[55,10,68,8,"password"],[56,8,69,6],[56,9,69,7],[56,10,69,8],[57,8,71,6],[57,14,71,12],[58,10,71,14,"access_token"],[58,22,71,26],[59,10,71,28,"user"],[60,8,71,33],[60,9,71,34],[60,12,71,37,"response"],[60,20,71,45],[60,21,71,46,"data"],[60,25,71,50],[61,8,73,6],[61,14,73,12,"AsyncStorage"],[61,26,73,24],[61,27,73,24,"default"],[61,34,73,24],[61,35,73,25,"setItem"],[61,42,73,32],[61,43,73,33],[61,50,73,40],[61,52,73,42,"access_token"],[61,64,73,54],[61,65,73,55],[62,8,74,6],[62,14,74,12,"AsyncStorage"],[62,26,74,24],[62,27,74,24,"default"],[62,34,74,24],[62,35,74,25,"setItem"],[62,42,74,32],[62,43,74,33],[62,49,74,39],[62,51,74,41,"JSON"],[62,55,74,45],[62,56,74,46,"stringify"],[62,65,74,55],[62,66,74,56,"user"],[62,70,74,60],[62,71,74,61],[62,72,74,62],[63,8,76,6,"set"],[63,11,76,9],[63,12,76,10],[64,10,76,12,"user"],[64,14,76,16],[65,10,76,18,"token"],[65,15,76,23],[65,17,76,25,"access_token"],[66,8,76,38],[66,9,76,39],[66,10,76,40],[67,6,77,4],[67,7,77,5],[67,8,77,6],[67,15,77,13,"error"],[67,20,77,23],[67,22,77,25],[68,8,78,6],[68,14,78,12],[68,18,78,16,"Error"],[68,23,78,21],[68,24,78,22,"error"],[68,29,78,27],[68,30,78,28,"response"],[68,38,78,36],[68,40,78,38,"data"],[68,44,78,42],[68,46,78,44,"detail"],[68,52,78,50],[68,56,78,54],[68,70,78,68],[68,71,78,69],[69,6,79,4],[70,4,80,2],[70,5,80,3],[71,4,82,2,"register"],[71,12,82,10],[71,14,82,12],[71,20,82,12,"register"],[71,21,82,19,"username"],[71,29,82,35],[71,31,82,37,"email"],[71,36,82,50],[71,38,82,52,"password"],[71,46,82,68],[71,48,82,70,"full_name"],[71,57,82,87],[71,59,82,89,"referral_code"],[71,72,82,111],[71,74,82,113,"user_type"],[71,83,82,131],[71,85,82,133,"phone_number"],[71,97,82,154],[71,102,82,159],[72,6,83,4],[72,10,83,8],[73,8,84,6],[73,14,84,12,"response"],[73,22,84,20],[73,25,84,23],[73,31,84,29,"axios"],[73,36,84,34],[73,37,84,34,"default"],[73,44,84,34],[73,45,84,35,"post"],[73,49,84,39],[73,50,84,40],[73,53,84,43,"API_URL"],[73,60,84,50],[73,80,84,70],[73,82,84,72],[74,10,85,8,"username"],[74,18,85,16],[75,10,86,8,"email"],[75,15,86,13],[76,10,87,8,"password"],[76,18,87,16],[77,10,88,8,"full_name"],[77,19,88,17],[78,10,89,8,"referral_code"],[78,23,89,21],[78,25,89,23,"referral_code"],[78,38,89,36],[78,42,89,40,"undefined"],[78,51,89,49],[79,10,90,8,"user_type"],[79,19,90,17],[79,21,90,19,"user_type"],[79,30,90,28],[79,34,90,32],[79,42,90,40],[80,10,91,8,"phone_number"],[80,22,91,20],[80,24,91,22,"phone_number"],[80,36,91,34],[80,40,91,38,"undefined"],[81,8,92,6],[81,9,92,7],[81,10,92,8],[82,8,94,6],[82,14,94,12],[83,10,94,14,"access_token"],[83,22,94,26],[84,10,94,28,"user"],[85,8,94,33],[85,9,94,34],[85,12,94,37,"response"],[85,20,94,45],[85,21,94,46,"data"],[85,25,94,50],[86,8,96,6],[86,14,96,12,"AsyncStorage"],[86,26,96,24],[86,27,96,24,"default"],[86,34,96,24],[86,35,96,25,"setItem"],[86,42,96,32],[86,43,96,33],[86,50,96,40],[86,52,96,42,"access_token"],[86,64,96,54],[86,65,96,55],[87,8,97,6],[87,14,97,12,"AsyncStorage"],[87,26,97,24],[87,27,97,24,"default"],[87,34,97,24],[87,35,97,25,"setItem"],[87,42,97,32],[87,43,97,33],[87,49,97,39],[87,51,97,41,"JSON"],[87,55,97,45],[87,56,97,46,"stringify"],[87,65,97,55],[87,66,97,56,"user"],[87,70,97,60],[87,71,97,61],[87,72,97,62],[88,8,99,6,"set"],[88,11,99,9],[88,12,99,10],[89,10,99,12,"user"],[89,14,99,16],[90,10,99,18,"token"],[90,15,99,23],[90,17,99,25,"access_token"],[91,8,99,38],[91,9,99,39],[91,10,99,40],[92,6,100,4],[92,7,100,5],[92,8,100,6],[92,15,100,13,"error"],[92,20,100,23],[92,22,100,25],[93,8,101,6],[93,14,101,12],[93,18,101,16,"Error"],[93,23,101,21],[93,24,101,22,"error"],[93,29,101,27],[93,30,101,28,"response"],[93,38,101,36],[93,40,101,38,"data"],[93,44,101,42],[93,46,101,44,"detail"],[93,52,101,50],[93,56,101,54],[93,77,101,75],[93,78,101,76],[94,6,102,4],[95,4,103,2],[95,5,103,3],[96,4,105,2,"logout"],[96,10,105,8],[96,12,105,10],[96,18,105,10,"logout"],[96,19,105,10],[96,24,105,22],[97,6,106,4],[97,10,106,8],[98,8,107,6],[99,8,108,6],[99,12,108,10],[100,10,109,8],[100,16,109,14],[101,12,109,16,"removePushTokenFromBackend"],[102,10,109,43],[102,11,109,44],[102,14,109,47],[102,20,109,47,"require"],[102,27,109,47],[102,28,109,47,"_dependencyMap"],[102,42,109,47],[102,85,109,47,"_dependencyMap"],[102,99,109,47],[102,104,109,47,"_dependencyMap"],[102,118,109,47],[102,119,109,47,"paths"],[102,124,109,47],[102,151,109,85],[103,10,110,8],[103,16,110,14,"removePushTokenFromBackend"],[103,42,110,40],[103,43,110,41],[103,44,110,42],[104,8,111,6],[104,9,111,7],[104,10,111,8],[104,17,111,15,"error"],[104,22,111,20],[104,24,111,22],[105,10,112,8,"console"],[105,17,112,15],[105,18,112,16,"error"],[105,23,112,21],[105,24,112,22],[105,52,112,50],[105,54,112,52,"error"],[105,59,112,57],[105,60,112,58],[106,8,113,6],[108,8,115,6],[109,8,116,6],[109,14,116,12,"AsyncStorage"],[109,26,116,24],[109,27,116,24,"default"],[109,34,116,24],[109,35,116,25,"removeItem"],[109,45,116,35],[109,46,116,36],[109,53,116,43],[109,54,116,44],[110,8,117,6],[110,14,117,12,"AsyncStorage"],[110,26,117,24],[110,27,117,24,"default"],[110,34,117,24],[110,35,117,25,"removeItem"],[110,45,117,35],[110,46,117,36],[110,52,117,42],[110,53,117,43],[111,8,118,6],[111,14,118,12,"AsyncStorage"],[111,26,118,24],[111,27,118,24,"default"],[111,34,118,24],[111,35,118,25,"clear"],[111,40,118,30],[111,41,118,31],[111,42,118,32],[111,43,118,33],[111,44,118,34],[113,8,120,6],[114,8,121,6,"set"],[114,11,121,9],[114,12,121,10],[115,10,121,12,"user"],[115,14,121,16],[115,16,121,18],[115,20,121,22],[116,10,121,24,"token"],[116,15,121,29],[116,17,121,31],[116,21,121,35],[117,10,121,37,"isLoading"],[117,19,121,46],[117,21,121,48],[118,8,121,54],[118,9,121,55],[118,10,121,56],[119,8,123,6,"console"],[119,15,123,13],[119,16,123,14,"log"],[119,19,123,17],[119,20,123,18],[119,39,123,37],[119,40,123,38],[120,6,124,4],[120,7,124,5],[120,8,124,6],[120,15,124,13,"error"],[120,20,124,18],[120,22,124,20],[121,8,125,6,"console"],[121,15,125,13],[121,16,125,14,"error"],[121,21,125,19],[121,22,125,20],[121,37,125,35],[121,39,125,37,"error"],[121,44,125,42],[121,45,125,43],[122,6,126,4],[123,4,127,2],[123,5,127,3],[124,4,129,2,"setUser"],[124,11,129,9],[124,13,129,11],[124,19,129,18,"user"],[124,23,129,28],[124,27,129,33],[125,6,130,4],[125,10,130,8],[126,8,131,6],[126,14,131,12,"AsyncStorage"],[126,26,131,24],[126,27,131,24,"default"],[126,34,131,24],[126,35,131,25,"setItem"],[126,42,131,32],[126,43,131,33],[126,49,131,39],[126,51,131,41,"JSON"],[126,55,131,45],[126,56,131,46,"stringify"],[126,65,131,55],[126,66,131,56,"user"],[126,70,131,60],[126,71,131,61],[126,72,131,62],[127,8,132,6,"set"],[127,11,132,9],[127,12,132,10],[128,10,132,12,"user"],[129,8,132,17],[129,9,132,18],[129,10,132,19],[130,6,133,4],[130,7,133,5],[130,8,133,6],[130,15,133,13,"error"],[130,20,133,18],[130,22,133,20],[131,8,134,6,"console"],[131,15,134,13],[131,16,134,14,"error"],[131,21,134,19],[131,22,134,20],[131,39,134,37],[131,41,134,39,"error"],[131,46,134,44],[131,47,134,45],[132,6,135,4],[133,4,136,2],[134,2,137,0],[134,3,137,1],[134,4,137,2],[134,5,137,3],[135,0,137,4],[135,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC0C;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJsB;WKE;GLO;EDC"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}},{"name":"../utils/notifications","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":109,"column":53,"index":3169},"end":{"line":109,"column":85,"index":3201}}],"key":"lryBNtHZmIhXbeC+oBDvSN7q29c=","exportNames":["*"],"isOptional":true}},{"name":"/app/frontend/node_modules/@expo/metro-config/build/async-require.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":109,"column":47,"index":3163},"end":{"line":109,"column":85,"index":3201}}],"key":"daau5xiLR32xskYL0mG55FO6bjk=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _axios = _interopRequireDefault(require(_dependencyMap[3], \"axios\"));\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    loadToken: async () => {\n      try {\n        const token = await _asyncStorage.default.getItem('token');\n        const userData = await _asyncStorage.default.getItem('user');\n        if (token && userData) {\n          set({\n            token,\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Load token error:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    login: async (username, password) => {\n      try {\n        const response = await _axios.default.post(`${API_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await _asyncStorage.default.setItem('token', access_token);\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    register: async (username, email, password, full_name, referral_code, user_type, phone_number) => {\n      try {\n        const response = await _axios.default.post(`${API_URL}/api/auth/register`, {\n          username,\n          email,\n          password,\n          full_name,\n          referral_code: referral_code || undefined,\n          user_type: user_type || 'driver',\n          phone_number: phone_number || undefined\n        });\n        const {\n          access_token,\n          user\n        } = response.data;\n        await _asyncStorage.default.setItem('token', access_token);\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user,\n          token: access_token\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    logout: async () => {\n      try {\n        // Remove push token from backend\n        try {\n          const {\n            removePushTokenFromBackend\n          } = await require(_dependencyMap[5], \"/app/frontend/node_modules/@expo/metro-config/build/async-require.js\")(_dependencyMap[4], _dependencyMap.paths, \"../utils/notifications\");\n          await removePushTokenFromBackend();\n        } catch (error) {\n          console.error('Error removing push token:', error);\n        }\n\n        // Clear AsyncStorage\n        await _asyncStorage.default.removeItem('token');\n        await _asyncStorage.default.removeItem('user');\n        await _asyncStorage.default.clear(); // Clear all storage\n\n        // Clear state\n        set({\n          user: null,\n          token: null,\n          isLoading: false\n        });\n        console.log('Logout successful');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    setUser: async user => {\n      try {\n        await _asyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Set user error:', error);\n      }\n    }\n  }));\n});","lineCount":121,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_axios"],[9,12,3,0],[9,15,3,0,"_interopRequireDefault"],[9,37,3,0],[9,38,3,0,"require"],[9,45,3,0],[9,46,3,0,"_dependencyMap"],[9,60,3,0],[10,2,5,0],[10,8,5,6,"API_URL"],[10,15,5,13],[10,18,5,16,"process"],[10,25,5,23],[10,26,5,24,"env"],[10,29,5,27],[10,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[10,53,5,51],[11,2,43,7],[11,8,43,13,"useAuthStore"],[11,20,43,25],[11,23,43,25,"exports"],[11,30,43,25],[11,31,43,25,"useAuthStore"],[11,43,43,25],[11,46,43,28],[11,50,43,28,"create"],[11,65,43,34],[11,67,43,47,"set"],[11,70,43,50],[11,75,43,56],[12,4,44,2,"user"],[12,8,44,6],[12,10,44,8],[12,14,44,12],[13,4,45,2,"token"],[13,9,45,7],[13,11,45,9],[13,15,45,13],[14,4,46,2,"isLoading"],[14,13,46,11],[14,15,46,13],[14,19,46,17],[15,4,48,2,"loadToken"],[15,13,48,11],[15,15,48,13],[15,21,48,13,"loadToken"],[15,22,48,13],[15,27,48,25],[16,6,49,4],[16,10,49,8],[17,8,50,6],[17,14,50,12,"token"],[17,19,50,17],[17,22,50,20],[17,28,50,26,"AsyncStorage"],[17,49,50,38],[17,50,50,39,"getItem"],[17,57,50,46],[17,58,50,47],[17,65,50,54],[17,66,50,55],[18,8,51,6],[18,14,51,12,"userData"],[18,22,51,20],[18,25,51,23],[18,31,51,29,"AsyncStorage"],[18,52,51,41],[18,53,51,42,"getItem"],[18,60,51,49],[18,61,51,50],[18,67,51,56],[18,68,51,57],[19,8,53,6],[19,12,53,10,"token"],[19,17,53,15],[19,21,53,19,"userData"],[19,29,53,27],[19,31,53,29],[20,10,54,8,"set"],[20,13,54,11],[20,14,54,12],[21,12,54,14,"token"],[21,17,54,19],[22,12,54,21,"user"],[22,16,54,25],[22,18,54,27,"JSON"],[22,22,54,31],[22,23,54,32,"parse"],[22,28,54,37],[22,29,54,38,"userData"],[22,37,54,46],[22,38,54,47],[23,12,54,49,"isLoading"],[23,21,54,58],[23,23,54,60],[24,10,54,66],[24,11,54,67],[24,12,54,68],[25,8,55,6],[25,9,55,7],[25,15,55,13],[26,10,56,8,"set"],[26,13,56,11],[26,14,56,12],[27,12,56,14,"isLoading"],[27,21,56,23],[27,23,56,25],[28,10,56,31],[28,11,56,32],[28,12,56,33],[29,8,57,6],[30,6,58,4],[30,7,58,5],[30,8,58,6],[30,15,58,13,"error"],[30,20,58,18],[30,22,58,20],[31,8,59,6,"console"],[31,15,59,13],[31,16,59,14,"error"],[31,21,59,19],[31,22,59,20],[31,41,59,39],[31,43,59,41,"error"],[31,48,59,46],[31,49,59,47],[32,8,60,6,"set"],[32,11,60,9],[32,12,60,10],[33,10,60,12,"isLoading"],[33,19,60,21],[33,21,60,23],[34,8,60,29],[34,9,60,30],[34,10,60,31],[35,6,61,4],[36,4,62,2],[36,5,62,3],[37,4,64,2,"login"],[37,9,64,7],[37,11,64,9],[37,17,64,9,"login"],[37,18,64,16,"username"],[37,26,64,32],[37,28,64,34,"password"],[37,36,64,50],[37,41,64,55],[38,6,65,4],[38,10,65,8],[39,8,66,6],[39,14,66,12,"response"],[39,22,66,20],[39,25,66,23],[39,31,66,29,"axios"],[39,45,66,34],[39,46,66,35,"post"],[39,50,66,39],[39,51,66,40],[39,54,66,43,"API_URL"],[39,61,66,50],[39,78,66,67],[39,80,66,69],[40,10,67,8,"username"],[40,18,67,16],[41,10,68,8,"password"],[42,8,69,6],[42,9,69,7],[42,10,69,8],[43,8,71,6],[43,14,71,12],[44,10,71,14,"access_token"],[44,22,71,26],[45,10,71,28,"user"],[46,8,71,33],[46,9,71,34],[46,12,71,37,"response"],[46,20,71,45],[46,21,71,46,"data"],[46,25,71,50],[47,8,73,6],[47,14,73,12,"AsyncStorage"],[47,35,73,24],[47,36,73,25,"setItem"],[47,43,73,32],[47,44,73,33],[47,51,73,40],[47,53,73,42,"access_token"],[47,65,73,54],[47,66,73,55],[48,8,74,6],[48,14,74,12,"AsyncStorage"],[48,35,74,24],[48,36,74,25,"setItem"],[48,43,74,32],[48,44,74,33],[48,50,74,39],[48,52,74,41,"JSON"],[48,56,74,45],[48,57,74,46,"stringify"],[48,66,74,55],[48,67,74,56,"user"],[48,71,74,60],[48,72,74,61],[48,73,74,62],[49,8,76,6,"set"],[49,11,76,9],[49,12,76,10],[50,10,76,12,"user"],[50,14,76,16],[51,10,76,18,"token"],[51,15,76,23],[51,17,76,25,"access_token"],[52,8,76,38],[52,9,76,39],[52,10,76,40],[53,6,77,4],[53,7,77,5],[53,8,77,6],[53,15,77,13,"error"],[53,20,77,23],[53,22,77,25],[54,8,78,6],[54,14,78,12],[54,18,78,16,"Error"],[54,23,78,21],[54,24,78,22,"error"],[54,29,78,27],[54,30,78,28,"response"],[54,38,78,36],[54,40,78,38,"data"],[54,44,78,42],[54,46,78,44,"detail"],[54,52,78,50],[54,56,78,54],[54,70,78,68],[54,71,78,69],[55,6,79,4],[56,4,80,2],[56,5,80,3],[57,4,82,2,"register"],[57,12,82,10],[57,14,82,12],[57,20,82,12,"register"],[57,21,82,19,"username"],[57,29,82,35],[57,31,82,37,"email"],[57,36,82,50],[57,38,82,52,"password"],[57,46,82,68],[57,48,82,70,"full_name"],[57,57,82,87],[57,59,82,89,"referral_code"],[57,72,82,111],[57,74,82,113,"user_type"],[57,83,82,131],[57,85,82,133,"phone_number"],[57,97,82,154],[57,102,82,159],[58,6,83,4],[58,10,83,8],[59,8,84,6],[59,14,84,12,"response"],[59,22,84,20],[59,25,84,23],[59,31,84,29,"axios"],[59,45,84,34],[59,46,84,35,"post"],[59,50,84,39],[59,51,84,40],[59,54,84,43,"API_URL"],[59,61,84,50],[59,81,84,70],[59,83,84,72],[60,10,85,8,"username"],[60,18,85,16],[61,10,86,8,"email"],[61,15,86,13],[62,10,87,8,"password"],[62,18,87,16],[63,10,88,8,"full_name"],[63,19,88,17],[64,10,89,8,"referral_code"],[64,23,89,21],[64,25,89,23,"referral_code"],[64,38,89,36],[64,42,89,40,"undefined"],[64,51,89,49],[65,10,90,8,"user_type"],[65,19,90,17],[65,21,90,19,"user_type"],[65,30,90,28],[65,34,90,32],[65,42,90,40],[66,10,91,8,"phone_number"],[66,22,91,20],[66,24,91,22,"phone_number"],[66,36,91,34],[66,40,91,38,"undefined"],[67,8,92,6],[67,9,92,7],[67,10,92,8],[68,8,94,6],[68,14,94,12],[69,10,94,14,"access_token"],[69,22,94,26],[70,10,94,28,"user"],[71,8,94,33],[71,9,94,34],[71,12,94,37,"response"],[71,20,94,45],[71,21,94,46,"data"],[71,25,94,50],[72,8,96,6],[72,14,96,12,"AsyncStorage"],[72,35,96,24],[72,36,96,25,"setItem"],[72,43,96,32],[72,44,96,33],[72,51,96,40],[72,53,96,42,"access_token"],[72,65,96,54],[72,66,96,55],[73,8,97,6],[73,14,97,12,"AsyncStorage"],[73,35,97,24],[73,36,97,25,"setItem"],[73,43,97,32],[73,44,97,33],[73,50,97,39],[73,52,97,41,"JSON"],[73,56,97,45],[73,57,97,46,"stringify"],[73,66,97,55],[73,67,97,56,"user"],[73,71,97,60],[73,72,97,61],[73,73,97,62],[74,8,99,6,"set"],[74,11,99,9],[74,12,99,10],[75,10,99,12,"user"],[75,14,99,16],[76,10,99,18,"token"],[76,15,99,23],[76,17,99,25,"access_token"],[77,8,99,38],[77,9,99,39],[77,10,99,40],[78,6,100,4],[78,7,100,5],[78,8,100,6],[78,15,100,13,"error"],[78,20,100,23],[78,22,100,25],[79,8,101,6],[79,14,101,12],[79,18,101,16,"Error"],[79,23,101,21],[79,24,101,22,"error"],[79,29,101,27],[79,30,101,28,"response"],[79,38,101,36],[79,40,101,38,"data"],[79,44,101,42],[79,46,101,44,"detail"],[79,52,101,50],[79,56,101,54],[79,77,101,75],[79,78,101,76],[80,6,102,4],[81,4,103,2],[81,5,103,3],[82,4,105,2,"logout"],[82,10,105,8],[82,12,105,10],[82,18,105,10,"logout"],[82,19,105,10],[82,24,105,22],[83,6,106,4],[83,10,106,8],[84,8,107,6],[85,8,108,6],[85,12,108,10],[86,10,109,8],[86,16,109,14],[87,12,109,16,"removePushTokenFromBackend"],[88,10,109,43],[88,11,109,44],[88,14,109,47],[88,20,109,47,"require"],[88,27,109,47],[88,28,109,47,"_dependencyMap"],[88,42,109,47],[88,119,109,47,"_dependencyMap"],[88,133,109,47],[88,138,109,47,"_dependencyMap"],[88,152,109,47],[88,153,109,47,"paths"],[88,158,109,47],[88,185,109,85],[89,10,110,8],[89,16,110,14,"removePushTokenFromBackend"],[89,42,110,40],[89,43,110,41],[89,44,110,42],[90,8,111,6],[90,9,111,7],[90,10,111,8],[90,17,111,15,"error"],[90,22,111,20],[90,24,111,22],[91,10,112,8,"console"],[91,17,112,15],[91,18,112,16,"error"],[91,23,112,21],[91,24,112,22],[91,52,112,50],[91,54,112,52,"error"],[91,59,112,57],[91,60,112,58],[92,8,113,6],[94,8,115,6],[95,8,116,6],[95,14,116,12,"AsyncStorage"],[95,35,116,24],[95,36,116,25,"removeItem"],[95,46,116,35],[95,47,116,36],[95,54,116,43],[95,55,116,44],[96,8,117,6],[96,14,117,12,"AsyncStorage"],[96,35,117,24],[96,36,117,25,"removeItem"],[96,46,117,35],[96,47,117,36],[96,53,117,42],[96,54,117,43],[97,8,118,6],[97,14,118,12,"AsyncStorage"],[97,35,118,24],[97,36,118,25,"clear"],[97,41,118,30],[97,42,118,31],[97,43,118,32],[97,44,118,33],[97,45,118,34],[99,8,120,6],[100,8,121,6,"set"],[100,11,121,9],[100,12,121,10],[101,10,121,12,"user"],[101,14,121,16],[101,16,121,18],[101,20,121,22],[102,10,121,24,"token"],[102,15,121,29],[102,17,121,31],[102,21,121,35],[103,10,121,37,"isLoading"],[103,19,121,46],[103,21,121,48],[104,8,121,54],[104,9,121,55],[104,10,121,56],[105,8,123,6,"console"],[105,15,123,13],[105,16,123,14,"log"],[105,19,123,17],[105,20,123,18],[105,39,123,37],[105,40,123,38],[106,6,124,4],[106,7,124,5],[106,8,124,6],[106,15,124,13,"error"],[106,20,124,18],[106,22,124,20],[107,8,125,6,"console"],[107,15,125,13],[107,16,125,14,"error"],[107,21,125,19],[107,22,125,20],[107,37,125,35],[107,39,125,37,"error"],[107,44,125,42],[107,45,125,43],[108,6,126,4],[109,4,127,2],[109,5,127,3],[110,4,129,2,"setUser"],[110,11,129,9],[110,13,129,11],[110,19,129,18,"user"],[110,23,129,28],[110,27,129,33],[111,6,130,4],[111,10,130,8],[112,8,131,6],[112,14,131,12,"AsyncStorage"],[112,35,131,24],[112,36,131,25,"setItem"],[112,43,131,32],[112,44,131,33],[112,50,131,39],[112,52,131,41,"JSON"],[112,56,131,45],[112,57,131,46,"stringify"],[112,66,131,55],[112,67,131,56,"user"],[112,71,131,60],[112,72,131,61],[112,73,131,62],[113,8,132,6,"set"],[113,11,132,9],[113,12,132,10],[114,10,132,12,"user"],[115,8,132,17],[115,9,132,18],[115,10,132,19],[116,6,133,4],[116,7,133,5],[116,8,133,6],[116,15,133,13,"error"],[116,20,133,18],[116,22,133,20],[117,8,134,6,"console"],[117,15,134,13],[117,16,134,14,"error"],[117,21,134,19],[117,22,134,20],[117,39,134,37],[117,41,134,39,"error"],[117,46,134,44],[117,47,134,45],[118,6,135,4],[119,4,136,2],[120,2,137,0],[120,3,137,1],[120,4,137,2],[120,5,137,3],[121,0,137,4],[121,3]],"functionMap":{"names":["<global>","create$argument_0","loadToken","login","register","logout","setUser"],"mappings":"AAA;8CC0C;aCK;GDc;SEE;GFgB;YGE;GHqB;UIE;GJsB;WKE;GLO;EDC"}},"type":"js/module"}]}